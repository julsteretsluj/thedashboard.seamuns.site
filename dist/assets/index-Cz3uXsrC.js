function uS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function dS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fx={exports:{}},zc={},Bx={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),hS=Symbol.for("react.portal"),fS=Symbol.for("react.fragment"),mS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),gS=Symbol.for("react.provider"),vS=Symbol.for("react.context"),yS=Symbol.for("react.forward_ref"),xS=Symbol.for("react.suspense"),_S=Symbol.for("react.memo"),wS=Symbol.for("react.lazy"),pg=Symbol.iterator;function ES(t){return t===null||typeof t!="object"?null:(t=pg&&t[pg]||t["@@iterator"],typeof t=="function"?t:null)}var zx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$x=Object.assign,Hx={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=Hx,this.updater=n||zx}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wx(){}Wx.prototype=Ai.prototype;function yf(t,e,n){this.props=t,this.context=e,this.refs=Hx,this.updater=n||zx}var xf=yf.prototype=new Wx;xf.constructor=yf;$x(xf,Ai.prototype);xf.isPureReactComponent=!0;var gg=Array.isArray,Gx=Object.prototype.hasOwnProperty,_f={current:null},qx={key:!0,ref:!0,__self:!0,__source:!0};function Kx(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Gx.call(e,r)&&!qx.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:_o,type:t,key:i,ref:a,props:s,_owner:_f.current}}function bS(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wf(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function SS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vg=/\/+/g;function Yu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?SS(""+t.key):e.toString(36)}function Sl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _o:case hS:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Yu(a,0):r,gg(s)?(n="",t!=null&&(n=t.replace(vg,"$&/")+"/"),Sl(s,e,n,"",function(d){return d})):s!=null&&(wf(s)&&(s=bS(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(vg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",gg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Yu(i,l);a+=Sl(i,e,n,u,s)}else if(u=ES(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Yu(i,l++),a+=Sl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function el(t,e,n){if(t==null)return t;var r=[],s=0;return Sl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function CS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Cl={transition:null},TS={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Cl,ReactCurrentOwner:_f};function Qx(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:el,forEach:function(t,e,n){el(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return el(t,function(){e++}),e},toArray:function(t){return el(t,function(e){return e})||[]},only:function(t){if(!wf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ai;ue.Fragment=fS;ue.Profiler=pS;ue.PureComponent=yf;ue.StrictMode=mS;ue.Suspense=xS;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS;ue.act=Qx;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$x({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=_f.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Gx.call(e,u)&&!qx.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:_o,type:t.type,key:s,ref:i,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:vS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gS,_context:t},t.Consumer=t};ue.createElement=Kx;ue.createFactory=function(t){var e=Kx.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:yS,render:t}};ue.isValidElement=wf;ue.lazy=function(t){return{$$typeof:wS,_payload:{_status:-1,_result:t},_init:CS}};ue.memo=function(t,e){return{$$typeof:_S,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Cl.transition;Cl.transition={};try{t()}finally{Cl.transition=e}};ue.unstable_act=Qx;ue.useCallback=function(t,e){return wt.current.useCallback(t,e)};ue.useContext=function(t){return wt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return wt.current.useEffect(t,e)};ue.useId=function(){return wt.current.useId()};ue.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return wt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};ue.useRef=function(t){return wt.current.useRef(t)};ue.useState=function(t){return wt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return wt.current.useTransition()};ue.version="18.3.1";Bx.exports=ue;var C=Bx.exports;const IS=dS(C),kS=uS({__proto__:null,default:IS},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS=C,AS=Symbol.for("react.element"),RS=Symbol.for("react.fragment"),PS=Object.prototype.hasOwnProperty,jS=NS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DS={key:!0,ref:!0,__self:!0,__source:!0};function Jx(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)PS.call(e,r)&&!DS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AS,type:t,key:i,ref:a,props:s,_owner:jS.current}}zc.Fragment=RS;zc.jsx=Jx;zc.jsxs=Jx;Fx.exports=zc;var c=Fx.exports,Yx={exports:{}},Bt={},Xx={exports:{}},Zx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ee){var te=G.length;G.push(ee);e:for(;0<te;){var xe=te-1>>>1,q=G[xe];if(0<s(q,ee))G[xe]=ee,G[te]=q,te=xe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ee=G[0],te=G.pop();if(te!==ee){G[0]=te;e:for(var xe=0,q=G.length,F=q>>>1;xe<F;){var H=2*(xe+1)-1,de=G[H],ve=H+1,ie=G[ve];if(0>s(de,te))ve<q&&0>s(ie,de)?(G[xe]=ie,G[ve]=te,xe=ve):(G[xe]=de,G[H]=te,xe=H);else if(ve<q&&0>s(ie,te))G[xe]=ie,G[ve]=te,xe=ve;else break e}}return ee}function s(G,ee){var te=G.sortIndex-ee.sortIndex;return te!==0?te:G.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],f=1,m=null,g=3,_=!1,E=!1,R=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=G)r(d),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=n(d)}}function N(G){if(R=!1,S(G),!E)if(n(u)!==null)E=!0,St(B);else{var ee=n(d);ee!==null&&ze(N,ee.startTime-G)}}function B(G,ee){E=!1,R&&(R=!1,w(x),x=-1),_=!0;var te=g;try{for(S(ee),m=n(u);m!==null&&(!(m.expirationTime>ee)||G&&!P());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,g=m.priorityLevel;var q=xe(m.expirationTime<=ee);ee=t.unstable_now(),typeof q=="function"?m.callback=q:m===n(u)&&r(u),S(ee)}else r(u);m=n(u)}if(m!==null)var F=!0;else{var H=n(d);H!==null&&ze(N,H.startTime-ee),F=!1}return F}finally{m=null,g=te,_=!1}}var U=!1,T=null,x=-1,I=5,k=-1;function P(){return!(t.unstable_now()-k<I)}function j(){if(T!==null){var G=t.unstable_now();k=G;var ee=!0;try{ee=T(!0,G)}finally{ee?b():(U=!1,T=null)}}else U=!1}var b;if(typeof v=="function")b=function(){v(j)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ce=Y.port2;Y.port1.onmessage=j,b=function(){ce.postMessage(null)}}else b=function(){A(j,0)};function St(G){T=G,U||(U=!0,b())}function ze(G,ee){x=A(function(){G(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,St(B))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var te=g;g=ee;try{return G()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=g;g=G;try{return ee()}finally{g=te}},t.unstable_scheduleCallback=function(G,ee,te){var xe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?xe+te:xe):te=xe,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=te+q,G={id:f++,callback:ee,priorityLevel:G,startTime:te,expirationTime:q,sortIndex:-1},te>xe?(G.sortIndex=te,e(d,G),n(u)===null&&G===n(d)&&(R?(w(x),x=-1):R=!0,ze(N,te-xe))):(G.sortIndex=q,e(u,G),E||_||(E=!0,St(B))),G},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(G){var ee=g;return function(){var te=g;g=ee;try{return G.apply(this,arguments)}finally{g=te}}}})(Zx);Xx.exports=Zx;var OS=Xx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=C,Ft=OS;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e_=new Set,za={};function bs(t,e){pi(t,e),pi(t+"Capture",e)}function pi(t,e){for(za[t]=e,t=0;t<e.length;t++)e_.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=Object.prototype.hasOwnProperty,LS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},xg={};function VS(t){return Hd.call(xg,t)?!0:Hd.call(yg,t)?!1:LS.test(t)?xg[t]=!0:(yg[t]=!0,!1)}function US(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FS(t,e,n,r){if(e===null||typeof e>"u"||US(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ef=/[\-:]([a-z])/g;function bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ef,bf);rt[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ef,bf);rt[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ef,bf);rt[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FS(e,n,s,r)&&(n=null),r||s===null?VS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),Wd=Symbol.for("react.profiler"),t_=Symbol.for("react.provider"),n_=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),Gd=Symbol.for("react.suspense"),qd=Symbol.for("react.suspense_list"),If=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),r_=Symbol.for("react.offscreen"),_g=Symbol.iterator;function ia(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Xu;function fa(t){if(Xu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xu=e&&e[1]||""}return`
`+Xu+t}var Zu=!1;function ed(t,e){if(!t||Zu)return"";Zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fa(t):""}function BS(t){switch(t.tag){case 5:return fa(t.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 2:case 15:return t=ed(t.type,!1),t;case 11:return t=ed(t.type.render,!1),t;case 1:return t=ed(t.type,!0),t;default:return""}}function Kd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case Ws:return"Portal";case Wd:return"Profiler";case Cf:return"StrictMode";case Gd:return"Suspense";case qd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n_:return(t.displayName||"Context")+".Consumer";case t_:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case If:return e=t.displayName||null,e!==null?e:Kd(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Kd(t(e))}catch{}}return null}function zS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kd(e);case 8:return e===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function s_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $S(t){var e=s_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nl(t){t._valueTracker||(t._valueTracker=$S(t))}function i_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=s_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qd(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a_(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function Jd(t,e){a_(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yd(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yd(t,e,n){(e!=="number"||Kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ma=Array.isArray;function ri(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ma(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function o_(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function l_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?l_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rl,c_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HS=["Webkit","ms","Moz","O"];Object.keys(ba).forEach(function(t){HS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ba[e]=ba[t]})});function u_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ba.hasOwnProperty(t)&&ba[t]?(""+e).trim():e+"px"}function d_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=u_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var WS=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eh(t,e){if(e){if(WS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function th(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nh=null;function kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rh=null,si=null,ii=null;function Cg(t){if(t=bo(t)){if(typeof rh!="function")throw Error($(280));var e=t.stateNode;e&&(e=qc(e),rh(t.stateNode,t.type,e))}}function h_(t){si?ii?ii.push(t):ii=[t]:si=t}function f_(){if(si){var t=si,e=ii;if(ii=si=null,Cg(t),e)for(t=0;t<e.length;t++)Cg(e[t])}}function m_(t,e){return t(e)}function p_(){}var td=!1;function g_(t,e,n){if(td)return t(e,n);td=!0;try{return m_(t,e,n)}finally{td=!1,(si!==null||ii!==null)&&(p_(),f_())}}function Ha(t,e){var n=t.stateNode;if(n===null)return null;var r=qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var sh=!1;if(zn)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){sh=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{sh=!1}function GS(t,e,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Sa=!1,Ql=null,Jl=!1,ih=null,qS={onError:function(t){Sa=!0,Ql=t}};function KS(t,e,n,r,s,i,a,l,u){Sa=!1,Ql=null,GS.apply(qS,arguments)}function QS(t,e,n,r,s,i,a,l,u){if(KS.apply(this,arguments),Sa){if(Sa){var d=Ql;Sa=!1,Ql=null}else throw Error($(198));Jl||(Jl=!0,ih=d)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tg(t){if(Ss(t)!==t)throw Error($(188))}function JS(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Tg(s),t;if(i===r)return Tg(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function y_(t){return t=JS(t),t!==null?x_(t):null}function x_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x_(t);if(e!==null)return e;t=t.sibling}return null}var __=Ft.unstable_scheduleCallback,Ig=Ft.unstable_cancelCallback,YS=Ft.unstable_shouldYield,XS=Ft.unstable_requestPaint,Ve=Ft.unstable_now,ZS=Ft.unstable_getCurrentPriorityLevel,Nf=Ft.unstable_ImmediatePriority,w_=Ft.unstable_UserBlockingPriority,Yl=Ft.unstable_NormalPriority,eC=Ft.unstable_LowPriority,E_=Ft.unstable_IdlePriority,$c=null,yn=null;function tC(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot($c,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:sC,nC=Math.log,rC=Math.LN2;function sC(t){return t>>>=0,t===0?32:31-(nC(t)/rC|0)|0}var sl=64,il=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=pa(l):(i&=a,i!==0&&(r=pa(i)))}else a=n&~s,a!==0?r=pa(a):i!==0&&(r=pa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),s=1<<n,r|=t[n],e&=~s;return r}function iC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ln(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=iC(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ah(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function b_(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function oC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function S_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C_,Rf,T_,I_,k_,oh=!1,al=[],wr=null,Er=null,br=null,Wa=new Map,Ga=new Map,dr=[],lC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ga.delete(e.pointerId)}}function oa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=bo(e),e!==null&&Rf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cC(t,e,n,r,s){switch(e){case"focusin":return wr=oa(wr,t,e,n,r,s),!0;case"dragenter":return Er=oa(Er,t,e,n,r,s),!0;case"mouseover":return br=oa(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wa.set(i,oa(Wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ga.set(i,oa(Ga.get(i)||null,t,e,n,r,s)),!0}return!1}function N_(t){var e=ss(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=v_(n),e!==null){t.blockedOn=e,k_(t.priority,function(){T_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nh=r,n.target.dispatchEvent(r),nh=null}else return e=bo(n),e!==null&&Rf(e),t.blockedOn=n,!1;e.shift()}return!0}function Ng(t,e,n){Tl(t)&&n.delete(e)}function uC(){oh=!1,wr!==null&&Tl(wr)&&(wr=null),Er!==null&&Tl(Er)&&(Er=null),br!==null&&Tl(br)&&(br=null),Wa.forEach(Ng),Ga.forEach(Ng)}function la(t,e){t.blockedOn===e&&(t.blockedOn=null,oh||(oh=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,uC)))}function qa(t){function e(s){return la(s,t)}if(0<al.length){la(al[0],t);for(var n=1;n<al.length;n++){var r=al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&la(wr,t),Er!==null&&la(Er,t),br!==null&&la(br,t),Wa.forEach(e),Ga.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)N_(n),n.blockedOn===null&&dr.shift()}var ai=Yn.ReactCurrentBatchConfig,Zl=!0;function dC(t,e,n,r){var s=we,i=ai.transition;ai.transition=null;try{we=1,Pf(t,e,n,r)}finally{we=s,ai.transition=i}}function hC(t,e,n,r){var s=we,i=ai.transition;ai.transition=null;try{we=4,Pf(t,e,n,r)}finally{we=s,ai.transition=i}}function Pf(t,e,n,r){if(Zl){var s=lh(t,e,n,r);if(s===null)hd(t,e,r,ec,n),kg(t,r);else if(cC(s,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<lC.indexOf(t)){for(;s!==null;){var i=bo(s);if(i!==null&&C_(i),i=lh(t,e,n,r),i===null&&hd(t,e,r,ec,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hd(t,e,r,null,n)}}var ec=null;function lh(t,e,n,r){if(ec=null,t=kf(r),t=ss(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ec=t,null}function A_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZS()){case Nf:return 1;case w_:return 4;case Yl:case eC:return 16;case E_:return 536870912;default:return 16}default:return 16}}var gr=null,jf=null,Il=null;function R_(){if(Il)return Il;var t,e=jf,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Il=s.slice(t,1<r?1-r:void 0)}function kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function Ag(){return!1}function zt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ol:Ag,this.isPropagationStopped=Ag,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Df=zt(Ri),Eo=je({},Ri,{view:0,detail:0}),fC=zt(Eo),rd,sd,ca,Hc=je({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ca&&(ca&&t.type==="mousemove"?(rd=t.screenX-ca.screenX,sd=t.screenY-ca.screenY):sd=rd=0,ca=t),rd)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),Rg=zt(Hc),mC=je({},Hc,{dataTransfer:0}),pC=zt(mC),gC=je({},Eo,{relatedTarget:0}),id=zt(gC),vC=je({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),yC=zt(vC),xC=je({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_C=zt(xC),wC=je({},Ri,{data:0}),Pg=zt(wC),EC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SC[t])?!!e[t]:!1}function Of(){return CC}var TC=je({},Eo,{key:function(t){if(t.key){var e=EC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(t){return t.type==="keypress"?kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IC=zt(TC),kC=je({},Hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jg=zt(kC),NC=je({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),AC=zt(NC),RC=je({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),PC=zt(RC),jC=je({},Hc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DC=zt(jC),OC=[9,13,27,32],Mf=zn&&"CompositionEvent"in window,Ca=null;zn&&"documentMode"in document&&(Ca=document.documentMode);var MC=zn&&"TextEvent"in window&&!Ca,P_=zn&&(!Mf||Ca&&8<Ca&&11>=Ca),Dg=" ",Og=!1;function j_(t,e){switch(t){case"keyup":return OC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function LC(t,e){switch(t){case"compositionend":return D_(e);case"keypress":return e.which!==32?null:(Og=!0,Dg);case"textInput":return t=e.data,t===Dg&&Og?null:t;default:return null}}function VC(t,e){if(qs)return t==="compositionend"||!Mf&&j_(t,e)?(t=R_(),Il=jf=gr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P_&&e.locale!=="ko"?null:e.data;default:return null}}var UC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UC[t.type]:e==="textarea"}function O_(t,e,n,r){h_(r),e=tc(e,"onChange"),0<e.length&&(n=new Df("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ta=null,Ka=null;function FC(t){G_(t,0)}function Wc(t){var e=Js(t);if(i_(e))return t}function BC(t,e){if(t==="change")return e}var M_=!1;if(zn){var ad;if(zn){var od="oninput"in document;if(!od){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),od=typeof Lg.oninput=="function"}ad=od}else ad=!1;M_=ad&&(!document.documentMode||9<document.documentMode)}function Vg(){Ta&&(Ta.detachEvent("onpropertychange",L_),Ka=Ta=null)}function L_(t){if(t.propertyName==="value"&&Wc(Ka)){var e=[];O_(e,Ka,t,kf(t)),g_(FC,e)}}function zC(t,e,n){t==="focusin"?(Vg(),Ta=e,Ka=n,Ta.attachEvent("onpropertychange",L_)):t==="focusout"&&Vg()}function $C(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wc(Ka)}function HC(t,e){if(t==="click")return Wc(e)}function WC(t,e){if(t==="input"||t==="change")return Wc(e)}function GC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:GC;function Qa(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hd.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fg(t,e){var n=Ug(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ug(n)}}function V_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U_(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kl(t.document)}return e}function Lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qC(t){var e=U_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&V_(n.ownerDocument.documentElement,n)){if(r!==null&&Lf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Fg(n,i);var a=Fg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KC=zn&&"documentMode"in document&&11>=document.documentMode,Ks=null,ch=null,Ia=null,uh=!1;function Bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uh||Ks==null||Ks!==Kl(r)||(r=Ks,"selectionStart"in r&&Lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&Qa(Ia,r)||(Ia=r,r=tc(ch,"onSelect"),0<r.length&&(e=new Df("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},ld={},F_={};zn&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function Gc(t){if(ld[t])return ld[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in F_)return ld[t]=e[n];return t}var B_=Gc("animationend"),z_=Gc("animationiteration"),$_=Gc("animationstart"),H_=Gc("transitionend"),W_=new Map,zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){W_.set(t,e),bs(e,[t])}for(var cd=0;cd<zg.length;cd++){var ud=zg[cd],QC=ud.toLowerCase(),JC=ud[0].toUpperCase()+ud.slice(1);qr(QC,"on"+JC)}qr(B_,"onAnimationEnd");qr(z_,"onAnimationIteration");qr($_,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(H_,"onTransitionEnd");pi("onMouseEnter",["mouseout","mouseover"]);pi("onMouseLeave",["mouseout","mouseover"]);pi("onPointerEnter",["pointerout","pointerover"]);pi("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ga));function $g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QS(r,e,void 0,t),t.currentTarget=null}function G_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;$g(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;$g(s,l,d),i=u}}}if(Jl)throw t=ih,Jl=!1,ih=null,t}function Ce(t,e){var n=e[ph];n===void 0&&(n=e[ph]=new Set);var r=t+"__bubble";n.has(r)||(q_(e,t,2,!1),n.add(r))}function dd(t,e,n){var r=0;e&&(r|=4),q_(n,t,r,e)}var cl="_reactListening"+Math.random().toString(36).slice(2);function Ja(t){if(!t[cl]){t[cl]=!0,e_.forEach(function(n){n!=="selectionchange"&&(YC.has(n)||dd(n,!1,t),dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cl]||(e[cl]=!0,dd("selectionchange",!1,e))}}function q_(t,e,n,r){switch(A_(e)){case 1:var s=dC;break;case 4:s=hC;break;default:s=Pf}n=s.bind(null,e,n,t),s=void 0,!sh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ss(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}g_(function(){var d=i,f=kf(n),m=[];e:{var g=W_.get(t);if(g!==void 0){var _=Df,E=t;switch(t){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":_=IC;break;case"focusin":E="focus",_=id;break;case"focusout":E="blur",_=id;break;case"beforeblur":case"afterblur":_=id;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=pC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=AC;break;case B_:case z_:case $_:_=yC;break;case H_:_=PC;break;case"scroll":_=fC;break;case"wheel":_=DC;break;case"copy":case"cut":case"paste":_=_C;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=jg}var R=(e&4)!==0,A=!R&&t==="scroll",w=R?g!==null?g+"Capture":null:g;R=[];for(var v=d,S;v!==null;){S=v;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,w!==null&&(N=Ha(v,w),N!=null&&R.push(Ya(v,N,S)))),A)break;v=v.return}0<R.length&&(g=new _(g,E,null,n,f),m.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==nh&&(E=n.relatedTarget||n.fromElement)&&(ss(E)||E[$n]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(E=n.relatedTarget||n.toElement,_=d,E=E?ss(E):null,E!==null&&(A=Ss(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(_=null,E=d),_!==E)){if(R=Rg,N="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=jg,N="onPointerLeave",w="onPointerEnter",v="pointer"),A=_==null?g:Js(_),S=E==null?g:Js(E),g=new R(N,v+"leave",_,n,f),g.target=A,g.relatedTarget=S,N=null,ss(f)===d&&(R=new R(w,v+"enter",E,n,f),R.target=S,R.relatedTarget=A,N=R),A=N,_&&E)t:{for(R=_,w=E,v=0,S=R;S;S=Us(S))v++;for(S=0,N=w;N;N=Us(N))S++;for(;0<v-S;)R=Us(R),v--;for(;0<S-v;)w=Us(w),S--;for(;v--;){if(R===w||w!==null&&R===w.alternate)break t;R=Us(R),w=Us(w)}R=null}else R=null;_!==null&&Hg(m,g,_,R,!1),E!==null&&A!==null&&Hg(m,A,E,R,!0)}}e:{if(g=d?Js(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var B=BC;else if(Mg(g))if(M_)B=WC;else{B=$C;var U=zC}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=HC);if(B&&(B=B(t,d))){O_(m,B,n,f);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Yd(g,"number",g.value)}switch(U=d?Js(d):window,t){case"focusin":(Mg(U)||U.contentEditable==="true")&&(Ks=U,ch=d,Ia=null);break;case"focusout":Ia=ch=Ks=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,Bg(m,n,f);break;case"selectionchange":if(KC)break;case"keydown":case"keyup":Bg(m,n,f)}var T;if(Mf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qs?j_(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(P_&&n.locale!=="ko"&&(qs||x!=="onCompositionStart"?x==="onCompositionEnd"&&qs&&(T=R_()):(gr=f,jf="value"in gr?gr.value:gr.textContent,qs=!0)),U=tc(d,x),0<U.length&&(x=new Pg(x,t,null,n,f),m.push({event:x,listeners:U}),T?x.data=T:(T=D_(n),T!==null&&(x.data=T)))),(T=MC?LC(t,n):VC(t,n))&&(d=tc(d,"onBeforeInput"),0<d.length&&(f=new Pg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=T))}G_(m,e)})}function Ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ha(t,n),i!=null&&r.unshift(Ya(t,i,s)),i=Ha(t,e),i!=null&&r.push(Ya(t,i,s))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Ha(n,i),u!=null&&a.unshift(Ya(n,u,l))):s||(u=Ha(n,i),u!=null&&a.push(Ya(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var XC=/\r\n?/g,ZC=/\u0000|\uFFFD/g;function Wg(t){return(typeof t=="string"?t:""+t).replace(XC,`
`).replace(ZC,"")}function ul(t,e,n){if(e=Wg(e),Wg(t)!==e&&n)throw Error($(425))}function nc(){}var dh=null,hh=null;function fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mh=typeof setTimeout=="function"?setTimeout:void 0,eT=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,tT=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(nT)}:mh;function nT(t){setTimeout(function(){throw t})}function fd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),qa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qa(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),vn="__reactFiber$"+Pi,Xa="__reactProps$"+Pi,$n="__reactContainer$"+Pi,ph="__reactEvents$"+Pi,rT="__reactListeners$"+Pi,sT="__reactHandles$"+Pi;function ss(t){var e=t[vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qg(t);t!==null;){if(n=t[vn])return n;t=qg(t)}return e}t=n,n=t.parentNode}return null}function bo(t){return t=t[vn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function qc(t){return t[Xa]||null}var gh=[],Ys=-1;function Kr(t){return{current:t}}function Ie(t){0>Ys||(t.current=gh[Ys],gh[Ys]=null,Ys--)}function be(t,e){Ys++,gh[Ys]=t.current,t.current=e}var Mr={},mt=Kr(Mr),At=Kr(!1),hs=Mr;function gi(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function rc(){Ie(At),Ie(mt)}function Kg(t,e,n){if(mt.current!==Mr)throw Error($(168));be(mt,e),be(At,n)}function K_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,zS(t)||"Unknown",s));return je({},n,r)}function sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,hs=mt.current,be(mt,t),be(At,At.current),!0}function Qg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=K_(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,Ie(At),Ie(mt),be(mt,t)):Ie(At),be(At,n)}var Dn=null,Kc=!1,md=!1;function Q_(t){Dn===null?Dn=[t]:Dn.push(t)}function iT(t){Kc=!0,Q_(t)}function Qr(){if(!md&&Dn!==null){md=!0;var t=0,e=we;try{var n=Dn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,Kc=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(t+1)),__(Nf,Qr),s}finally{we=e,md=!1}}return null}var Xs=[],Zs=0,ic=null,ac=0,Ht=[],Wt=0,fs=null,Mn=1,Ln="";function ts(t,e){Xs[Zs++]=ac,Xs[Zs++]=ic,ic=t,ac=e}function J_(t,e,n){Ht[Wt++]=Mn,Ht[Wt++]=Ln,Ht[Wt++]=fs,fs=t;var r=Mn;t=Ln;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Mn=1<<32-ln(e)+s|n<<s|r,Ln=i+t}else Mn=1<<i|n<<s|r,Ln=t}function Vf(t){t.return!==null&&(ts(t,1),J_(t,1,0))}function Uf(t){for(;t===ic;)ic=Xs[--Zs],Xs[Zs]=null,ac=Xs[--Zs],Xs[Zs]=null;for(;t===fs;)fs=Ht[--Wt],Ht[Wt]=null,Ln=Ht[--Wt],Ht[Wt]=null,Mn=Ht[--Wt],Ht[Wt]=null}var Vt=null,Lt=null,ke=!1,sn=null;function Y_(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Lt=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Mn,overflow:Ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Lt=null,!0):!1;default:return!1}}function vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yh(t){if(ke){var e=Lt;if(e){var n=e;if(!Jg(t,e)){if(vh(t))throw Error($(418));e=Sr(n.nextSibling);var r=Vt;e&&Jg(t,e)?Y_(r,n):(t.flags=t.flags&-4097|2,ke=!1,Vt=t)}}else{if(vh(t))throw Error($(418));t.flags=t.flags&-4097|2,ke=!1,Vt=t}}}function Yg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function dl(t){if(t!==Vt)return!1;if(!ke)return Yg(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fh(t.type,t.memoizedProps)),e&&(e=Lt)){if(vh(t))throw X_(),Error($(418));for(;e;)Y_(t,e),e=Sr(e.nextSibling)}if(Yg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Vt?Sr(t.stateNode.nextSibling):null;return!0}function X_(){for(var t=Lt;t;)t=Sr(t.nextSibling)}function vi(){Lt=Vt=null,ke=!1}function Ff(t){sn===null?sn=[t]:sn.push(t)}var aT=Yn.ReactCurrentBatchConfig;function ua(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function hl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xg(t){var e=t._init;return e(t._payload)}function Z_(t){function e(w,v){if(t){var S=w.deletions;S===null?(w.deletions=[v],w.flags|=16):S.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=kr(w,v),w.index=0,w.sibling=null,w}function i(w,v,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<v?(w.flags|=2,v):S):(w.flags|=2,v)):(w.flags|=1048576,v)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,S,N){return v===null||v.tag!==6?(v=wd(S,w.mode,N),v.return=w,v):(v=s(v,S),v.return=w,v)}function u(w,v,S,N){var B=S.type;return B===Gs?f(w,v,S.props.children,N,S.key):v!==null&&(v.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===lr&&Xg(B)===v.type)?(N=s(v,S.props),N.ref=ua(w,v,S),N.return=w,N):(N=Ol(S.type,S.key,S.props,null,w.mode,N),N.ref=ua(w,v,S),N.return=w,N)}function d(w,v,S,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Ed(S,w.mode,N),v.return=w,v):(v=s(v,S.children||[]),v.return=w,v)}function f(w,v,S,N,B){return v===null||v.tag!==7?(v=us(S,w.mode,N,B),v.return=w,v):(v=s(v,S),v.return=w,v)}function m(w,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wd(""+v,w.mode,S),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case tl:return S=Ol(v.type,v.key,v.props,null,w.mode,S),S.ref=ua(w,null,v),S.return=w,S;case Ws:return v=Ed(v,w.mode,S),v.return=w,v;case lr:var N=v._init;return m(w,N(v._payload),S)}if(ma(v)||ia(v))return v=us(v,w.mode,S,null),v.return=w,v;hl(w,v)}return null}function g(w,v,S,N){var B=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return B!==null?null:l(w,v,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:return S.key===B?u(w,v,S,N):null;case Ws:return S.key===B?d(w,v,S,N):null;case lr:return B=S._init,g(w,v,B(S._payload),N)}if(ma(S)||ia(S))return B!==null?null:f(w,v,S,N,null);hl(w,S)}return null}function _(w,v,S,N,B){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(S)||null,l(v,w,""+N,B);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tl:return w=w.get(N.key===null?S:N.key)||null,u(v,w,N,B);case Ws:return w=w.get(N.key===null?S:N.key)||null,d(v,w,N,B);case lr:var U=N._init;return _(w,v,S,U(N._payload),B)}if(ma(N)||ia(N))return w=w.get(S)||null,f(v,w,N,B,null);hl(v,N)}return null}function E(w,v,S,N){for(var B=null,U=null,T=v,x=v=0,I=null;T!==null&&x<S.length;x++){T.index>x?(I=T,T=null):I=T.sibling;var k=g(w,T,S[x],N);if(k===null){T===null&&(T=I);break}t&&T&&k.alternate===null&&e(w,T),v=i(k,v,x),U===null?B=k:U.sibling=k,U=k,T=I}if(x===S.length)return n(w,T),ke&&ts(w,x),B;if(T===null){for(;x<S.length;x++)T=m(w,S[x],N),T!==null&&(v=i(T,v,x),U===null?B=T:U.sibling=T,U=T);return ke&&ts(w,x),B}for(T=r(w,T);x<S.length;x++)I=_(T,w,x,S[x],N),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?x:I.key),v=i(I,v,x),U===null?B=I:U.sibling=I,U=I);return t&&T.forEach(function(P){return e(w,P)}),ke&&ts(w,x),B}function R(w,v,S,N){var B=ia(S);if(typeof B!="function")throw Error($(150));if(S=B.call(S),S==null)throw Error($(151));for(var U=B=null,T=v,x=v=0,I=null,k=S.next();T!==null&&!k.done;x++,k=S.next()){T.index>x?(I=T,T=null):I=T.sibling;var P=g(w,T,k.value,N);if(P===null){T===null&&(T=I);break}t&&T&&P.alternate===null&&e(w,T),v=i(P,v,x),U===null?B=P:U.sibling=P,U=P,T=I}if(k.done)return n(w,T),ke&&ts(w,x),B;if(T===null){for(;!k.done;x++,k=S.next())k=m(w,k.value,N),k!==null&&(v=i(k,v,x),U===null?B=k:U.sibling=k,U=k);return ke&&ts(w,x),B}for(T=r(w,T);!k.done;x++,k=S.next())k=_(T,w,x,k.value,N),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?x:k.key),v=i(k,v,x),U===null?B=k:U.sibling=k,U=k);return t&&T.forEach(function(j){return e(w,j)}),ke&&ts(w,x),B}function A(w,v,S,N){if(typeof S=="object"&&S!==null&&S.type===Gs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:e:{for(var B=S.key,U=v;U!==null;){if(U.key===B){if(B=S.type,B===Gs){if(U.tag===7){n(w,U.sibling),v=s(U,S.props.children),v.return=w,w=v;break e}}else if(U.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===lr&&Xg(B)===U.type){n(w,U.sibling),v=s(U,S.props),v.ref=ua(w,U,S),v.return=w,w=v;break e}n(w,U);break}else e(w,U);U=U.sibling}S.type===Gs?(v=us(S.props.children,w.mode,N,S.key),v.return=w,w=v):(N=Ol(S.type,S.key,S.props,null,w.mode,N),N.ref=ua(w,v,S),N.return=w,w=N)}return a(w);case Ws:e:{for(U=S.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(w,v.sibling),v=s(v,S.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Ed(S,w.mode,N),v.return=w,w=v}return a(w);case lr:return U=S._init,A(w,v,U(S._payload),N)}if(ma(S))return E(w,v,S,N);if(ia(S))return R(w,v,S,N);hl(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,S),v.return=w,w=v):(n(w,v),v=wd(S,w.mode,N),v.return=w,w=v),a(w)):n(w,v)}return A}var yi=Z_(!0),ew=Z_(!1),oc=Kr(null),lc=null,ei=null,Bf=null;function zf(){Bf=ei=lc=null}function $f(t){var e=oc.current;Ie(oc),t._currentValue=e}function xh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oi(t,e){lc=t,Bf=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Bf!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(lc===null)throw Error($(308));ei=t,lc.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var is=null;function Hf(t){is===null?is=[t]:is.push(t)}function tw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function Nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function Zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cc(t,e,n,r){var s=t.updateQueue;cr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=d=u=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var E=t,R=l;switch(g=e,_=n,R.tag){case 1:if(E=R.payload,typeof E=="function"){m=E.call(_,m,g);break e}m=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=R.payload,g=typeof E=="function"?E.call(_,m,g):E,g==null)break e;m=je({},m,g);break e;case 2:cr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=_,u=m):f=f.next=_,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ps|=a,t.lanes=a,t.memoizedState=m}}function ev(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var So={},xn=Kr(So),Za=Kr(So),eo=Kr(So);function as(t){if(t===So)throw Error($(174));return t}function Gf(t,e){switch(be(eo,e),be(Za,t),be(xn,So),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zd(e,t)}Ie(xn),be(xn,e)}function xi(){Ie(xn),Ie(Za),Ie(eo)}function rw(t){as(eo.current);var e=as(xn.current),n=Zd(e,t.type);e!==n&&(be(Za,t),be(xn,n))}function qf(t){Za.current===t&&(Ie(xn),Ie(Za))}var Ne=Kr(0);function uc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pd=[];function Kf(){for(var t=0;t<pd.length;t++)pd[t]._workInProgressVersionPrimary=null;pd.length=0}var Al=Yn.ReactCurrentDispatcher,gd=Yn.ReactCurrentBatchConfig,ms=0,Re=null,$e=null,Ke=null,dc=!1,ka=!1,to=0,oT=0;function lt(){throw Error($(321))}function Qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function Jf(t,e,n,r,s,i){if(ms=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Al.current=t===null||t.memoizedState===null?dT:hT,t=n(r,s),ka){i=0;do{if(ka=!1,to=0,25<=i)throw Error($(301));i+=1,Ke=$e=null,e.updateQueue=null,Al.current=fT,t=n(r,s)}while(ka)}if(Al.current=hc,e=$e!==null&&$e.next!==null,ms=0,Ke=$e=Re=null,dc=!1,e)throw Error($(300));return t}function Yf(){var t=to!==0;return to=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Re.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Xt(){if($e===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?Re.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error($(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?Re.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function no(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=Xt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var f=d.lane;if((ms&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Re.lanes|=f,ps|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,dn(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yd(t){var e=Xt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);dn(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function sw(){}function iw(t,e){var n=Re,r=Xt(),s=e(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Nt=!0),r=r.queue,Xf(lw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,ro(9,ow.bind(null,n,r,s,e),void 0,null),Je===null)throw Error($(349));ms&30||aw(n,e,s)}return s}function aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ow(t,e,n,r){e.value=n,e.getSnapshot=r,cw(e)&&uw(t)}function lw(t,e,n){return n(function(){cw(e)&&uw(t)})}function cw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function uw(t){var e=Hn(t,1);e!==null&&cn(e,t,1,-1)}function tv(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=uT.bind(null,Re,t),[e.memoizedState,t]}function ro(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dw(){return Xt().memoizedState}function Rl(t,e,n,r){var s=pn();Re.flags|=t,s.memoizedState=ro(1|e,n,void 0,r===void 0?null:r)}function Qc(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if($e!==null){var a=$e.memoizedState;if(i=a.destroy,r!==null&&Qf(r,a.deps)){s.memoizedState=ro(e,n,i,r);return}}Re.flags|=t,s.memoizedState=ro(1|e,n,i,r)}function nv(t,e){return Rl(8390656,8,t,e)}function Xf(t,e){return Qc(2048,8,t,e)}function hw(t,e){return Qc(4,2,t,e)}function fw(t,e){return Qc(4,4,t,e)}function mw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pw(t,e,n){return n=n!=null?n.concat([t]):null,Qc(4,4,mw.bind(null,e,t),n)}function Zf(){}function gw(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vw(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yw(t,e,n){return ms&21?(dn(n,e)||(n=b_(),Re.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function lT(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=gd.transition;gd.transition={};try{t(!1),e()}finally{we=n,gd.transition=r}}function xw(){return Xt().memoizedState}function cT(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_w(t))ww(e,n);else if(n=tw(t,e,n,r),n!==null){var s=_t();cn(n,t,r,s),Ew(n,e,r)}}function uT(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_w(t))ww(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,dn(l,a)){var u=e.interleaved;u===null?(s.next=s,Hf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=tw(t,e,s,r),n!==null&&(s=_t(),cn(n,t,r,s),Ew(n,e,r))}}function _w(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function ww(t,e){ka=dc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ew(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var hc={readContext:Yt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},dT={readContext:Yt,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:nv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rl(4194308,4,mw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rl(4,2,t,e)},useMemo:function(t,e){var n=pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cT.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:tv,useDebugValue:Zf,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=tv(!1),e=t[0];return t=lT.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=pn();if(ke){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Je===null)throw Error($(349));ms&30||aw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,nv(lw.bind(null,r,i,t),[t]),r.flags|=2048,ro(9,ow.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pn(),e=Je.identifierPrefix;if(ke){var n=Ln,r=Mn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hT={readContext:Yt,useCallback:gw,useContext:Yt,useEffect:Xf,useImperativeHandle:pw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:vw,useReducer:vd,useRef:dw,useState:function(){return vd(no)},useDebugValue:Zf,useDeferredValue:function(t){var e=Xt();return yw(e,$e.memoizedState,t)},useTransition:function(){var t=vd(no)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:sw,useSyncExternalStore:iw,useId:xw,unstable_isNewReconciler:!1},fT={readContext:Yt,useCallback:gw,useContext:Yt,useEffect:Xf,useImperativeHandle:pw,useInsertionEffect:hw,useLayoutEffect:fw,useMemo:vw,useReducer:yd,useRef:dw,useState:function(){return yd(no)},useDebugValue:Zf,useDeferredValue:function(t){var e=Xt();return $e===null?e.memoizedState=t:yw(e,$e.memoizedState,t)},useTransition:function(){var t=yd(no)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:sw,useSyncExternalStore:iw,useId:xw,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jc={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Ir(t),i=Fn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(cn(e,t,s,r),Nl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Ir(t),i=Fn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(cn(e,t,s,r),Nl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Ir(t),s=Fn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(cn(e,t,r,n),Nl(e,t,r))}};function rv(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Qa(n,r)||!Qa(s,i):!0}function bw(t,e,n){var r=!1,s=Mr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=Rt(e)?hs:mt.current,r=e.contextTypes,i=(r=r!=null)?gi(t,s):Mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function sv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jc.enqueueReplaceState(e,e.state,null)}function wh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=Rt(e)?hs:mt.current,s.context=gi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_h(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jc.enqueueReplaceState(s,s.state,null),cc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _i(t,e){try{var n="",r=e;do n+=BS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function xd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Eh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mT=typeof WeakMap=="function"?WeakMap:Map;function Sw(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mc||(mc=!0,Ph=r),Eh(t,e)},n}function Cw(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Eh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Eh(t,e),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function iv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kT.bind(null,t,e,n),e.then(t,t))}function av(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ov(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var pT=Yn.ReactCurrentOwner,Nt=!1;function xt(t,e,n,r){e.child=t===null?ew(e,null,n,r):yi(e,t.child,n,r)}function lv(t,e,n,r,s){n=n.render;var i=e.ref;return oi(e,s),r=Jf(t,e,n,r,i,s),n=Yf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(ke&&n&&Vf(e),e.flags|=1,xt(t,e,r,s),e.child)}function cv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!om(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Tw(t,e,i,r,s)):(t=Ol(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qa,n(a,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=kr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Tw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qa(i,r)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return bh(t,e,n,r,s)}function Iw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ni,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(ni,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(ni,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(ni,Mt),Mt|=r;return xt(t,e,s,n),e.child}function kw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bh(t,e,n,r,s){var i=Rt(n)?hs:mt.current;return i=gi(e,i),oi(e,s),n=Jf(t,e,n,r,i,s),r=Yf(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(ke&&r&&Vf(e),e.flags|=1,xt(t,e,n,s),e.child)}function uv(t,e,n,r,s){if(Rt(n)){var i=!0;sc(e)}else i=!1;if(oi(e,s),e.stateNode===null)Pl(t,e),bw(e,n,r),wh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=Rt(n)?hs:mt.current,d=gi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&sv(e,a,r,d),cr=!1;var g=e.memoizedState;a.state=g,cc(e,r,a,s),u=e.memoizedState,l!==r||g!==u||At.current||cr?(typeof f=="function"&&(_h(e,n,f,r),u=e.memoizedState),(l=cr||rv(e,n,l,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,nw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:nn(e.type,l),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=Rt(n)?hs:mt.current,u=gi(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||g!==u)&&sv(e,a,r,u),cr=!1,g=e.memoizedState,a.state=g,cc(e,r,a,s);var E=e.memoizedState;l!==m||g!==E||At.current||cr?(typeof _=="function"&&(_h(e,n,_,r),E=e.memoizedState),(d=cr||rv(e,n,d,r,g,E,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,E,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,E,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),a.props=r,a.state=E,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Sh(t,e,n,r,i,s)}function Sh(t,e,n,r,s,i){kw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Qg(e,n,!1),Wn(t,e,i);r=e.stateNode,pT.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=yi(e,t.child,null,i),e.child=yi(e,null,l,i)):xt(t,e,l,i),e.memoizedState=r.state,s&&Qg(e,n,!0),e.child}function Nw(t){var e=t.stateNode;e.pendingContext?Kg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kg(t,e.context,!1),Gf(t,e.containerInfo)}function dv(t,e,n,r,s){return vi(),Ff(s),e.flags|=256,xt(t,e,n,r),e.child}var Ch={dehydrated:null,treeContext:null,retryLane:0};function Th(t){return{baseLanes:t,cachePool:null,transitions:null}}function Aw(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Ne,s&1),t===null)return yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Zc(a,r,0,null),t=us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Th(n),e.memoizedState=Ch,t):em(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gT(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=kr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=kr(l,i):(i=us(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Th(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ch,r}return i=t.child,t=i.sibling,r=kr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function em(t,e){return e=Zc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fl(t,e,n,r){return r!==null&&Ff(r),yi(e,t.child,null,n),t=em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gT(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=xd(Error($(422))),fl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zc({mode:"visible",children:r.children},s,0,null),i=us(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&yi(e,t.child,null,a),e.child.memoizedState=Th(a),e.memoizedState=Ch,i);if(!(e.mode&1))return fl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=xd(i,r,void 0),fl(t,e,a,r)}if(l=(a&t.childLanes)!==0,Nt||l){if(r=Je,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),cn(r,t,s,-1))}return am(),r=xd(Error($(421))),fl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=NT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=Sr(s.nextSibling),Vt=e,ke=!0,sn=null,t!==null&&(Ht[Wt++]=Mn,Ht[Wt++]=Ln,Ht[Wt++]=fs,Mn=t.id,Ln=t.overflow,fs=e),e=em(e,r.children),e.flags|=4096,e)}function hv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xh(t.return,e,n)}function _d(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Rw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hv(t,n,e);else if(t.tag===19)hv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&uc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_d(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&uc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_d(e,!0,n,null,i);break;case"together":_d(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vT(t,e,n){switch(e.tag){case 3:Nw(e),vi();break;case 5:rw(e);break;case 1:Rt(e.type)&&sc(e);break;case 4:Gf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(oc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Aw(t,e,n):(be(Ne,Ne.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);be(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Rw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Iw(t,e,n)}return Wn(t,e,n)}var Pw,Ih,jw,Dw;Pw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ih=function(){};jw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,as(xn.current);var i=null;switch(n){case"input":s=Qd(t,s),r=Qd(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Xd(t,s),r=Xd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nc)}eh(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(za.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(za.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ce("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Dw=function(t,e,n,r){n!==r&&(e.flags|=4)};function da(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yT(t,e,n){var r=e.pendingProps;switch(Uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Rt(e.type)&&rc(),ct(e),null;case 3:return r=e.stateNode,xi(),Ie(At),Ie(mt),Kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Oh(sn),sn=null))),Ih(t,e),ct(e),null;case 5:qf(e);var s=as(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)jw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ct(e),null}if(t=as(xn.current),dl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vn]=e,r[Xa]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<ga.length;s++)Ce(ga[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":wg(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":bg(r,i),Ce("invalid",r)}eh(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ul(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ul(r.textContent,l,t),s=["children",""+l]):za.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":nl(r),Eg(r,i,!0);break;case"textarea":nl(r),Sg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[vn]=e,t[Xa]=r,Pw(t,e,!1,!1),e.stateNode=t;e:{switch(a=th(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<ga.length;s++)Ce(ga[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":wg(t,r),s=Qd(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":bg(t,r),s=Xd(t,r),Ce("invalid",t);break;default:s=r}eh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?d_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&c_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&$a(t,u):typeof u=="number"&&$a(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(za.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ce("scroll",t):u!=null&&Sf(t,i,u,a))}switch(n){case"input":nl(t),Eg(t,r,!1);break;case"textarea":nl(t),Sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ri(t,!!r.multiple,i,!1):r.defaultValue!=null&&ri(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)Dw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=as(eo.current),as(xn.current),dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[vn]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vn]=e,e.stateNode=r}return ct(e),null;case 13:if(Ie(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Lt!==null&&e.mode&1&&!(e.flags&128))X_(),vi(),e.flags|=98560,i=!1;else if(i=dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[vn]=e}else vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),i=!1}else sn!==null&&(Oh(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?We===0&&(We=3):am())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return xi(),Ih(t,e),t===null&&Ja(e.stateNode.containerInfo),ct(e),null;case 10:return $f(e.type._context),ct(e),null;case 17:return Rt(e.type)&&rc(),ct(e),null;case 19:if(Ie(Ne),i=e.memoizedState,i===null)return ct(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)da(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=uc(t),a!==null){for(e.flags|=128,da(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>wi&&(e.flags|=128,r=!0,da(i,!1),e.lanes=4194304)}else{if(!r)if(t=uc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),da(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ke)return ct(e),null}else 2*Ve()-i.renderingStartTime>wi&&n!==1073741824&&(e.flags|=128,r=!0,da(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ne.current,be(Ne,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return im(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function xT(t,e){switch(Uf(e),e.tag){case 1:return Rt(e.type)&&rc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(),Ie(At),Ie(mt),Kf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qf(e),null;case 13:if(Ie(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ne),null;case 4:return xi(),null;case 10:return $f(e.type._context),null;case 22:case 23:return im(),null;case 24:return null;default:return null}}var ml=!1,ht=!1,_T=typeof WeakSet=="function"?WeakSet:Set,J=null;function ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function kh(t,e,n){try{n()}catch(r){Me(t,e,r)}}var fv=!1;function wT(t,e){if(dh=Zl,t=U_(),Lf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=a),g===i&&++f===r&&(u=a),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hh={focusedElem:t,selectionRange:n},Zl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var R=E.memoizedProps,A=E.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:nn(e.type,R),A);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(N){Me(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return E=fv,fv=!1,E}function Na(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&kh(e,n,i)}s=s.next}while(s!==r)}}function Yc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ow(t){var e=t.alternate;e!==null&&(t.alternate=null,Ow(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vn],delete e[Xa],delete e[ph],delete e[rT],delete e[sT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Mw(t){return t.tag===5||t.tag===3||t.tag===4}function mv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Mw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nc));else if(r!==4&&(t=t.child,t!==null))for(Ah(t,e,n),t=t.sibling;t!==null;)Ah(t,e,n),t=t.sibling}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}var Ze=null,rn=!1;function ar(t,e,n){for(n=n.child;n!==null;)Lw(t,e,n),n=n.sibling}function Lw(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount($c,n)}catch{}switch(n.tag){case 5:ht||ti(n,e);case 6:var r=Ze,s=rn;Ze=null,ar(t,e,n),Ze=r,rn=s,Ze!==null&&(rn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(rn?(t=Ze,n=n.stateNode,t.nodeType===8?fd(t.parentNode,n):t.nodeType===1&&fd(t,n),qa(t)):fd(Ze,n.stateNode));break;case 4:r=Ze,s=rn,Ze=n.stateNode.containerInfo,rn=!0,ar(t,e,n),Ze=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&kh(n,e,a),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!ht&&(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,ar(t,e,n),ht=r):ar(t,e,n);break;default:ar(t,e,n)}}function pv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _T),e.forEach(function(r){var s=AT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,rn=!1;break e;case 3:Ze=l.stateNode.containerInfo,rn=!0;break e;case 4:Ze=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Ze===null)throw Error($(160));Lw(i,a,s),Ze=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vw(e,t),e=e.sibling}function Vw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),mn(t),r&4){try{Na(3,t,t.return),Yc(3,t)}catch(R){Me(t,t.return,R)}try{Na(5,t,t.return)}catch(R){Me(t,t.return,R)}}break;case 1:tn(e,t),mn(t),r&512&&n!==null&&ti(n,n.return);break;case 5:if(tn(e,t),mn(t),r&512&&n!==null&&ti(n,n.return),t.flags&32){var s=t.stateNode;try{$a(s,"")}catch(R){Me(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&a_(s,i),th(l,a);var d=th(l,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?d_(s,m):f==="dangerouslySetInnerHTML"?c_(s,m):f==="children"?$a(s,m):Sf(s,f,m,d)}switch(l){case"input":Jd(s,i);break;case"textarea":o_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?ri(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?ri(s,!!i.multiple,i.defaultValue,!0):ri(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xa]=i}catch(R){Me(t,t.return,R)}}break;case 6:if(tn(e,t),mn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Me(t,t.return,R)}}break;case 3:if(tn(e,t),mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qa(e.containerInfo)}catch(R){Me(t,t.return,R)}break;case 4:tn(e,t),mn(t);break;case 13:tn(e,t),mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rm=Ve())),r&4&&pv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,tn(e,t),ht=d):tn(e,t),mn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(m=J=f;J!==null;){switch(g=J,_=g.child,g.tag){case 0:case 11:case 14:case 15:Na(4,g,g.return);break;case 1:ti(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(R){Me(r,n,R)}}break;case 5:ti(g,g.return);break;case 22:if(g.memoizedState!==null){vv(m);continue}}_!==null?(_.return=g,J=_):vv(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=u_("display",a))}catch(R){Me(t,t.return,R)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){Me(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:tn(e,t),mn(t),r&4&&pv(t);break;case 21:break;default:tn(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Mw(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&($a(s,""),r.flags&=-33);var i=mv(t);Rh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=mv(t);Ah(t,l,a);break;default:throw Error($(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ET(t,e,n){J=t,Uw(t)}function Uw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ml;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ht;l=ml;var d=ht;if(ml=a,(ht=u)&&!d)for(J=s;J!==null;)a=J,u=a.child,a.tag===22&&a.memoizedState!==null?yv(s):u!==null?(u.return=a,J=u):yv(s);for(;i!==null;)J=i,Uw(i),i=i.sibling;J=s,ml=l,ht=d}gv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):gv(t)}}function gv(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Yc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ev(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ev(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&qa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ht||e.flags&512&&Nh(e)}catch(g){Me(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function vv(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function yv(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yc(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{Nh(e)}catch(u){Me(e,i,u)}break;case 5:var a=e.return;try{Nh(e)}catch(u){Me(e,a,u)}}}catch(u){Me(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var bT=Math.ceil,fc=Yn.ReactCurrentDispatcher,tm=Yn.ReactCurrentOwner,Qt=Yn.ReactCurrentBatchConfig,pe=0,Je=null,Fe=null,nt=0,Mt=0,ni=Kr(0),We=0,so=null,ps=0,Xc=0,nm=0,Aa=null,It=null,rm=0,wi=1/0,jn=null,mc=!1,Ph=null,Tr=null,pl=!1,vr=null,pc=0,Ra=0,jh=null,jl=-1,Dl=0;function _t(){return pe&6?Ve():jl!==-1?jl:jl=Ve()}function Ir(t){return t.mode&1?pe&2&&nt!==0?nt&-nt:aT.transition!==null?(Dl===0&&(Dl=b_()),Dl):(t=we,t!==0||(t=window.event,t=t===void 0?16:A_(t.type)),t):1}function cn(t,e,n,r){if(50<Ra)throw Ra=0,jh=null,Error($(185));wo(t,n,r),(!(pe&2)||t!==Je)&&(t===Je&&(!(pe&2)&&(Xc|=n),We===4&&hr(t,nt)),Pt(t,r),n===1&&pe===0&&!(e.mode&1)&&(wi=Ve()+500,Kc&&Qr()))}function Pt(t,e){var n=t.callbackNode;aC(t,e);var r=Xl(t,t===Je?nt:0);if(r===0)n!==null&&Ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ig(n),e===1)t.tag===0?iT(xv.bind(null,t)):Q_(xv.bind(null,t)),tT(function(){!(pe&6)&&Qr()}),n=null;else{switch(S_(r)){case 1:n=Nf;break;case 4:n=w_;break;case 16:n=Yl;break;case 536870912:n=E_;break;default:n=Yl}n=qw(n,Fw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Fw(t,e){if(jl=-1,Dl=0,pe&6)throw Error($(327));var n=t.callbackNode;if(li()&&t.callbackNode!==n)return null;var r=Xl(t,t===Je?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gc(t,r);else{e=r;var s=pe;pe|=2;var i=zw();(Je!==t||nt!==e)&&(jn=null,wi=Ve()+500,cs(t,e));do try{TT();break}catch(l){Bw(t,l)}while(!0);zf(),fc.current=i,pe=s,Fe!==null?e=0:(Je=null,nt=0,e=We)}if(e!==0){if(e===2&&(s=ah(t),s!==0&&(r=s,e=Dh(t,s))),e===1)throw n=so,cs(t,0),hr(t,r),Pt(t,Ve()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ST(s)&&(e=gc(t,r),e===2&&(i=ah(t),i!==0&&(r=i,e=Dh(t,i))),e===1))throw n=so,cs(t,0),hr(t,r),Pt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ns(t,It,jn);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=rm+500-Ve(),10<e)){if(Xl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mh(ns.bind(null,t,It,jn),e);break}ns(t,It,jn);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ln(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bT(r/1960))-r,10<r){t.timeoutHandle=mh(ns.bind(null,t,It,jn),r);break}ns(t,It,jn);break;case 5:ns(t,It,jn);break;default:throw Error($(329))}}}return Pt(t,Ve()),t.callbackNode===n?Fw.bind(null,t):null}function Dh(t,e){var n=Aa;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=gc(t,e),t!==2&&(e=It,It=n,e!==null&&Oh(e)),t}function Oh(t){It===null?It=t:It.push.apply(It,t)}function ST(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~nm,e&=~Xc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function xv(t){if(pe&6)throw Error($(327));li();var e=Xl(t,0);if(!(e&1))return Pt(t,Ve()),null;var n=gc(t,e);if(t.tag!==0&&n===2){var r=ah(t);r!==0&&(e=r,n=Dh(t,r))}if(n===1)throw n=so,cs(t,0),hr(t,e),Pt(t,Ve()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ns(t,It,jn),Pt(t,Ve()),null}function sm(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(wi=Ve()+500,Kc&&Qr())}}function gs(t){vr!==null&&vr.tag===0&&!(pe&6)&&li();var e=pe;pe|=1;var n=Qt.transition,r=we;try{if(Qt.transition=null,we=1,t)return t()}finally{we=r,Qt.transition=n,pe=e,!(pe&6)&&Qr()}}function im(){Mt=ni.current,Ie(ni)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eT(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rc();break;case 3:xi(),Ie(At),Ie(mt),Kf();break;case 5:qf(r);break;case 4:xi();break;case 13:Ie(Ne);break;case 19:Ie(Ne);break;case 10:$f(r.type._context);break;case 22:case 23:im()}n=n.return}if(Je=t,Fe=t=kr(t.current,null),nt=Mt=e,We=0,so=null,nm=Xc=ps=0,It=Aa=null,is!==null){for(e=0;e<is.length;e++)if(n=is[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}is=null}return t}function Bw(t,e){do{var n=Fe;try{if(zf(),Al.current=hc,dc){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dc=!1}if(ms=0,Ke=$e=Re=null,ka=!1,to=0,tm.current=null,n===null||n.return===null){We=1,so=e,Fe=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=av(a);if(_!==null){_.flags&=-257,ov(_,a,l,i,e),_.mode&1&&iv(i,d,e),e=_,u=d;var E=e.updateQueue;if(E===null){var R=new Set;R.add(u),e.updateQueue=R}else E.add(u);break e}else{if(!(e&1)){iv(i,d,e),am();break e}u=Error($(426))}}else if(ke&&l.mode&1){var A=av(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),ov(A,a,l,i,e),Ff(_i(u,l));break e}}i=u=_i(u,l),We!==4&&(We=2),Aa===null?Aa=[i]:Aa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Sw(i,u,e);Zg(i,w);break e;case 1:l=u;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Tr===null||!Tr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Cw(i,l,e);Zg(i,N);break e}}i=i.return}while(i!==null)}Hw(n)}catch(B){e=B,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function zw(){var t=fc.current;return fc.current=hc,t===null?hc:t}function am(){(We===0||We===3||We===2)&&(We=4),Je===null||!(ps&268435455)&&!(Xc&268435455)||hr(Je,nt)}function gc(t,e){var n=pe;pe|=2;var r=zw();(Je!==t||nt!==e)&&(jn=null,cs(t,e));do try{CT();break}catch(s){Bw(t,s)}while(!0);if(zf(),pe=n,fc.current=r,Fe!==null)throw Error($(261));return Je=null,nt=0,We}function CT(){for(;Fe!==null;)$w(Fe)}function TT(){for(;Fe!==null&&!YS();)$w(Fe)}function $w(t){var e=Gw(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Hw(t):Fe=e,tm.current=null}function Hw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xT(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Fe=null;return}}else if(n=yT(n,e,Mt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);We===0&&(We=5)}function ns(t,e,n){var r=we,s=Qt.transition;try{Qt.transition=null,we=1,IT(t,e,n,r)}finally{Qt.transition=s,we=r}return null}function IT(t,e,n,r){do li();while(vr!==null);if(pe&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(oC(t,i),t===Je&&(Fe=Je=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pl||(pl=!0,qw(Yl,function(){return li(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var a=we;we=1;var l=pe;pe|=4,tm.current=null,wT(t,n),Vw(n,t),qC(hh),Zl=!!dh,hh=dh=null,t.current=n,ET(n),XS(),pe=l,we=a,Qt.transition=i}else t.current=n;if(pl&&(pl=!1,vr=t,pc=s),i=t.pendingLanes,i===0&&(Tr=null),tC(n.stateNode),Pt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mc)throw mc=!1,t=Ph,Ph=null,t;return pc&1&&t.tag!==0&&li(),i=t.pendingLanes,i&1?t===jh?Ra++:(Ra=0,jh=t):Ra=0,Qr(),null}function li(){if(vr!==null){var t=S_(pc),e=Qt.transition,n=we;try{if(Qt.transition=null,we=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,pc=0,pe&6)throw Error($(331));var s=pe;for(pe|=4,J=t.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(J=d;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:Na(8,f,i)}var m=f.child;if(m!==null)m.return=f,J=m;else for(;J!==null;){f=J;var g=f.sibling,_=f.return;if(Ow(f),f===d){J=null;break}if(g!==null){g.return=_,J=g;break}J=_}}}var E=i.alternate;if(E!==null){var R=E.child;if(R!==null){E.child=null;do{var A=R.sibling;R.sibling=null,R=A}while(R!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Na(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,J=w;break e}J=i.return}}var v=t.current;for(J=v;J!==null;){a=J;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,J=S;else e:for(a=v;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yc(9,l)}}catch(B){Me(l,l.return,B)}if(l===a){J=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,J=N;break e}J=l.return}}if(pe=s,Qr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot($c,t)}catch{}r=!0}return r}finally{we=n,Qt.transition=e}}return!1}function _v(t,e,n){e=_i(n,e),e=Sw(t,e,1),t=Cr(t,e,1),e=_t(),t!==null&&(wo(t,1,e),Pt(t,e))}function Me(t,e,n){if(t.tag===3)_v(t,t,n);else for(;e!==null;){if(e.tag===3){_v(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){t=_i(n,t),t=Cw(e,t,1),e=Cr(e,t,1),t=_t(),e!==null&&(wo(e,1,t),Pt(e,t));break}}e=e.return}}function kT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(nt&n)===n&&(We===4||We===3&&(nt&130023424)===nt&&500>Ve()-rm?cs(t,0):nm|=n),Pt(t,e)}function Ww(t,e){e===0&&(t.mode&1?(e=il,il<<=1,!(il&130023424)&&(il=4194304)):e=1);var n=_t();t=Hn(t,e),t!==null&&(wo(t,e,n),Pt(t,n))}function NT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ww(t,n)}function AT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Ww(t,n)}var Gw;Gw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,vT(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,ke&&e.flags&1048576&&J_(e,ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pl(t,e),t=e.pendingProps;var s=gi(e,mt.current);oi(e,n),s=Jf(null,e,r,t,s,n);var i=Yf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,sc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wf(e),s.updater=Jc,e.stateNode=s,s._reactInternals=e,wh(e,r,t,n),e=Sh(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Vf(e),xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=PT(r),t=nn(r,t),s){case 0:e=bh(null,e,r,t,n);break e;case 1:e=uv(null,e,r,t,n);break e;case 11:e=lv(null,e,r,t,n);break e;case 14:e=cv(null,e,r,nn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),bh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),uv(t,e,r,s,n);case 3:e:{if(Nw(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,nw(t,e),cc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_i(Error($(423)),e),e=dv(t,e,r,n,s);break e}else if(r!==s){s=_i(Error($(424)),e),e=dv(t,e,r,n,s);break e}else for(Lt=Sr(e.stateNode.containerInfo.firstChild),Vt=e,ke=!0,sn=null,n=ew(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vi(),r===s){e=Wn(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return rw(e),t===null&&yh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,fh(r,s)?a=null:i!==null&&fh(r,i)&&(e.flags|=32),kw(t,e),xt(t,e,a,n),e.child;case 6:return t===null&&yh(e),null;case 13:return Aw(t,e,n);case 4:return Gf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yi(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),lv(t,e,r,s,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,be(oc,r._currentValue),r._currentValue=a,i!==null)if(dn(i.value,a)){if(i.children===s.children&&!At.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),xh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),xh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oi(e,n),s=Yt(s),r=r(s),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),cv(t,e,r,s,n);case 15:return Tw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Pl(t,e),e.tag=1,Rt(r)?(t=!0,sc(e)):t=!1,oi(e,n),bw(e,r,s),wh(e,r,s,n),Sh(null,e,r,!0,t,n);case 19:return Rw(t,e,n);case 22:return Iw(t,e,n)}throw Error($(156,e.tag))};function qw(t,e){return __(t,e)}function RT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new RT(t,e,n,r)}function om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PT(t){if(typeof t=="function")return om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===If)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ol(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")om(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Gs:return us(n.children,s,i,e);case Cf:a=8,s|=8;break;case Wd:return t=Kt(12,n,e,s|2),t.elementType=Wd,t.lanes=i,t;case Gd:return t=Kt(13,n,e,s),t.elementType=Gd,t.lanes=i,t;case qd:return t=Kt(19,n,e,s),t.elementType=qd,t.lanes=i,t;case r_:return Zc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t_:a=10;break e;case n_:a=9;break e;case Tf:a=11;break e;case If:a=14;break e;case lr:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Kt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function us(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Zc(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=r_,t.lanes=n,t.stateNode={isHidden:!1},t}function wd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Ed(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nd(0),this.expirationTimes=nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lm(t,e,n,r,s,i,a,l,u){return t=new jT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wf(i),t}function DT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Kw(t){if(!t)return Mr;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Rt(n))return K_(t,n,e)}return e}function Qw(t,e,n,r,s,i,a,l,u){return t=lm(n,r,!0,t,s,i,a,l,u),t.context=Kw(null),n=t.current,r=_t(),s=Ir(n),i=Fn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,wo(t,s,r),Pt(t,r),t}function eu(t,e,n,r){var s=e.current,i=_t(),a=Ir(s);return n=Kw(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,a),t!==null&&(cn(t,s,a,i),Nl(t,s,a)),a}function vc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cm(t,e){wv(t,e),(t=t.alternate)&&wv(t,e)}function OT(){return null}var Jw=typeof reportError=="function"?reportError:function(t){console.error(t)};function um(t){this._internalRoot=t}tu.prototype.render=um.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));eu(t,e,null,null)};tu.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){eu(null,t,null,null)}),e[$n]=null}};function tu(t){this._internalRoot=t}tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=I_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&N_(t)}};function dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ev(){}function MT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=vc(a);i.call(d)}}var a=Qw(e,r,t,0,null,!1,!1,"",Ev);return t._reactRootContainer=a,t[$n]=a.current,Ja(t.nodeType===8?t.parentNode:t),gs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=vc(u);l.call(d)}}var u=lm(t,0,!1,null,null,!1,!1,"",Ev);return t._reactRootContainer=u,t[$n]=u.current,Ja(t.nodeType===8?t.parentNode:t),gs(function(){eu(e,u,n,r)}),u}function ru(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=vc(a);l.call(u)}}eu(e,a,t,s)}else a=MT(n,e,t,s,r);return vc(a)}C_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(Af(e,n|1),Pt(e,Ve()),!(pe&6)&&(wi=Ve()+500,Qr()))}break;case 13:gs(function(){var r=Hn(t,1);if(r!==null){var s=_t();cn(r,t,1,s)}}),cm(t,1)}};Rf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=_t();cn(e,t,134217728,n)}cm(t,134217728)}};T_=function(t){if(t.tag===13){var e=Ir(t),n=Hn(t,e);if(n!==null){var r=_t();cn(n,t,e,r)}cm(t,e)}};I_=function(){return we};k_=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};rh=function(t,e,n){switch(e){case"input":if(Jd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qc(r);if(!s)throw Error($(90));i_(r),Jd(r,s)}}}break;case"textarea":o_(t,n);break;case"select":e=n.value,e!=null&&ri(t,!!n.multiple,e,!1)}};m_=sm;p_=gs;var LT={usingClientEntryPoint:!1,Events:[bo,Js,qc,h_,f_,sm]},ha={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VT={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y_(t),t===null?null:t.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||OT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{$c=gl.inject(VT),yn=gl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LT;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dm(e))throw Error($(200));return DT(t,e,null,n)};Bt.createRoot=function(t,e){if(!dm(t))throw Error($(299));var n=!1,r="",s=Jw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lm(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,Ja(t.nodeType===8?t.parentNode:t),new um(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=y_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return gs(t)};Bt.hydrate=function(t,e,n){if(!nu(e))throw Error($(200));return ru(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!dm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Jw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Qw(e,null,t,1,n??null,s,!1,i,a),t[$n]=e.current,Ja(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tu(e)};Bt.render=function(t,e,n){if(!nu(e))throw Error($(200));return ru(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!nu(t))throw Error($(40));return t._reactRootContainer?(gs(function(){ru(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Bt.unstable_batchedUpdates=sm;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ru(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Yw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yw)}catch(t){console.error(t)}}Yw(),Yx.exports=Bt;var UT=Yx.exports,Xw,bv=UT;Xw=bv.createRoot,bv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function io(){return io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},io.apply(this,arguments)}var yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yr||(yr={}));const Sv="popstate";function FT(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return Mh("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yc(s)}return zT(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BT(){return Math.random().toString(36).substr(2,8)}function Cv(t,e){return{usr:t.state,key:t.key,idx:e}}function Mh(t,e,n,r){return n===void 0&&(n=null),io({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ji(e):e,{state:n,key:e&&e.key||r||BT()})}function yc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ji(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=yr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(io({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){l=yr.Pop;let A=f(),w=A==null?null:A-d;d=A,u&&u({action:l,location:R.location,delta:w})}function g(A,w){l=yr.Push;let v=Mh(R.location,A,w);d=f()+1;let S=Cv(v,d),N=R.createHref(v);try{a.pushState(S,"",N)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(N)}i&&u&&u({action:l,location:R.location,delta:1})}function _(A,w){l=yr.Replace;let v=Mh(R.location,A,w);d=f();let S=Cv(v,d),N=R.createHref(v);a.replaceState(S,"",N),i&&u&&u({action:l,location:R.location,delta:0})}function E(A){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof A=="string"?A:yc(A);return v=v.replace(/ $/,"%20"),Pe(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let R={get action(){return l},get location(){return t(s,a)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Sv,m),u=A,()=>{s.removeEventListener(Sv,m),u=null}},createHref(A){return e(s,A)},createURL:E,encodeLocation(A){let w=E(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:_,go(A){return a.go(A)}};return R}var Tv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tv||(Tv={}));function $T(t,e,n){return n===void 0&&(n="/"),HT(t,e,n)}function HT(t,e,n,r){let s=typeof e=="string"?ji(e):e,i=Ei(s.pathname||"/",n);if(i==null)return null;let a=Zw(t);WT(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=nI(i);l=eI(a[u],d)}return l}function Zw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Pe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Nr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:XT(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let u of e0(i.path))s(i,a,u)}),e}function e0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=e0(r.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function WT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GT=/^:[\w-]+$/,qT=3,KT=2,QT=1,JT=10,YT=-2,Iv=t=>t==="*";function XT(t,e){let n=t.split("/"),r=n.length;return n.some(Iv)&&(r+=YT),e&&(r+=KT),n.filter(s=>!Iv(s)).reduce((s,i)=>s+(GT.test(i)?qT:i===""?QT:JT),r)}function ZT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eI(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Lh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Nr([i,m.pathname]),pathnameBase:oI(Nr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Nr([i,m.pathnameBase]))}return a}function Lh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let R=l[m]||"";a=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const E=l[m];return _&&!E?d[g]=void 0:d[g]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function tI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ei(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const rI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sI=t=>rI.test(t);function iI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ji(t):t,i;if(n)if(sI(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),hm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=kv(n.substring(1),"/"):i=kv(n,e)}else i=e;return{pathname:i,search:lI(r),hash:cI(s)}}function kv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fm(t,e){let n=aI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function mm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ji(t):(s=io({},t),Pe(!s.pathname||!s.pathname.includes("?"),bd("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),bd("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),bd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=iI(s,l),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Nr=t=>t.join("/").replace(/\/\/+/g,"/"),oI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const t0=["post","put","patch","delete"];new Set(t0);const dI=["get",...t0];new Set(dI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}const su=C.createContext(null),n0=C.createContext(null),Xn=C.createContext(null),iu=C.createContext(null),Zn=C.createContext({outlet:null,matches:[],isDataRoute:!1}),r0=C.createContext(null);function hI(t,e){let{relative:n}=e===void 0?{}:e;Di()||Pe(!1);let{basename:r,navigator:s}=C.useContext(Xn),{hash:i,pathname:a,search:l}=au(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Nr([r,a])),s.createHref({pathname:u,search:l,hash:i})}function Di(){return C.useContext(iu)!=null}function Cs(){return Di()||Pe(!1),C.useContext(iu).location}function s0(t){C.useContext(Xn).static||C.useLayoutEffect(t)}function i0(){let{isDataRoute:t}=C.useContext(Zn);return t?II():fI()}function fI(){Di()||Pe(!1);let t=C.useContext(su),{basename:e,future:n,navigator:r}=C.useContext(Xn),{matches:s}=C.useContext(Zn),{pathname:i}=Cs(),a=JSON.stringify(fm(s,n.v7_relativeSplatPath)),l=C.useRef(!1);return s0(()=>{l.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=mm(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Nr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}const mI=C.createContext(null);function pI(t){let e=C.useContext(Zn).outlet;return e&&C.createElement(mI.Provider,{value:t},e)}function au(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Xn),{matches:s}=C.useContext(Zn),{pathname:i}=Cs(),a=JSON.stringify(fm(s,r.v7_relativeSplatPath));return C.useMemo(()=>mm(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function gI(t,e){return vI(t,e)}function vI(t,e,n,r){Di()||Pe(!1);let{navigator:s}=C.useContext(Xn),{matches:i}=C.useContext(Zn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Cs(),f;if(e){var m;let A=typeof e=="string"?ji(e):e;u==="/"||(m=A.pathname)!=null&&m.startsWith(u)||Pe(!1),f=A}else f=d;let g=f.pathname||"/",_=g;if(u!=="/"){let A=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=$T(t,{pathname:_}),R=EI(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:Nr([u,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:Nr([u,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&R?C.createElement(iu.Provider,{value:{location:ao({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:yr.Pop}},R):R}function yI(){let t=TI(),e=uI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const xI=C.createElement(yI,null);class _I extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(Zn.Provider,{value:this.props.routeContext},C.createElement(r0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wI(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(su);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Zn.Provider,{value:e},r)}function EI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Pe(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:_}=n,E=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||E){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let _,E=!1,R=null,A=null;n&&(_=l&&m.route.id?l[m.route.id]:void 0,R=m.route.errorElement||xI,u&&(d<0&&g===0?(kI("route-fallback"),E=!0,A=null):d===g&&(E=!0,A=m.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),v=()=>{let S;return _?S=R:E?S=A:m.route.Component?S=C.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=f,C.createElement(wI,{match:m,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(_I,{location:n.location,revalidation:n.revalidation,component:R,error:_,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var a0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(a0||{}),o0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(o0||{});function bI(t){let e=C.useContext(su);return e||Pe(!1),e}function SI(t){let e=C.useContext(n0);return e||Pe(!1),e}function CI(t){let e=C.useContext(Zn);return e||Pe(!1),e}function l0(t){let e=CI(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function TI(){var t;let e=C.useContext(r0),n=SI(),r=l0();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function II(){let{router:t}=bI(a0.UseNavigateStable),e=l0(o0.UseNavigateStable),n=C.useRef(!1);return s0(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ao({fromRouteId:e},i)))},[t,e])}const Nv={};function kI(t,e,n){Nv[t]||(Nv[t]=!0)}function NI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function AI(t){let{to:e,replace:n,state:r,relative:s}=t;Di()||Pe(!1);let{future:i,static:a}=C.useContext(Xn),{matches:l}=C.useContext(Zn),{pathname:u}=Cs(),d=i0(),f=mm(e,fm(l,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return C.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function RI(t){return pI(t.context)}function Fs(t){Pe(!1)}function PI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=yr.Pop,navigator:i,static:a=!1,future:l}=t;Di()&&Pe(!1);let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:i,static:a,future:ao({v7_relativeSplatPath:!1},l)}),[u,l,i,a]);typeof r=="string"&&(r=ji(r));let{pathname:f="/",search:m="",hash:g="",state:_=null,key:E="default"}=r,R=C.useMemo(()=>{let A=Ei(f,u);return A==null?null:{location:{pathname:A,search:m,hash:g,state:_,key:E},navigationType:s}},[u,f,m,g,_,E,s]);return R==null?null:C.createElement(Xn.Provider,{value:d},C.createElement(iu.Provider,{children:n,value:R}))}function jI(t){let{children:e,location:n}=t;return gI(Vh(e),n)}new Promise(()=>{});function Vh(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,Vh(r.props.children,i));return}r.type!==Fs&&Pe(!1),!r.props.index||!r.props.children||Pe(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Vh(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xc.apply(this,arguments)}function c0(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function DI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OI(t,e){return t.button===0&&(!e||e==="_self")&&!DI(t)}const MI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],VI="6";try{window.__reactRouterVersion=VI}catch{}const UI=C.createContext({isTransitioning:!1}),FI="startTransition",Av=kS[FI];function BI(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=FT({window:s,v5Compat:!0}));let a=i.current,[l,u]=C.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=C.useCallback(m=>{d&&Av?Av(()=>u(m)):u(m)},[u,d]);return C.useLayoutEffect(()=>a.listen(f),[a,f]),C.useEffect(()=>NI(r),[r]),C.createElement(PI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const zI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$I=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uh=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=c0(e,MI),{basename:_}=C.useContext(Xn),E,R=!1;if(typeof d=="string"&&$I.test(d)&&(E=d,zI))try{let S=new URL(window.location.href),N=d.startsWith("//")?new URL(S.protocol+d):new URL(d),B=Ei(N.pathname,_);N.origin===S.origin&&B!=null?d=B+N.search+N.hash:R=!0}catch{}let A=hI(d,{relative:s}),w=WI(d,{replace:a,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function v(S){r&&r(S),S.defaultPrevented||w(S)}return C.createElement("a",xc({},g,{href:E||A,onClick:R||i?r:v,ref:n,target:u}))}),Sd=C.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:d,children:f}=e,m=c0(e,LI),g=au(u,{relative:m.relative}),_=Cs(),E=C.useContext(n0),{navigator:R,basename:A}=C.useContext(Xn),w=E!=null&&GI(g)&&d===!0,v=R.encodeLocation?R.encodeLocation(g).pathname:g.pathname,S=_.pathname,N=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;s||(S=S.toLowerCase(),N=N?N.toLowerCase():null,v=v.toLowerCase()),N&&A&&(N=Ei(N,A)||N);const B=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let U=S===v||!a&&S.startsWith(v)&&S.charAt(B)==="/",T=N!=null&&(N===v||!a&&N.startsWith(v)&&N.charAt(v.length)==="/"),x={isActive:U,isPending:T,isTransitioning:w},I=U?r:void 0,k;typeof i=="function"?k=i(x):k=[i,U?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(x):l;return C.createElement(Uh,xc({},m,{"aria-current":I,className:k,ref:n,style:P,to:u,viewTransition:d}),typeof f=="function"?f(x):f)});var Fh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fh||(Fh={}));var Rv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Rv||(Rv={}));function HI(t){let e=C.useContext(su);return e||Pe(!1),e}function WI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,u=i0(),d=Cs(),f=au(t,{relative:a});return C.useCallback(m=>{if(OI(m,n)){m.preventDefault();let g=r!==void 0?r:yc(d)===yc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,u,f,r,s,n,t,i,a,l])}function GI(t,e){e===void 0&&(e={});let n=C.useContext(UI);n==null&&Pe(!1);let{basename:r}=HI(Fh.useViewTransitionState),s=au(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Ei(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ei(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lh(s.pathname,a)!=null||Lh(s.pathname,i)!=null}const qI=()=>{};var Pv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},KI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},d0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,_=d&63;u||(_=64,a||(g=64)),r.push(n[f],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new QI;const g=i<<2|l>>4;if(r.push(g),d!==64){const _=l<<4&240|d>>2;if(r.push(_),m!==64){const E=d<<6&192|m;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JI=function(t){const e=u0(t);return d0.encodeByteArray(e,!0)},_c=function(t){return JI(t).replace(/\./g,"")},h0=function(t){try{return d0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=()=>YI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof Pv>"u")return;const t=Pv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ek=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&h0(t[1]);return e&&JSON.parse(e)},ou=()=>{try{return qI()||XI()||ZI()||ek()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},f0=t=>{var e,n;return(n=(e=ou())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tk=t=>{const e=f0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},m0=()=>{var t;return(t=ou())===null||t===void 0?void 0:t.config},p0=t=>{var e;return(e=ou())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_c(JSON.stringify(n)),_c(JSON.stringify(a)),""].join(".")}const Pa={};function sk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pa))Pa[e]?t.emulator.push(e):t.prod.push(e);return t}function ik(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jv=!1;function v0(t,e){if(typeof window>"u"||typeof document>"u"||!Oi(window.location.host)||Pa[t]===e||Pa[t]||jv)return;Pa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=sk().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{jv=!0,a()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=ik(r),_=n("text"),E=document.getElementById(_)||document.createElement("span"),R=n("learnmore"),A=document.getElementById(R)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),f(A,R);const N=d();u(v,w),S.append(v,E,A,N),document.body.appendChild(S)}i?(E.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ak(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function ok(){var t;const e=(t=ou())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ck(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uk(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dk(){return!ok()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x0(){try{return typeof indexedDB=="object"}catch{return!1}}function _0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function hk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="FirebaseError";class fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fk,Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ts.prototype.create)}}class Ts{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?mk(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fn(s,l,r)}}function mk(t,e){return t.replace(pk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pk=/\{\$([^}]+)}/g;function gk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Dv(i)&&Dv(a)){if(!Lr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Dv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function va(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ya(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vk(t,e){const n=new yk(t,e);return n.subscribe.bind(n)}class yk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cd),s.error===void 0&&(s.error=Cd),s.complete===void 0&&(s.complete=Cd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1e3,wk=2,Ek=4*60*60*1e3,bk=.5;function Ov(t,e=_k,n=wk){const r=e*Math.pow(n,t),s=Math.round(bk*r*(Math.random()-.5)*2);return Math.min(Ek,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class hn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Tk(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ck(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ck(t){return t===rs?void 0:t}function Tk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Sk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const kk={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},Nk=he.INFO,Ak={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},Rk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Ak[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lu{constructor(e){this.name=e,this._logLevel=Nk,this._logHandler=Rk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const Pk=(t,e)=>e.some(n=>t instanceof n);let Mv,Lv;function jk(){return Mv||(Mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dk(){return Lv||(Lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w0=new WeakMap,Bh=new WeakMap,E0=new WeakMap,Td=new WeakMap,pm=new WeakMap;function Ok(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ar(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&w0.set(n,t)}).catch(()=>{}),pm.set(e,t),e}function Mk(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Bh.set(t,e)}let zh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Lk(t){zh=t(zh)}function Vk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Id(this),e,...n);return E0.set(r,e.sort?e.sort():[e]),Ar(r)}:Dk().includes(t)?function(...e){return t.apply(Id(this),e),Ar(w0.get(this))}:function(...e){return Ar(t.apply(Id(this),e))}}function Uk(t){return typeof t=="function"?Vk(t):(t instanceof IDBTransaction&&Mk(t),Pk(t,jk())?new Proxy(t,zh):t)}function Ar(t){if(t instanceof IDBRequest)return Ok(t);if(Td.has(t))return Td.get(t);const e=Uk(t);return e!==t&&(Td.set(t,e),pm.set(e,t)),e}const Id=t=>pm.get(t);function b0(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Ar(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Ar(a.result),u.oldVersion,u.newVersion,Ar(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Fk=["get","getKey","getAll","getAllKeys","count"],Bk=["put","add","delete","clear"],kd=new Map;function Vv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Bk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Fk.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return kd.set(e,i),i}Lk(t=>({...t,get:(e,n,r)=>Vv(e,n)||t.get(e,n,r),has:(e,n)=>!!Vv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($k(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $k(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $h="@firebase/app",Uv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new lu("@firebase/app"),Hk="@firebase/app-compat",Wk="@firebase/analytics-compat",Gk="@firebase/analytics",qk="@firebase/app-check-compat",Kk="@firebase/app-check",Qk="@firebase/auth",Jk="@firebase/auth-compat",Yk="@firebase/database",Xk="@firebase/data-connect",Zk="@firebase/database-compat",eN="@firebase/functions",tN="@firebase/functions-compat",nN="@firebase/installations",rN="@firebase/installations-compat",sN="@firebase/messaging",iN="@firebase/messaging-compat",aN="@firebase/performance",oN="@firebase/performance-compat",lN="@firebase/remote-config",cN="@firebase/remote-config-compat",uN="@firebase/storage",dN="@firebase/storage-compat",hN="@firebase/firestore",fN="@firebase/ai",mN="@firebase/firestore-compat",pN="firebase",gN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",vN={[$h]:"fire-core",[Hk]:"fire-core-compat",[Gk]:"fire-analytics",[Wk]:"fire-analytics-compat",[Kk]:"fire-app-check",[qk]:"fire-app-check-compat",[Qk]:"fire-auth",[Jk]:"fire-auth-compat",[Yk]:"fire-rtdb",[Xk]:"fire-data-connect",[Zk]:"fire-rtdb-compat",[eN]:"fire-fn",[tN]:"fire-fn-compat",[nN]:"fire-iid",[rN]:"fire-iid-compat",[sN]:"fire-fcm",[iN]:"fire-fcm-compat",[aN]:"fire-perf",[oN]:"fire-perf-compat",[lN]:"fire-rc",[cN]:"fire-rc-compat",[uN]:"fire-gcs",[dN]:"fire-gcs-compat",[hN]:"fire-fst",[mN]:"fire-fst-compat",[fN]:"fire-vertex","fire-js":"fire-js",[pN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Map,yN=new Map,Wh=new Map;function Fv(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tn(t){const e=t.name;if(Wh.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Wh.set(e,t);for(const n of wc.values())Fv(n,t);for(const n of yN.values())Fv(n,t);return!0}function Is(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Ts("app","Firebase",xN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=gN;function S0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=m0()),!n)throw Rr.create("no-options");const i=wc.get(s);if(i){if(Lr(n,i.options)&&Lr(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const a=new Ik(s);for(const u of Wh.values())a.addComponent(u);const l=new _N(n,r,a);return wc.set(s,l),l}function gm(t=Hh){const e=wc.get(t);if(!e&&t===Hh&&m0())return S0();if(!e)throw Rr.create("no-app",{appName:t});return e}function Jt(t,e,n){var r;let s=(r=vN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(l.join(" "));return}Tn(new hn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",EN=1,oo="firebase-heartbeat-store";let Nd=null;function C0(){return Nd||(Nd=b0(wN,EN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Nd}async function bN(t){try{const n=(await C0()).transaction(oo),r=await n.objectStore(oo).get(T0(t));return await n.done,r}catch(e){if(e instanceof fn)Gn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gn.warn(n.message)}}}async function Bv(t,e){try{const r=(await C0()).transaction(oo,"readwrite");await r.objectStore(oo).put(e,T0(t)),await r.done}catch(n){if(n instanceof fn)Gn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function T0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1024,CN=30;class TN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>CN){const a=NN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zv(),{heartbeatsToSend:r,unsentEntries:s}=IN(this._heartbeatsCache.heartbeats),i=_c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gn.warn(n),""}}}function zv(){return new Date().toISOString().substring(0,10)}function IN(t,e=SN){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),$v(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$v(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x0()?_0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $v(t){return _c(JSON.stringify({version:2,heartbeats:t})).length}function NN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){Tn(new hn("platform-logger",e=>new zk(e),"PRIVATE")),Tn(new hn("heartbeat",e=>new TN(e),"PRIVATE")),Jt($h,Uv,t),Jt($h,Uv,"esm2017"),Jt("fire-js","")}AN("");function vm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function I0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RN=I0,k0=new Ts("auth","Firebase",I0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new lu("@firebase/auth");function PN(t,...e){Ec.logLevel<=he.WARN&&Ec.warn(`Auth (${Mi}): ${t}`,...e)}function Ml(t,...e){Ec.logLevel<=he.ERROR&&Ec.error(`Auth (${Mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw xm(t,...e)}function un(t,...e){return xm(t,...e)}function ym(t,e,n){const r=Object.assign(Object.assign({},RN()),{[e]:n});return new Ts("auth","Firebase",r).create(e,{appName:t.name})}function _n(t){return ym(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function N0(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zt(t,"argument-error"),ym(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return k0.create(t,...e)}function ne(t,e,...n){if(!t)throw xm(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ml(e),new Error(e)}function qn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jN(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jN()||y0()||"connection"in navigator)?navigator.onLine:!0}function ON(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=ak()||ck()}get(){return DN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VN=new To(3e4,6e4);function Jr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function er(t,e,n,r,s={}){return R0(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Co(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return lk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(d.credentials="include"),A0.fetch()(await P0(t,t.config.apiHost,n,l),d)})}async function R0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MN),e);try{const s=new FN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw vl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw vl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw vl(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ym(t,f,d);Zt(t,f)}}catch(s){if(s instanceof fn)throw s;Zt(t,"network-request-failed",{message:String(s)})}}async function Io(t,e,n,r,s={}){const i=await er(t,e,n,r,s);return"mfaPendingCredential"in i&&Zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function P0(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?_m(t.config,s):`${t.config.apiScheme}://${s}`;return LN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function UN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),VN.get())})}}function vl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=un(t,e,r);return s.customData._tokenResponse=n,s}function Wv(t){return t!==void 0&&t.enterprise!==void 0}class BN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return UN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zN(t,e){return er(t,"GET","/v2/recaptchaConfig",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e){return er(t,"POST","/v1/accounts:delete",e)}async function bc(t,e){return er(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HN(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),s=wm(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ja(Ad(s.auth_time)),issuedAtTime:ja(Ad(s.iat)),expirationTime:ja(Ad(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ad(t){return Number(t)*1e3}function wm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ml("JWT malformed, contained fewer than 3 sections"),null;try{const s=h0(n);return s?JSON.parse(s):(Ml("Failed to decode base64 JWT payload"),null)}catch(s){return Ml("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Gv(t){const e=wm(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fn&&WN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t){var e;const n=t.auth,r=await t.getIdToken(),s=await bi(t,bc(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?j0(i.providerUserInfo):[],l=KN(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new qh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function qN(t){const e=Ye(t);await lo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function j0(t){return t.map(e=>{var{providerId:n}=e,r=vm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){const n=await R0(t,{},async()=>{const r=Co({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await P0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Oi(t.emulatorConfig.host)&&(u.credentials="include"),A0.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JN(t,e){return er(t,"POST","/v2/accounts:revokeToken",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Gv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await QN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new ci;return r&&(ne(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ci,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class an{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bi(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HN(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new an(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await bi(this,$N(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(a=n.photoURL)!==null&&a!==void 0?a:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:N,isAnonymous:B,providerData:U,stsTokenManager:T}=n;ne(S&&T,e,"internal-error");const x=ci.fromJSON(this.name,T);ne(typeof S=="string",e,"internal-error"),or(m,e.name),or(g,e.name),ne(typeof N=="boolean",e,"internal-error"),ne(typeof B=="boolean",e,"internal-error"),or(_,e.name),or(E,e.name),or(R,e.name),or(A,e.name),or(w,e.name),or(v,e.name);const I=new an({uid:S,auth:e,email:g,emailVerified:N,displayName:m,isAnonymous:B,photoURL:E,phoneNumber:_,tenantId:R,stsTokenManager:x,createdAt:w,lastLoginAt:v});return U&&Array.isArray(U)&&(I.providerData=U.map(k=>Object.assign({},k))),A&&(I._redirectEventId=A),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new ci;s.updateFromServerResponse(n);const i=new an({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lo(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?j0(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ci;l.updateFromIdToken(r);const u=new an({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function Un(t){qn(t instanceof Function,"Expected a class definition");let e=qv.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}D0.type="NONE";const Kv=D0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e,n){return`firebase:${t}:${e}:${n}`}class ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ll(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ll("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bc(this.auth,{idToken:e}).catch(()=>{});return n?an._fromGetAccountInfoResponse(this.auth,n,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ui(Un(Kv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Un(Kv);const a=Ll(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(a);if(f){let m;if(typeof f=="string"){const g=await bc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await an._fromGetAccountInfoResponse(e,g,f)}else m=an._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ui(i,e,r):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new ui(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F0(e))return"Blackberry";if(B0(e))return"Webos";if(M0(e))return"Safari";if((e.includes("chrome/")||L0(e))&&!e.includes("edge/"))return"Chrome";if(U0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function O0(t=pt()){return/firefox\//i.test(t)}function M0(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L0(t=pt()){return/crios\//i.test(t)}function V0(t=pt()){return/iemobile/i.test(t)}function U0(t=pt()){return/android/i.test(t)}function F0(t=pt()){return/blackberry/i.test(t)}function B0(t=pt()){return/webos/i.test(t)}function Em(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YN(t=pt()){var e;return Em(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XN(){return uk()&&document.documentMode===10}function z0(t=pt()){return Em(t)||U0(t)||B0(t)||F0(t)||/windows phone/i.test(t)||V0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t,e=[]){let n;switch(t){case"Browser":n=Qv(pt());break;case"Worker":n=`${Qv(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t,e={}){return er(t,"GET","/v2/passwordPolicy",Jr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=6;class nA{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:tA,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jv(this),this.idTokenSubscription=new Jv(this),this.beforeStateQueue=new ZN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ui.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bc(this,{idToken:e}),r=await an._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lo(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ON()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(_n(this));const n=e?Ye(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eA(this),n=new nA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ts("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await ui.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tr(t){return Ye(t)}class Jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=vk(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sA(t){cu=t}function H0(t){return cu.loadJS(t)}function iA(){return cu.recaptchaEnterpriseScript}function aA(){return cu.gapiScript}function oA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class lA{constructor(){this.enterprise=new cA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class cA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const uA="recaptcha-enterprise",W0="NO_RECAPTCHA";class dA{constructor(e){this.type=uA,this.auth=tr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{zN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new BN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,a,l){const u=window.grecaptcha;Wv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(W0)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lA().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&Wv(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=iA();u.length!==0&&(u+=l),H0(u).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function Yv(t,e,n,r=!1,s=!1){const i=new dA(t);let a;if(s)a=W0;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Kh(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Yv(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Yv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){const n=Is(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Lr(i,e??{}))return s;Zt(s,"already-initialized")}return n.initialize({options:e})}function fA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mA(t,e,n){const r=tr(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=G0(e),{host:a,port:l}=pA(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Lr(d,r.config.emulator)&&Lr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Oi(a)?(g0(`${i}//${a}${u}`),v0("Auth",!0)):gA()}function G0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pA(t){const e=G0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Xv(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Xv(a)}}}function Xv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function vA(t,e){return er(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e){return Io(t,"POST","/v1/accounts:signInWithPassword",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e){return Io(t,"POST","/v1/accounts:signInWithEmailLink",Jr(t,e))}async function _A(t,e){return Io(t,"POST","/v1/accounts:signInWithEmailLink",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends bm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new co(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new co(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kh(e,n,"signInWithPassword",yA);case"emailLink":return xA(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kh(e,r,"signUpPassword",vA);case"emailLink":return _A(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(t,e){return Io(t,"POST","/v1/accounts:signInWithIdp",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="http://localhost";class vs extends bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=vm(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new vs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return di(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,di(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,di(e,n)}buildRequest(){const e={requestUri:wA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Co(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bA(t){const e=va(ya(t)).link,n=e?va(ya(e)).deep_link_id:null,r=va(ya(t)).deep_link_id;return(r?va(ya(r)).link:null)||r||n||e||t}class Sm{constructor(e){var n,r,s,i,a,l;const u=va(ya(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=EA((s=u.mode)!==null&&s!==void 0?s:null);ne(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=bA(e);try{return new Sm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.providerId=Vr.PROVIDER_ID}static credential(e,n){return co._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Sm.parseLink(n);return ne(r,"argument-error"),co._fromEmailAndCode(e,r.code,r.tenantId)}}Vr.PROVIDER_ID="password";Vr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends uu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ko{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends ko{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends ko{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q0(t,e){return Io(t,"POST","/v1/accounts:signUp",Jr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await an._fromIdTokenResponse(e,r,s),a=Zv(r);return new Kn({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Zv(r);return new Kn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Zv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t){var e;if(kt(t.app))return Promise.reject(_n(t));const n=tr(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Kn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await q0(n,{returnSecureToken:!0}),s=await Kn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Sc(e,n,r,s)}}function K0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(t,i,e,r):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function Q0(t,e,n=!1){const r=await bi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kn._forOperation(t,"link",r)}async function TA(t,e,n){await lo(e);const r=CA(e.providerData);ne(r.has(n)===t,e.auth,"provider-already-linked")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(t,e,n=!1){const{auth:r}=t;if(kt(r.app))return Promise.reject(_n(r));const s="reauthenticate";try{const i=await bi(t,K0(r,s,e,t),n);ne(i.idToken,r,"internal-error");const a=wm(i.idToken);ne(a,r,"internal-error");const{sub:l}=a;return ne(t.uid===l,r,"user-mismatch"),Kn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(t,e,n=!1){if(kt(t.app))return Promise.reject(_n(t));const r="signIn",s=await K0(t,r,e),i=await Kn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function kA(t,e){return J0(tr(t),e)}async function ey(t,e){const n=Ye(t);return await TA(!1,n,e.providerId),Q0(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(t){const e=tr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NA(t,e,n){if(kt(t.app))return Promise.reject(_n(t));const r=tr(t),a=await Kh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q0).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Y0(t),u}),l=await Kn._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function AA(t,e,n){return kt(t.app)?Promise.reject(_n(t)):kA(Ye(t),Vr.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Y0(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e){return er(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ye(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await bi(r,RA(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function PA(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function jA(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function DA(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function OA(t){return Ye(t).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1e3,LA=10;class Z0 extends X0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);XN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z0.type="LOCAL";const VA=Z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends X0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eE.type="SESSION";const tE=eE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),u=await UA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=Cm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function BA(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function zA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $A(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HA(){return nE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="firebaseLocalStorageDb",WA=1,Tc="firebaseLocalStorage",sE="fbase_key";class No{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hu(t,e){return t.transaction([Tc],e?"readwrite":"readonly").objectStore(Tc)}function GA(){const t=indexedDB.deleteDatabase(rE);return new No(t).toPromise()}function Qh(){const t=indexedDB.open(rE,WA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tc,{keyPath:sE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tc)?e(r):(r.close(),await GA(),e(await Qh()))})})}async function ny(t,e,n){const r=hu(t,!0).put({[sE]:e,value:n});return new No(r).toPromise()}async function qA(t,e){const n=hu(t,!1).get(e),r=await new No(n).toPromise();return r===void 0?null:r.value}function ry(t,e){const n=hu(t,!0).delete(e);return new No(n).toPromise()}const KA=800,QA=3;class iE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=du._getInstance(HA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zA(),!this.activeServiceWorker)return;this.sender=new FA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$A()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qh();return await ny(e,Cc,"1"),await ry(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ny(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hu(s,!1).getAll();return new No(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iE.type="LOCAL";const JA=iE;new To(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e){return e?Un(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,n){return di(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YA(t){return J0(t.auth,new Im(t),t.bypassAuthState)}function XA(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),IA(n,new Im(t),t.bypassAuthState)}async function ZA(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),Q0(n,new Im(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YA;case"linkViaPopup":case"linkViaRedirect":return ZA;case"reauthViaPopup":case"reauthViaRedirect":return XA;default:Zt(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new To(2e3,1e4);async function t2(t,e,n){if(kt(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));const r=tr(t);N0(t,e,uu);const s=Tm(r,n);return new xr(r,"signInViaPopup",e,s).executeNotNull()}async function n2(t,e,n){const r=Ye(t);N0(r.auth,e,uu);const s=Tm(r.auth,n);return new xr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class xr extends aE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xr.currentPopupAction&&xr.currentPopupAction.cancel(),xr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e2.get())};e()}}xr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="pendingRedirect",Vl=new Map;class s2 extends aE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vl.get(this.auth._key());if(!e){try{const r=await i2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vl.set(this.auth._key(),e)}return this.bypassAuthState||Vl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i2(t,e){const n=l2(e),r=o2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function a2(t,e){Vl.set(t._key(),e)}function o2(t){return Un(t._redirectPersistence)}function l2(t){return Ll(r2,t.config.apiKey,t.name)}async function c2(t,e,n=!1){if(kt(t.app))return Promise.reject(_n(t));const r=tr(t),s=Tm(r,e),a=await new s2(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=10*60*1e3;class d2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u2&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t,e={}){return er(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p2=/^https?/;async function g2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f2(t);for(const n of e)try{if(v2(n))return}catch{}Zt(t,"unauthorized-domain")}function v2(t){const e=Gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!p2.test(n))return!1;if(m2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new To(3e4,6e4);function iy(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x2(t){return new Promise((e,n)=>{var r,s,i;function a(){iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iy(),n(un(t,"network-request-failed"))},timeout:y2.get()})}if(!((s=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)a();else{const l=oA("iframefcb");return wn()[l]=()=>{gapi.load?a():n(un(t,"network-request-failed"))},H0(`${aA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ul=null,e})}let Ul=null;function _2(t){return Ul=Ul||x2(t),Ul}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new To(5e3,15e3),E2="__/auth/iframe",b2="emulator/auth/iframe",S2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T2(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_m(e,b2):`https://${t.config.authDomain}/${E2}`,r={apiKey:e.apiKey,appName:t.name,v:Mi},s=C2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Co(r).slice(1)}`}async function I2(t){const e=await _2(t),n=wn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:T2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=un(t,"network-request-failed"),l=wn().setTimeout(()=>{i(a)},w2.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N2=500,A2=600,R2="_blank",P2="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j2(t,e,n,r=N2,s=A2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},k2),{width:r.toString(),height:s.toString(),top:i,left:a}),d=pt().toLowerCase();n&&(l=L0(d)?R2:n),O0(d)&&(e=e||P2,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,E])=>`${g}${_}=${E},`,"");if(YN(d)&&l!=="_self")return D2(e||"",l),new ay(null);const m=window.open(e||"",l,f);ne(m,t,"popup-blocked");try{m.focus()}catch{}return new ay(m)}function D2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="__/auth/handler",M2="emulator/auth/handler",L2=encodeURIComponent("fac");async function oy(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mi,eventId:s};if(e instanceof uu){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",gk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof ko){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${L2}=${encodeURIComponent(u)}`:"";return`${V2(t)}?${Co(l).slice(1)}${d}`}function V2({config:t}){return t.emulator?_m(t,M2):`https://${t.authDomain}/${O2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="webStorageSupport";class U2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tE,this._completeRedirectFn=c2,this._overrideRedirectResult=a2}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await oy(e,n,r,Gh(),s);return j2(e,a,Cm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await oy(e,n,r,Gh(),s);return BA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await I2(e),r=new d2(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rd,{type:Rd},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Rd];a!==void 0&&n(!!a),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return z0()||M0()||Em()}}const F2=U2;var ly="@firebase/auth",cy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $2(t){Tn(new hn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ne(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$0(t)},d=new rA(r,s,i,u);return fA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new hn("auth-internal",e=>{const n=tr(e.getProvider("auth").getImmediate());return(r=>new B2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(ly,cy,z2(t)),Jt(ly,cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=5*60,W2=p0("authIdTokenMaxAge")||H2;let uy=null;const G2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>W2)return;const s=n==null?void 0:n.token;uy!==s&&(uy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function q2(t=gm()){const e=Is(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hA(t,{popupRedirectResolver:F2,persistence:[JA,VA,tE]}),r=p0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=G2(i.toString());jA(n,a,()=>a(n.currentUser)),PA(n,l=>a(l))}}const s=f0("auth");return s&&mA(n,`http://${s}`),n}function K2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",K2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$2("Browser");var Q2="firebase",J2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(Q2,J2,"app");const lE="@firebase/installations",km="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=1e4,uE=`w:${km}`,dE="FIS_v2",Y2="https://firebaseinstallations.googleapis.com/v1",X2=60*60*1e3,Z2="installations",eR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ys=new Ts(Z2,eR,tR);function hE(t){return t instanceof fn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE({projectId:t}){return`${Y2}/projects/${t}/installations`}function mE(t){return{token:t.token,requestStatus:2,expiresIn:rR(t.expiresIn),creationTime:Date.now()}}async function pE(t,e){const r=(await e.json()).error;return ys.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function gE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nR(t,{refreshToken:e}){const n=gE(t);return n.append("Authorization",sR(e)),n}async function vE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rR(t){return Number(t.replace("s","000"))}function sR(t){return`${dE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=fE(t),s=gE(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:dE,appId:t.appId,sdkVersion:uE},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await vE(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:mE(d.authToken)}}else throw await pE("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^[cdef][\w-]{21}$/,Jh="";function lR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cR(t);return oR.test(n)?n:Jh}catch{return Jh}}function cR(t){return aR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function _E(t,e){const n=fu(t);wE(n,e),uR(n,e)}function wE(t,e){const n=xE.get(t);if(n)for(const r of n)r(e)}function uR(t,e){const n=dR();n&&n.postMessage({key:t,fid:e}),hR()}let os=null;function dR(){return!os&&"BroadcastChannel"in self&&(os=new BroadcastChannel("[Firebase] FID Change"),os.onmessage=t=>{wE(t.data.key,t.data.fid)}),os}function hR(){xE.size===0&&os&&(os.close(),os=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="firebase-installations-database",mR=1,xs="firebase-installations-store";let Pd=null;function Nm(){return Pd||(Pd=b0(fR,mR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xs)}}})),Pd}async function Ic(t,e){const n=fu(t),s=(await Nm()).transaction(xs,"readwrite"),i=s.objectStore(xs),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&_E(t,e.fid),e}async function EE(t){const e=fu(t),r=(await Nm()).transaction(xs,"readwrite");await r.objectStore(xs).delete(e),await r.done}async function mu(t,e){const n=fu(t),s=(await Nm()).transaction(xs,"readwrite"),i=s.objectStore(xs),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&_E(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(t){let e;const n=await mu(t.appConfig,r=>{const s=pR(r),i=gR(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Jh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function pR(t){const e=t||{fid:lR(),registrationStatus:0};return bE(e)}function gR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ys.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=vR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:yR(t)}:{installationEntry:e}}async function vR(t,e){try{const n=await iR(t,e);return Ic(t.appConfig,n)}catch(n){throw hE(n)&&n.customData.serverCode===409?await EE(t.appConfig):await Ic(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function yR(t){let e=await dy(t.appConfig);for(;e.registrationStatus===1;)await yE(100),e=await dy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Am(t);return r||n}return e}function dy(t){return mu(t,e=>{if(!e)throw ys.create("installation-not-found");return bE(e)})}function bE(t){return xR(t)?{fid:t.fid,registrationStatus:0}:t}function xR(t){return t.registrationStatus===1&&t.registrationTime+cE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R({appConfig:t,heartbeatServiceProvider:e},n){const r=wR(t,n),s=nR(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:uE,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await vE(()=>fetch(r,l));if(u.ok){const d=await u.json();return mE(d)}else throw await pE("Generate Auth Token",u)}function wR(t,{fid:e}){return`${fE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(t,e=!1){let n;const r=await mu(t.appConfig,i=>{if(!SE(i))throw ys.create("not-registered");const a=i.authToken;if(!e&&SR(a))return i;if(a.requestStatus===1)return n=ER(t,e),i;{if(!navigator.onLine)throw ys.create("app-offline");const l=TR(i);return n=bR(t,l),l}});return n?await n:r.authToken}async function ER(t,e){let n=await hy(t.appConfig);for(;n.authToken.requestStatus===1;)await yE(100),n=await hy(t.appConfig);const r=n.authToken;return r.requestStatus===0?Rm(t,e):r}function hy(t){return mu(t,e=>{if(!SE(e))throw ys.create("not-registered");const n=e.authToken;return IR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function bR(t,e){try{const n=await _R(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ic(t.appConfig,r),n}catch(n){if(hE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await EE(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ic(t.appConfig,r)}throw n}}function SE(t){return t!==void 0&&t.registrationStatus===2}function SR(t){return t.requestStatus===2&&!CR(t)}function CR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+X2}function TR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function IR(t){return t.requestStatus===1&&t.requestTime+cE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t){const e=t,{installationEntry:n,registrationPromise:r}=await Am(e);return r?r.catch(console.error):Rm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(t,e=!1){const n=t;return await AR(n),(await Rm(n,e)).token}async function AR(t){const{registrationPromise:e}=await Am(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){if(!t||!t.options)throw jd("App Configuration");if(!t.name)throw jd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function jd(t){return ys.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="installations",PR="installations-internal",jR=t=>{const e=t.getProvider("app").getImmediate(),n=RR(e),r=Is(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DR=t=>{const e=t.getProvider("app").getImmediate(),n=Is(e,CE).getImmediate();return{getId:()=>kR(n),getToken:s=>NR(n,s)}};function OR(){Tn(new hn(CE,jR,"PUBLIC")),Tn(new hn(PR,DR,"PRIVATE"))}OR();Jt(lE,km);Jt(lE,km,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="analytics",MR="firebase_id",LR="origin",VR=60*1e3,UR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=new lu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ut=new Ts("analytics","Analytics",FR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){if(!t.startsWith(Pm)){const e=Ut.create("invalid-gtag-resource",{gtagURL:t});return jt.warn(e.message),""}return t}function TE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function $R(t,e){const n=zR("firebase-js-sdk-policy",{createScriptURL:BR}),r=document.createElement("script"),s=`${Pm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WR(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await TE(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(l){jt.error(l)}t("config",s,i)}async function GR(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await TE(n);for(const u of a){const d=l.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){jt.error(i)}}function qR(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,u]=a;await GR(t,e,n,l,u)}else if(i==="config"){const[l,u]=a;await WR(t,e,n,r,l,u)}else if(i==="consent"){const[l,u]=a;t("consent",l,u)}else if(i==="get"){const[l,u,d]=a;t("get",l,u,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){jt.error(l)}}return s}function KR(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=qR(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Pm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=30,YR=1e3;class XR{constructor(e={},n=YR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IE=new XR;function ZR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eP(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:ZR(r)},i=UR.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let l="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Ut.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function tP(t,e=IE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Ut.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ut.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new sP;return setTimeout(async()=>{l.abort()},VR),kE({appId:r,apiKey:s,measurementId:i},a,l,e)}async function kE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=IE){var i;const{appId:a,measurementId:l}=t;try{await nP(r,e)}catch(u){if(l)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:l};throw u}try{const u=await eP(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!rP(d)){if(s.deleteThrottleMetadata(a),l)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:l};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?Ov(n,s.intervalMillis,JR):Ov(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,m),jt.debug(`Calling attemptFetch again in ${f} millis`),kE(t,m,r,s)}}function nP(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Ut.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rP(t){if(!(t instanceof fn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iP(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(){if(x0())try{await _0()}catch(t){return jt.warn(Ut.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return jt.warn(Ut.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oP(t,e,n,r,s,i,a){var l;const u=tP(t);u.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>jt.error(_)),e.push(u);const d=aP().then(_=>{if(_)return r.getId()}),[f,m]=await Promise.all([u,d]);QR(i)||$R(i,f.measurementId),s("js",new Date);const g=(l=a==null?void 0:a.config)!==null&&l!==void 0?l:{};return g[LR]="firebase",g.update=!0,m!=null&&(g[MR]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.app=e}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}}let Da={},fy=[];const my={};let Dd="dataLayer",cP="gtag",py,NE,gy=!1;function uP(){const t=[];if(y0()&&t.push("This is a browser extension environment."),hk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ut.create("invalid-analytics-context",{errorInfo:e});jt.warn(n.message)}}function dP(t,e,n){uP();const r=t.options.appId;if(!r)throw Ut.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ut.create("no-api-key");if(Da[r]!=null)throw Ut.create("already-exists",{id:r});if(!gy){HR(Dd);const{wrappedGtag:i,gtagCore:a}=KR(Da,fy,my,Dd,cP);NE=i,py=a,gy=!0}return Da[r]=oP(t,fy,my,e,py,Dd,n),new lP(t)}function hP(t=gm()){t=Ye(t);const e=Is(t,kc);return e.isInitialized()?e.getImmediate():fP(t)}function fP(t,e={}){const n=Is(t,kc);if(n.isInitialized()){const s=n.getImmediate();if(Lr(e,n.getOptions()))return s;throw Ut.create("already-initialized")}return n.initialize({options:e})}function mP(t,e,n,r){t=Ye(t),iP(NE,Da[t.app.options.appId],e,n,r).catch(s=>jt.error(s))}const vy="@firebase/analytics",yy="0.10.17";function pP(){Tn(new hn(kc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return dP(r,s,n)},"PUBLIC")),Tn(new hn("analytics-internal",t,"PRIVATE")),Jt(vy,yy),Jt(vy,yy,"esm2017");function t(e){try{const n=e.getProvider(kc).getImmediate();return{logEvent:(r,s,i)=>mP(n,r,s,i)}}catch(n){throw Ut.create("interop-component-reg-failed",{reason:n})}}}pP();var xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,AE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,x){function I(){}I.prototype=x.prototype,T.D=x.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(k,P,j){for(var b=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)b[Y-2]=arguments[Y];return x.prototype[P].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,x,I){I||(I=0);var k=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)k[P]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(P=0;16>P;++P)k[P]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=T.g[0],I=T.g[1],P=T.g[2];var j=T.g[3],b=x+(j^I&(P^j))+k[0]+3614090360&4294967295;x=I+(b<<7&4294967295|b>>>25),b=j+(P^x&(I^P))+k[1]+3905402710&4294967295,j=x+(b<<12&4294967295|b>>>20),b=P+(I^j&(x^I))+k[2]+606105819&4294967295,P=j+(b<<17&4294967295|b>>>15),b=I+(x^P&(j^x))+k[3]+3250441966&4294967295,I=P+(b<<22&4294967295|b>>>10),b=x+(j^I&(P^j))+k[4]+4118548399&4294967295,x=I+(b<<7&4294967295|b>>>25),b=j+(P^x&(I^P))+k[5]+1200080426&4294967295,j=x+(b<<12&4294967295|b>>>20),b=P+(I^j&(x^I))+k[6]+2821735955&4294967295,P=j+(b<<17&4294967295|b>>>15),b=I+(x^P&(j^x))+k[7]+4249261313&4294967295,I=P+(b<<22&4294967295|b>>>10),b=x+(j^I&(P^j))+k[8]+1770035416&4294967295,x=I+(b<<7&4294967295|b>>>25),b=j+(P^x&(I^P))+k[9]+2336552879&4294967295,j=x+(b<<12&4294967295|b>>>20),b=P+(I^j&(x^I))+k[10]+4294925233&4294967295,P=j+(b<<17&4294967295|b>>>15),b=I+(x^P&(j^x))+k[11]+2304563134&4294967295,I=P+(b<<22&4294967295|b>>>10),b=x+(j^I&(P^j))+k[12]+1804603682&4294967295,x=I+(b<<7&4294967295|b>>>25),b=j+(P^x&(I^P))+k[13]+4254626195&4294967295,j=x+(b<<12&4294967295|b>>>20),b=P+(I^j&(x^I))+k[14]+2792965006&4294967295,P=j+(b<<17&4294967295|b>>>15),b=I+(x^P&(j^x))+k[15]+1236535329&4294967295,I=P+(b<<22&4294967295|b>>>10),b=x+(P^j&(I^P))+k[1]+4129170786&4294967295,x=I+(b<<5&4294967295|b>>>27),b=j+(I^P&(x^I))+k[6]+3225465664&4294967295,j=x+(b<<9&4294967295|b>>>23),b=P+(x^I&(j^x))+k[11]+643717713&4294967295,P=j+(b<<14&4294967295|b>>>18),b=I+(j^x&(P^j))+k[0]+3921069994&4294967295,I=P+(b<<20&4294967295|b>>>12),b=x+(P^j&(I^P))+k[5]+3593408605&4294967295,x=I+(b<<5&4294967295|b>>>27),b=j+(I^P&(x^I))+k[10]+38016083&4294967295,j=x+(b<<9&4294967295|b>>>23),b=P+(x^I&(j^x))+k[15]+3634488961&4294967295,P=j+(b<<14&4294967295|b>>>18),b=I+(j^x&(P^j))+k[4]+3889429448&4294967295,I=P+(b<<20&4294967295|b>>>12),b=x+(P^j&(I^P))+k[9]+568446438&4294967295,x=I+(b<<5&4294967295|b>>>27),b=j+(I^P&(x^I))+k[14]+3275163606&4294967295,j=x+(b<<9&4294967295|b>>>23),b=P+(x^I&(j^x))+k[3]+4107603335&4294967295,P=j+(b<<14&4294967295|b>>>18),b=I+(j^x&(P^j))+k[8]+1163531501&4294967295,I=P+(b<<20&4294967295|b>>>12),b=x+(P^j&(I^P))+k[13]+2850285829&4294967295,x=I+(b<<5&4294967295|b>>>27),b=j+(I^P&(x^I))+k[2]+4243563512&4294967295,j=x+(b<<9&4294967295|b>>>23),b=P+(x^I&(j^x))+k[7]+1735328473&4294967295,P=j+(b<<14&4294967295|b>>>18),b=I+(j^x&(P^j))+k[12]+2368359562&4294967295,I=P+(b<<20&4294967295|b>>>12),b=x+(I^P^j)+k[5]+4294588738&4294967295,x=I+(b<<4&4294967295|b>>>28),b=j+(x^I^P)+k[8]+2272392833&4294967295,j=x+(b<<11&4294967295|b>>>21),b=P+(j^x^I)+k[11]+1839030562&4294967295,P=j+(b<<16&4294967295|b>>>16),b=I+(P^j^x)+k[14]+4259657740&4294967295,I=P+(b<<23&4294967295|b>>>9),b=x+(I^P^j)+k[1]+2763975236&4294967295,x=I+(b<<4&4294967295|b>>>28),b=j+(x^I^P)+k[4]+1272893353&4294967295,j=x+(b<<11&4294967295|b>>>21),b=P+(j^x^I)+k[7]+4139469664&4294967295,P=j+(b<<16&4294967295|b>>>16),b=I+(P^j^x)+k[10]+3200236656&4294967295,I=P+(b<<23&4294967295|b>>>9),b=x+(I^P^j)+k[13]+681279174&4294967295,x=I+(b<<4&4294967295|b>>>28),b=j+(x^I^P)+k[0]+3936430074&4294967295,j=x+(b<<11&4294967295|b>>>21),b=P+(j^x^I)+k[3]+3572445317&4294967295,P=j+(b<<16&4294967295|b>>>16),b=I+(P^j^x)+k[6]+76029189&4294967295,I=P+(b<<23&4294967295|b>>>9),b=x+(I^P^j)+k[9]+3654602809&4294967295,x=I+(b<<4&4294967295|b>>>28),b=j+(x^I^P)+k[12]+3873151461&4294967295,j=x+(b<<11&4294967295|b>>>21),b=P+(j^x^I)+k[15]+530742520&4294967295,P=j+(b<<16&4294967295|b>>>16),b=I+(P^j^x)+k[2]+3299628645&4294967295,I=P+(b<<23&4294967295|b>>>9),b=x+(P^(I|~j))+k[0]+4096336452&4294967295,x=I+(b<<6&4294967295|b>>>26),b=j+(I^(x|~P))+k[7]+1126891415&4294967295,j=x+(b<<10&4294967295|b>>>22),b=P+(x^(j|~I))+k[14]+2878612391&4294967295,P=j+(b<<15&4294967295|b>>>17),b=I+(j^(P|~x))+k[5]+4237533241&4294967295,I=P+(b<<21&4294967295|b>>>11),b=x+(P^(I|~j))+k[12]+1700485571&4294967295,x=I+(b<<6&4294967295|b>>>26),b=j+(I^(x|~P))+k[3]+2399980690&4294967295,j=x+(b<<10&4294967295|b>>>22),b=P+(x^(j|~I))+k[10]+4293915773&4294967295,P=j+(b<<15&4294967295|b>>>17),b=I+(j^(P|~x))+k[1]+2240044497&4294967295,I=P+(b<<21&4294967295|b>>>11),b=x+(P^(I|~j))+k[8]+1873313359&4294967295,x=I+(b<<6&4294967295|b>>>26),b=j+(I^(x|~P))+k[15]+4264355552&4294967295,j=x+(b<<10&4294967295|b>>>22),b=P+(x^(j|~I))+k[6]+2734768916&4294967295,P=j+(b<<15&4294967295|b>>>17),b=I+(j^(P|~x))+k[13]+1309151649&4294967295,I=P+(b<<21&4294967295|b>>>11),b=x+(P^(I|~j))+k[4]+4149444226&4294967295,x=I+(b<<6&4294967295|b>>>26),b=j+(I^(x|~P))+k[11]+3174756917&4294967295,j=x+(b<<10&4294967295|b>>>22),b=P+(x^(j|~I))+k[2]+718787259&4294967295,P=j+(b<<15&4294967295|b>>>17),b=I+(j^(P|~x))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+x&4294967295,T.g[1]=T.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.u=function(T,x){x===void 0&&(x=T.length);for(var I=x-this.blockSize,k=this.B,P=this.h,j=0;j<x;){if(P==0)for(;j<=I;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<x;)if(k[P++]=T.charCodeAt(j++),P==this.blockSize){s(this,k),P=0;break}}else for(;j<x;)if(k[P++]=T[j++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=x},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var x=1;x<T.length-8;++x)T[x]=0;var I=8*this.o;for(x=T.length-8;x<T.length;++x)T[x]=I&255,I/=256;for(this.u(T),T=Array(16),x=I=0;4>x;++x)for(var k=0;32>k;k+=8)T[I++]=this.g[x]>>>k&255;return T};function i(T,x){var I=l;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=x(T)}function a(T,x){this.h=x;for(var I=[],k=!0,P=T.length-1;0<=P;P--){var j=T[P]|0;k&&j==x||(I[P]=j,k=!1)}this.g=I}var l={};function u(T){return-128<=T&&128>T?i(T,function(x){return new a([x|0],0>x?-1:0)}):new a([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return A(d(-T));for(var x=[],I=1,k=0;T>=I;k++)x[k]=T/I|0,I*=4294967296;return new a(x,0)}function f(T,x){if(T.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(T.charAt(0)=="-")return A(f(T.substring(1),x));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(x,8)),k=m,P=0;P<T.length;P+=8){var j=Math.min(8,T.length-P),b=parseInt(T.substring(P,P+j),x);8>j?(j=d(Math.pow(x,j)),k=k.j(j).add(d(b))):(k=k.j(I),k=k.add(d(b)))}return k}var m=u(0),g=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-A(this).m();for(var T=0,x=1,I=0;I<this.g.length;I++){var k=this.i(I);T+=(0<=k?k:4294967296+k)*x,x*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(R(this))return"-"+A(this).toString(T);for(var x=d(Math.pow(T,6)),I=this,k="";;){var P=N(I,x).g;I=w(I,P.j(x));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=P,E(I))return j+k;for(;6>j.length;)j="0"+j;k=j+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var x=0;x<T.g.length;x++)if(T.g[x]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=w(this,T),R(T)?-1:E(T)?0:1};function A(T){for(var x=T.g.length,I=[],k=0;k<x;k++)I[k]=~T.g[k];return new a(I,~T.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],k=0,P=0;P<=x;P++){var j=k+(this.i(P)&65535)+(T.i(P)&65535),b=(j>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);k=b>>>16,j&=65535,b&=65535,I[P]=b<<16|j}return new a(I,I[I.length-1]&-2147483648?-1:0)};function w(T,x){return T.add(A(x))}t.j=function(T){if(E(this)||E(T))return m;if(R(this))return R(T)?A(this).j(A(T)):A(A(this).j(T));if(R(T))return A(this.j(A(T)));if(0>this.l(_)&&0>T.l(_))return d(this.m()*T.m());for(var x=this.g.length+T.g.length,I=[],k=0;k<2*x;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<T.g.length;P++){var j=this.i(k)>>>16,b=this.i(k)&65535,Y=T.i(P)>>>16,ce=T.i(P)&65535;I[2*k+2*P]+=b*ce,v(I,2*k+2*P),I[2*k+2*P+1]+=j*ce,v(I,2*k+2*P+1),I[2*k+2*P+1]+=b*Y,v(I,2*k+2*P+1),I[2*k+2*P+2]+=j*Y,v(I,2*k+2*P+2)}for(k=0;k<x;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=x;k<2*x;k++)I[k]=0;return new a(I,0)};function v(T,x){for(;(T[x]&65535)!=T[x];)T[x+1]+=T[x]>>>16,T[x]&=65535,x++}function S(T,x){this.g=T,this.h=x}function N(T,x){if(E(x))throw Error("division by zero");if(E(T))return new S(m,m);if(R(T))return x=N(A(T),x),new S(A(x.g),A(x.h));if(R(x))return x=N(T,A(x)),new S(A(x.g),x.h);if(30<T.g.length){if(R(T)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var I=g,k=x;0>=k.l(T);)I=B(I),k=B(k);var P=U(I,1),j=U(k,1);for(k=U(k,2),I=U(I,2);!E(k);){var b=j.add(k);0>=b.l(T)&&(P=P.add(I),j=b),k=U(k,1),I=U(I,1)}return x=w(T,P.j(x)),new S(P,x)}for(P=m;0<=T.l(x);){for(I=Math.max(1,Math.floor(T.m()/x.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),j=d(I),b=j.j(x);R(b)||0<b.l(T);)I-=k,j=d(I),b=j.j(x);E(j)&&(j=g),P=P.add(j),T=w(T,b)}return new S(P,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)&T.i(k);return new a(I,this.h&T.h)},t.or=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)|T.i(k);return new a(I,this.h|T.h)},t.xor=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],k=0;k<x;k++)I[k]=this.i(k)^T.i(k);return new a(I,this.h^T.h)};function B(T){for(var x=T.g.length+1,I=[],k=0;k<x;k++)I[k]=T.i(k)<<1|T.i(k-1)>>>31;return new a(I,T.h)}function U(T,x){var I=x>>5;x%=32;for(var k=T.g.length-I,P=[],j=0;j<k;j++)P[j]=0<x?T.i(j+I)>>>x|T.i(j+I+1)<<32-x:T.i(j+I);return new a(P,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Pr=a}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RE,xa,PE,Fl,Yh,jE,DE,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,p){return o==Array.prototype||o==Object.prototype||(o[h]=p.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof yl=="object"&&yl];for(var h=0;h<o.length;++h){var p=o[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var p=r;o=o.split(".");for(var y=0;y<o.length-1;y++){var D=o[y];if(!(D in p))break e;p=p[D]}o=o[o.length-1],y=p[o],h=h(y),h!=y&&h!=null&&e(p,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var p=0,y=!1,D={next:function(){if(!y&&p<o.length){var O=p++;return{value:h(O,o[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function f(o,h,p){return o.call.apply(o.bind,arguments)}function m(o,h,p){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),o.apply(h,D)}}return function(){return o.apply(h,arguments)}}function g(o,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function _(o,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function E(o,h){function p(){}p.prototype=h.prototype,o.aa=h.prototype,o.prototype=new p,o.prototype.constructor=o,o.Qb=function(y,D,O){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return h.prototype[D].apply(y,W)}}function R(o){const h=o.length;if(0<h){const p=Array(h);for(let y=0;y<h;y++)p[y]=o[y];return p}return[]}function A(o,h){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(u(y)){const D=o.length||0,O=y.length||0;o.length=D+O;for(let W=0;W<O;W++)o[D+W]=y[W]}else o.push(y)}}class w{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(o){return/^[\s\xa0]*$/.test(o)}function S(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var B=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function U(o,h,p){for(const y in o)h.call(p,o[y],y,o)}function T(o,h){for(const p in o)h.call(void 0,o[p],p,o)}function x(o){const h={};for(const p in o)h[p]=o[p];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(o,h){let p,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(p in y)o[p]=y[p];for(let O=0;O<I.length;O++)p=I[O],Object.prototype.hasOwnProperty.call(y,p)&&(o[p]=y[p])}}function P(o){var h=1;o=o.split(":");const p=[];for(;0<h&&o.length;)p.push(o.shift()),h--;return o.length&&p.push(o.join(":")),p}function j(o){l.setTimeout(()=>{throw o},0)}function b(){var o=ee;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class Y{constructor(){this.h=this.g=null}add(h,p){const y=ce.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var ce=new w(()=>new St,o=>o.reset());class St{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,G=!1,ee=new Y,te=()=>{const o=l.Promise.resolve(void 0);ze=()=>{o.then(xe)}};var xe=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(p){j(p)}var h=ce;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}G=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return o}();function de(o,h){if(F.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var p=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(B){e:{try{N(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=o.fromElement:p=="mouseout"&&(h=o.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ve[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&de.aa.h.call(this)}}E(de,F);var ve={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),gt=0;function zi(o,h,p,y,D){this.listener=o,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=D,this.key=++gt,this.da=this.fa=!1}function Ps(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function js(o){this.src=o,this.g={},this.h=0}js.prototype.add=function(o,h,p,y,D){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var W=Hi(o,h,y,D);return-1<W?(h=o[W],p||(h.fa=!1)):(h=new zi(h,this.src,O,!!y,D),h.fa=p,o.push(h)),h};function $i(o,h){var p=h.type;if(p in o.g){var y=o.g[p],D=Array.prototype.indexOf.call(y,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(y,D,1),O&&(Ps(h),o.g[p].length==0&&(delete o.g[p],o.h--))}}function Hi(o,h,p,y){for(var D=0;D<o.length;++D){var O=o[D];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==y)return D}return-1}var V="closure_lm_"+(1e6*Math.random()|0),M={};function K(o,h,p,y,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)K(o,h[O],p,y,D);return null}return p=xp(p),o&&o[ie]?o.K(h,p,d(y)?!!y.capture:!1,D):_e(o,h,p,!1,y,D)}function _e(o,h,p,y,D,O){if(!h)throw Error("Invalid event type");var W=d(D)?!!D.capture:!!D,Ee=ju(o);if(Ee||(o[V]=Ee=new js(o)),p=Ee.add(h,p,y,W,O),p.proxy)return p;if(y=Dt(),p.proxy=y,y.src=o,y.listener=p,o.addEventListener)H||(D=W),D===void 0&&(D=!1),o.addEventListener(h.toString(),y,D);else if(o.attachEvent)o.attachEvent(yp(h.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Dt(){function o(p){return h.call(o.src,o.listener,p)}const h=Lb;return o}function Ds(o,h,p,y,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)Ds(o,h[O],p,y,D);else y=d(y)?!!y.capture:!!y,p=xp(p),o&&o[ie]?(o=o.i,h=String(h).toString(),h in o.g&&(O=o.g[h],p=Hi(O,p,y,D),-1<p&&(Ps(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete o.g[h],o.h--)))):o&&(o=ju(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Hi(h,p,y,D)),(p=-1<o?h[o]:null)&&Wi(p))}function Wi(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[ie])$i(h.i,o);else{var p=o.type,y=o.proxy;h.removeEventListener?h.removeEventListener(p,y,o.capture):h.detachEvent?h.detachEvent(yp(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=ju(h))?($i(p,o),p.h==0&&(p.src=null,h[V]=null)):Ps(o)}}}function yp(o){return o in M?M[o]:M[o]="on"+o}function Lb(o,h){if(o.da)o=!0;else{h=new de(h,this);var p=o.listener,y=o.ha||o.src;o.fa&&Wi(o),o=p.call(y,h)}return o}function ju(o){return o=o[V],o instanceof js?o:null}var Du="__closure_events_fn_"+(1e9*Math.random()>>>0);function xp(o){return typeof o=="function"?o:(o[Du]||(o[Du]=function(h){return o.handleEvent(h)}),o[Du])}function it(){q.call(this),this.i=new js(this),this.M=this,this.F=null}E(it,q),it.prototype[ie]=!0,it.prototype.removeEventListener=function(o,h,p,y){Ds(this,o,h,p,y)};function vt(o,h){var p,y=o.F;if(y)for(p=[];y;y=y.F)p.push(y);if(o=o.M,y=h.type||h,typeof h=="string")h=new F(h,o);else if(h instanceof F)h.target=h.target||o;else{var D=h;h=new F(y,o),k(h,D)}if(D=!0,p)for(var O=p.length-1;0<=O;O--){var W=h.g=p[O];D=Vo(W,y,!0,h)&&D}if(W=h.g=o,D=Vo(W,y,!0,h)&&D,D=Vo(W,y,!1,h)&&D,p)for(O=0;O<p.length;O++)W=h.g=p[O],D=Vo(W,y,!1,h)&&D}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var p=o.g[h],y=0;y<p.length;y++)Ps(p[y]);delete o.g[h],o.h--}}this.F=null},it.prototype.K=function(o,h,p,y){return this.i.add(String(o),h,!1,p,y)},it.prototype.L=function(o,h,p,y){return this.i.add(String(o),h,!0,p,y)};function Vo(o,h,p,y){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var W=h[O];if(W&&!W.da&&W.capture==p){var Ee=W.listener,Xe=W.ha||W.src;W.fa&&$i(o.i,W),D=Ee.call(Xe,y)!==!1&&D}}return D&&!y.defaultPrevented}function _p(o,h,p){if(typeof o=="function")p&&(o=g(o,p));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function wp(o){o.g=_p(()=>{o.g=null,o.i&&(o.i=!1,wp(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class Vb extends q{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(o){q.call(this),this.h=o,this.g={}}E(Gi,q);var Ep=[];function bp(o){U(o.g,function(h,p){this.g.hasOwnProperty(p)&&Wi(h)},o),o.g={}}Gi.prototype.N=function(){Gi.aa.N.call(this),bp(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ou=l.JSON.stringify,Ub=l.JSON.parse,Fb=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Mu(){}Mu.prototype.h=null;function Sp(o){return o.h||(o.h=o.i())}function Cp(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lu(){F.call(this,"d")}E(Lu,F);function Vu(){F.call(this,"c")}E(Vu,F);var Yr={},Tp=null;function Uo(){return Tp=Tp||new it}Yr.La="serverreachability";function Ip(o){F.call(this,Yr.La,o)}E(Ip,F);function Ki(o){const h=Uo();vt(h,new Ip(h))}Yr.STAT_EVENT="statevent";function kp(o,h){F.call(this,Yr.STAT_EVENT,o),this.stat=h}E(kp,F);function yt(o){const h=Uo();vt(h,new kp(h,o))}Yr.Ma="timingevent";function Np(o,h){F.call(this,Yr.Ma,o),this.size=h}E(Np,F);function Qi(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function Bb(o,h,p,y,D,O){o.info(function(){if(o.g)if(O)for(var W="",Ee=O.split("&"),Xe=0;Xe<Ee.length;Xe++){var ge=Ee[Xe].split("=");if(1<ge.length){var at=ge[0];ge=ge[1];var ot=at.split("_");W=2<=ot.length&&ot[1]=="type"?W+(at+"="+ge+"&"):W+(at+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+h+`
`+p+`
`+W})}function zb(o,h,p,y,D,O,W){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+h+`
`+p+`
`+O+" "+W})}function Os(o,h,p,y){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Hb(o,p)+(y?" "+y:"")})}function $b(o,h){o.info(function(){return"TIMEOUT: "+h})}Ji.prototype.info=function(){};function Hb(o,h){if(!o.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(o=0;o<p.length;o++)if(Array.isArray(p[o])){var y=p[o];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return Ou(p)}catch{return h}}var Fo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ap={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uu;function Bo(){}E(Bo,Mu),Bo.prototype.g=function(){return new XMLHttpRequest},Bo.prototype.i=function(){return{}},Uu=new Bo;function rr(o,h,p,y){this.j=o,this.i=h,this.l=p,this.R=y||1,this.U=new Gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rp}function Rp(){this.i=null,this.g="",this.h=!1}var Pp={},Fu={};function Bu(o,h,p){o.L=1,o.v=Wo(Rn(h)),o.m=p,o.P=!0,jp(o,null)}function jp(o,h){o.F=Date.now(),zo(o),o.A=Rn(o.v);var p=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),qp(p.i,"t",y),o.C=0,p=o.j.J,o.h=new Rp,o.g=dg(o.j,p?h:null,!o.m),0<o.O&&(o.M=new Vb(g(o.Y,o,o.g),o.O)),h=o.U,p=o.g,y=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(Ep[0]=D.toString()),D=Ep);for(var O=0;O<D.length;O++){var W=K(p,D[O],y||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=o.H?x(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Ki(),Bb(o.i,o.u,o.A,o.l,o.R,o.m)}rr.prototype.ca=function(o){o=o.target;const h=this.M;h&&Pn(o)==3?h.j():this.Y(o)},rr.prototype.Y=function(o){try{if(o==this.g)e:{const ot=Pn(this.g);var h=this.g.Ba();const Vs=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||eg(this.g)))){this.J||ot!=4||h==7||(h==8||0>=Vs?Ki(3):Ki(2)),zu(this);var p=this.g.Z();this.X=p;t:if(Dp(this)){var y=eg(this.g);o="";var D=y.length,O=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),Yi(this);var W="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,o+=this.h.i.decode(y[h],{stream:!(O&&h==D-1)});y.length=0,this.h.g+=o,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,zb(this.i,this.u,this.A,this.l,this.R,ot,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Xe=this.g;if((Ee=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ee)){var ge=Ee;break t}}ge=null}if(p=ge)Os(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$u(this,p);else{this.o=!1,this.s=3,yt(12),Xr(this),Yi(this);break e}}if(this.P){p=!0;let en;for(;!this.J&&this.C<W.length;)if(en=Wb(this,W),en==Fu){ot==4&&(this.s=4,yt(14),p=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Pp){this.s=4,yt(15),Os(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Os(this.i,this.l,en,null),$u(this,en);if(Dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||W.length!=0||this.h.h||(this.s=1,yt(16),p=!1),this.o=this.o&&p,!p)Os(this.i,this.l,W,"[Invalid Chunked Response]"),Xr(this),Yi(this);else if(0<W.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Qu(at),at.M=!0,yt(11))}}else Os(this.i,this.l,W,null),$u(this,W);ot==4&&Xr(this),this.o&&!this.J&&(ot==4?og(this.j,this):(this.o=!1,zo(this)))}else lS(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Xr(this),Yi(this)}}}catch{}finally{}};function Dp(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Wb(o,h){var p=o.C,y=h.indexOf(`
`,p);return y==-1?Fu:(p=Number(h.substring(p,y)),isNaN(p)?Pp:(y+=1,y+p>h.length?Fu:(h=h.slice(y,y+p),o.C=y+p,h)))}rr.prototype.cancel=function(){this.J=!0,Xr(this)};function zo(o){o.S=Date.now()+o.I,Op(o,o.I)}function Op(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Qi(g(o.ba,o),h)}function zu(o){o.B&&(l.clearTimeout(o.B),o.B=null)}rr.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?($b(this.i,this.A),this.L!=2&&(Ki(),yt(17)),Xr(this),this.s=2,Yi(this)):Op(this,this.S-o)};function Yi(o){o.j.G==0||o.J||og(o.j,o)}function Xr(o){zu(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,bp(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function $u(o,h){try{var p=o.j;if(p.G!=0&&(p.g==o||Hu(p.h,o))){if(!o.K&&Hu(p.h,o)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<o.F)Yo(p),Qo(p);else break e;Ku(p),yt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Qi(g(p.Za,p),6e3));if(1>=Vp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else es(p,11)}else if((o.K||p.g==o)&&Yo(p),!v(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let ge=D[h];if(p.T=ge[0],ge=ge[1],p.G==2)if(ge[0]=="c"){p.K=ge[1],p.ia=ge[2];const at=ge[3];at!=null&&(p.la=at,p.j.info("VER="+p.la));const ot=ge[4];ot!=null&&(p.Aa=ot,p.j.info("SVER="+p.Aa));const Vs=ge[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(y=1.5*Vs,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const en=o.g;if(en){const Zo=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var O=y.h;O.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Wu(O,O.h),O.h=null))}if(y.D){const Ju=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Ju&&(y.ya=Ju,Se(y.I,y.D,Ju))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-o.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var W=o;if(y.qa=ug(y,y.J?y.ia:null,y.W),W.K){Up(y.h,W);var Ee=W,Xe=y.L;Xe&&(Ee.I=Xe),Ee.B&&(zu(Ee),zo(Ee)),y.g=W}else ig(y);0<p.i.length&&Jo(p)}else ge[0]!="stop"&&ge[0]!="close"||es(p,7);else p.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?es(p,7):qu(p):ge[0]!="noop"&&p.l&&p.l.ta(ge),p.v=0)}}Ki(4)}catch{}}var Gb=class{constructor(o,h){this.g=o,this.map=h}};function Mp(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Vp(o){return o.h?1:o.g?o.g.size:0}function Hu(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Wu(o,h){o.g?o.g.add(h):o.h=h}function Up(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Mp.prototype.cancel=function(){if(this.i=Fp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Fp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const p of o.g.values())h=h.concat(p.D);return h}return R(o.i)}function qb(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],p=o.length,y=0;y<p;y++)h.push(o[y]);return h}h=[],p=0;for(y in o)h[p++]=o[y];return h}function Kb(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var p=0;p<o;p++)h.push(p);return h}h=[],p=0;for(const y in o)h[p++]=y;return h}}}function Bp(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var p=Kb(o),y=qb(o),D=y.length,O=0;O<D;O++)h.call(void 0,y[O],p&&p[O],o)}var zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qb(o,h){if(o){o=o.split("&");for(var p=0;p<o.length;p++){var y=o[p].indexOf("="),D=null;if(0<=y){var O=o[p].substring(0,y);D=o[p].substring(y+1)}else O=o[p];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Zr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Zr){this.h=o.h,$o(this,o.j),this.o=o.o,this.g=o.g,Ho(this,o.s),this.l=o.l;var h=o.i,p=new ea;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),$p(this,p),this.m=o.m}else o&&(h=String(o).match(zp))?(this.h=!1,$o(this,h[1]||"",!0),this.o=Xi(h[2]||""),this.g=Xi(h[3]||"",!0),Ho(this,h[4]),this.l=Xi(h[5]||"",!0),$p(this,h[6]||"",!0),this.m=Xi(h[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}Zr.prototype.toString=function(){var o=[],h=this.j;h&&o.push(Zi(h,Hp,!0),":");var p=this.g;return(p||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Zi(h,Hp,!0),"@"),o.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&o.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Zi(p,p.charAt(0)=="/"?Xb:Yb,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Zi(p,eS)),o.join("")};function Rn(o){return new Zr(o)}function $o(o,h,p){o.j=p?Xi(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Ho(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function $p(o,h,p){h instanceof ea?(o.i=h,tS(o.i,o.h)):(p||(h=Zi(h,Zb)),o.i=new ea(h,o.h))}function Se(o,h,p){o.i.set(h,p)}function Wo(o){return Se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Xi(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Zi(o,h,p){return typeof o=="string"?(o=encodeURI(o).replace(h,Jb),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Jb(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Hp=/[#\/\?@]/g,Yb=/[#\?:]/g,Xb=/[#\?]/g,Zb=/[#\?@]/g,eS=/#/g;function ea(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function sr(o){o.g||(o.g=new Map,o.h=0,o.i&&Qb(o.i,function(h,p){o.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ea.prototype,t.add=function(o,h){sr(this),this.i=null,o=Ms(this,o);var p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(h),this.h+=1,this};function Wp(o,h){sr(o),h=Ms(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Gp(o,h){return sr(o),h=Ms(o,h),o.g.has(h)}t.forEach=function(o,h){sr(this),this.g.forEach(function(p,y){p.forEach(function(D){o.call(h,D,y,this)},this)},this)},t.na=function(){sr(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){const D=o[y];for(let O=0;O<D.length;O++)p.push(h[y])}return p},t.V=function(o){sr(this);let h=[];if(typeof o=="string")Gp(this,o)&&(h=h.concat(this.g.get(Ms(this,o))));else{o=Array.from(this.g.values());for(let p=0;p<o.length;p++)h=h.concat(o[p])}return h},t.set=function(o,h){return sr(this),this.i=null,o=Ms(this,o),Gp(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function qp(o,h,p){Wp(o,h),0<p.length&&(o.i=null,o.g.set(Ms(o,h),R(p)),o.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];const O=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var D=O;W[y]!==""&&(D+="="+encodeURIComponent(String(W[y]))),o.push(D)}}return this.i=o.join("&")};function Ms(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function tS(o,h){h&&!o.j&&(sr(o),o.i=null,o.g.forEach(function(p,y){var D=y.toLowerCase();y!=D&&(Wp(this,y),qp(this,D,p))},o)),o.j=h}function nS(o,h){const p=new Ji;if(l.Image){const y=new Image;y.onload=_(ir,p,"TestLoadImage: loaded",!0,h,y),y.onerror=_(ir,p,"TestLoadImage: error",!1,h,y),y.onabort=_(ir,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=_(ir,p,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else h(!1)}function rS(o,h){const p=new Ji,y=new AbortController,D=setTimeout(()=>{y.abort(),ir(p,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:y.signal}).then(O=>{clearTimeout(D),O.ok?ir(p,"TestPingServer: ok",!0,h):ir(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ir(p,"TestPingServer: error",!1,h)})}function ir(o,h,p,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(p)}catch{}}function sS(){this.g=new Fb}function iS(o,h,p){const y=p||"";try{Bp(o,function(D,O){let W=D;d(D)&&(W=Ou(D)),h.push(y+O+"="+encodeURIComponent(W))})}catch(D){throw h.push(y+"type="+encodeURIComponent("_badmap")),D}}function Go(o){this.l=o.Ub||null,this.j=o.eb||!1}E(Go,Mu),Go.prototype.g=function(){return new qo(this.l,this.j)},Go.prototype.i=function(o){return function(){return o}}({});function qo(o,h){it.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(qo,it),t=qo.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,na(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kp(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kp(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?ta(this):na(this),this.readyState==3&&Kp(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,ta(this))},t.Qa=function(o){this.g&&(this.response=o,ta(this))},t.ga=function(){this.g&&ta(this)};function ta(o){o.readyState=4,o.l=null,o.j=null,o.v=null,na(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=h.next();return o.join(`\r
`)};function na(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Qp(o){let h="";return U(o,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Gu(o,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Qp(p),typeof o=="string"?p!=null&&encodeURIComponent(String(p)):Se(o,h,p))}function Oe(o){it.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Oe,it);var aS=/^https?$/i,oS=["POST","PUT"];t=Oe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uu.g(),this.v=this.o?Sp(this.o):Sp(Uu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(O){Jp(this,O);return}if(o=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)p.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())p.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(oS,h,void 0))||y||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of p)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zp(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){Jp(this,O)}};function Jp(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Yp(o),Ko(o)}function Yp(o){o.A||(o.A=!0,vt(o,"complete"),vt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,vt(this,"complete"),vt(this,"abort"),Ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xp(this):this.bb())},t.bb=function(){Xp(this)};function Xp(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Pn(o)!=4||o.Z()!=2)){if(o.u&&Pn(o)==4)_p(o.Ea,0,o);else if(vt(o,"readystatechange"),Pn(o)==4){o.h=!1;try{const W=o.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=W===0){var D=String(o.D).match(zp)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),y=!aS.test(D?D.toLowerCase():"")}p=y}if(p)vt(o,"complete"),vt(o,"success");else{o.m=6;try{var O=2<Pn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",Yp(o)}}finally{Ko(o)}}}}function Ko(o,h){if(o.g){Zp(o);const p=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||vt(o,"ready");try{p.onreadystatechange=y}catch{}}}function Zp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Pn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),Ub(h)}};function eg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function lS(o){const h={};o=(o.g&&2<=Pn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(v(o[y]))continue;var p=P(o[y]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[D]||[];h[D]=O,O.push(p)}T(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(o,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||h}function tg(o){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,o),this.cb=ra("retryDelaySeedMs",1e4,o),this.Wa=ra("forwardChannelMaxRetries",2,o),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Mp(o&&o.concurrentRequestLimit),this.Da=new sS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tg.prototype,t.la=8,t.G=1,t.connect=function(o,h,p,y){yt(0),this.W=o,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=ug(this,null,this.W),Jo(this)};function qu(o){if(ng(o),o.G==3){var h=o.U++,p=Rn(o.I);if(Se(p,"SID",o.K),Se(p,"RID",h),Se(p,"TYPE","terminate"),sa(o,p),h=new rr(o,o.j,h),h.L=2,h.v=Wo(Rn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=dg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),zo(h)}cg(o)}function Qo(o){o.g&&(Qu(o),o.g.cancel(),o.g=null)}function ng(o){Qo(o),o.u&&(l.clearTimeout(o.u),o.u=null),Yo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Jo(o){if(!Lp(o.h)&&!o.s){o.s=!0;var h=o.Ga;ze||te(),G||(ze(),G=!0),ee.add(h,o),o.B=0}}function cS(o,h){return Vp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Qi(g(o.Ga,o,h),lg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new rr(this,this.j,o);let O=this.o;if(this.S&&(O?(O=x(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=sg(this,D,h),p=Rn(this.I),Se(p,"RID",o),Se(p,"CVER",22),this.D&&Se(p,"X-HTTP-Session-Id",this.D),sa(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(Qp(O)))+"&"+h:this.m&&Gu(p,this.m,O)),Wu(this.h,D),this.Ua&&Se(p,"TYPE","init"),this.P?(Se(p,"$req",h),Se(p,"SID","null"),D.T=!0,Bu(D,p,null)):Bu(D,p,h),this.G=2}}else this.G==3&&(o?rg(this,o):this.i.length==0||Lp(this.h)||rg(this))};function rg(o,h){var p;h?p=h.l:p=o.U++;const y=Rn(o.I);Se(y,"SID",o.K),Se(y,"RID",p),Se(y,"AID",o.T),sa(o,y),o.m&&o.o&&Gu(y,o.m,o.o),p=new rr(o,o.j,p,o.B+1),o.m===null&&(p.H=o.o),h&&(o.i=h.D.concat(o.i)),h=sg(o,p,1e3),p.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Wu(o.h,p),Bu(p,y,h)}function sa(o,h){o.H&&U(o.H,function(p,y){Se(h,y,p)}),o.l&&Bp({},function(p,y){Se(h,y,p)})}function sg(o,h,p){p=Math.min(o.i.length,p);var y=o.l?g(o.l.Na,o.l,o):null;e:{var D=o.i;let O=-1;for(;;){const W=["count="+p];O==-1?0<p?(O=D[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let Ee=!0;for(let Xe=0;Xe<p;Xe++){let ge=D[Xe].g;const at=D[Xe].map;if(ge-=O,0>ge)O=Math.max(0,D[Xe].g-100),Ee=!1;else try{iS(at,W,"req"+ge+"_")}catch{y&&y(at)}}if(Ee){y=W.join("&");break e}}}return o=o.i.splice(0,p),h.D=o,y}function ig(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;ze||te(),G||(ze(),G=!0),ee.add(h,o),o.v=0}}function Ku(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Qi(g(o.Fa,o),lg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,ag(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Qi(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Qo(this),ag(this))};function Qu(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function ag(o){o.g=new rr(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=Rn(o.qa);Se(h,"RID","rpc"),Se(h,"SID",o.K),Se(h,"AID",o.T),Se(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&Se(h,"TO",o.ja),Se(h,"TYPE","xmlhttp"),sa(o,h),o.m&&o.o&&Gu(h,o.m,o.o),o.L&&(o.g.I=o.L);var p=o.g;o=o.ia,p.L=1,p.v=Wo(Rn(h)),p.m=null,p.P=!0,jp(p,o)}t.Za=function(){this.C!=null&&(this.C=null,Qo(this),Ku(this),yt(19))};function Yo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function og(o,h){var p=null;if(o.g==h){Yo(o),Qu(o),o.g=null;var y=2}else if(Hu(o.h,h))p=h.D,Up(o.h,h),y=1;else return;if(o.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=o.B;y=Uo(),vt(y,new Np(y,p)),Jo(o)}else ig(o);else if(D=h.s,D==3||D==0&&0<h.X||!(y==1&&cS(o,h)||y==2&&Ku(o)))switch(p&&0<p.length&&(h=o.h,h.i=h.i.concat(p)),D){case 1:es(o,5);break;case 4:es(o,10);break;case 3:es(o,6);break;default:es(o,2)}}}function lg(o,h){let p=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(p*=2),p*h}function es(o,h){if(o.j.info("Error code "+h),h==2){var p=g(o.fb,o),y=o.Xa;const D=!y;y=new Zr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||$o(y,"https"),Wo(y),D?nS(y.toString(),p):rS(y.toString(),p)}else yt(2);o.G=0,o.l&&o.l.sa(h),cg(o),ng(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function cg(o){if(o.G=0,o.ka=[],o.l){const h=Fp(o.h);(h.length!=0||o.i.length!=0)&&(A(o.ka,h),A(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function ug(o,h,p){var y=p instanceof Zr?Rn(p):new Zr(p);if(y.g!="")h&&(y.g=h+"."+y.g),Ho(y,y.s);else{var D=l.location;y=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new Zr(null);y&&$o(O,y),h&&(O.g=h),D&&Ho(O,D),p&&(O.l=p),y=O}return p=o.D,h=o.ya,p&&h&&Se(y,p,h),Se(y,"VER",o.la),sa(o,y),y}function dg(o,h,p){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Oe(new Go({eb:p})):new Oe(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hg(){}t=hg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xo(){}Xo.prototype.g=function(o,h){return new Ot(o,h)};function Ot(o,h){it.call(this),this.g=new tg(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!v(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Ls(this)}E(Ot,it),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){qu(this.g)},Ot.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.u&&(p={},p.__data__=Ou(o),o=p);h.i.push(new Gb(h.Ya++,o)),h.G==3&&Jo(h)},Ot.prototype.N=function(){this.g.l=null,delete this.j,qu(this.g),delete this.g,Ot.aa.N.call(this)};function fg(o){Lu.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const p in h){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}E(fg,Lu);function mg(){Vu.call(this),this.status=1}E(mg,Vu);function Ls(o){this.g=o}E(Ls,hg),Ls.prototype.ua=function(){vt(this.g,"a")},Ls.prototype.ta=function(o){vt(this.g,new fg(o))},Ls.prototype.sa=function(o){vt(this.g,new mg)},Ls.prototype.ra=function(){vt(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,OE=function(){return new Xo},DE=function(){return Uo()},jE=Yr,Yh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,Fl=Fo,Ap.COMPLETE="complete",PE=Ap,Cp.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",it.prototype.listen=it.prototype.K,xa=Cp,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,RE=Oe}).apply(typeof yl<"u"?yl:typeof self<"u"?self:typeof window<"u"?window:{});const _y="@firebase/firestore",wy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new lu("@firebase/firestore");function Bs(){return _s.logLevel}function Q(t,...e){if(_s.logLevel<=he.DEBUG){const n=e.map(jm);_s.debug(`Firestore (${Li}): ${t}`,...n)}}function Qn(t,...e){if(_s.logLevel<=he.ERROR){const n=e.map(jm);_s.error(`Firestore (${Li}): ${t}`,...n)}}function Ur(t,...e){if(_s.logLevel<=he.WARN){const n=e.map(jm);_s.warn(`Firestore (${Li}): ${t}`,...n)}}function jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ME(t,r,n)}function ME(t,e,n){let r=`FIRESTORE (${Li}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qn(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ME(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class vP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yP{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new LE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class xP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _P{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new xP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ey(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Xh(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return le(r,s);{const i=VE(),a=bP(i.encode(by(t,n)),i.encode(by(e,n)));return a!==0?a:le(r,s)}}n+=r>65535?2:1}return le(t.length,e.length)}function by(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function bP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return le(t[n],e[n]);return le(t.length,e.length)}function Si(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return le(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):Xh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}}class Ae extends gn{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const SP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends gn{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return SP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sy}static keyField(){return new tt([Sy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ae.fromString(e))}static fromName(e){return new Z(Ae.fromString(e).popFirst(5))}static empty(){return new Z(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TP(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cy(t){if(!Z.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function uo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Om(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ao(t,e){if(!UE(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-62135596800,Iy=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Iy);return new Te(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ty)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iy}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ao(e,Te._jsonSchema))return new Te(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:Be("string",Te._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Te(0,0))}static max(){return new ae(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function IP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Fr(s,Z.empty(),e)}function kP(t){return new Fr(t.readTime,t.key,ho)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(ae.min(),Z.empty(),ho)}static max(){return new Fr(ae.max(),Z.empty(),ho)}}function NP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==AP)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function PP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ui(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pu.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-1;function gu(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function jP(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="";function DP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ky(e)),e=OP(t.get(n),e);return ky(e)}function OP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case FE:n+="";break;default:n+=i}}return n}function ky(t){return t+FE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xl(this.root,e,this.comparator,!0)}}class xl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ay(this.data.getIterator())}getIteratorFrom(e){return new Ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class Ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new on([])}unionWith(e){let n=new Ge(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Si(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zE("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const MP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=MP.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="server_timestamp",HE="__type__",WE="__previous_value__",GE="__local_write_time__";function Lm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[HE])===null||n===void 0?void 0:n.stringValue)===$E}function vu(t){const e=t.mapValue.fields[WE];return Lm(e)?vu(e):e}function fo(t){const e=Br(t.mapValue.fields[GE].timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r,s,i,a,l,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Ac="(default)";class mo{constructor(e,n){this.projectId=e,this.database=n||Ac}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===Ac}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__type__",VP="__max__",_l={mapValue:{}},KE="__vector__",Rc="value";function $r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lm(t)?4:FP(t)?9007199254740991:UP(t)?10:11:se(28295,{value:t})}function In(t,e){if(t===e)return!0;const n=$r(t);if(n!==$r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Br(s.timestampValue),l=Br(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zr(s.bytesValue).isEqual(zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Le(s.doubleValue),l=Le(i.doubleValue);return a===l?Nc(a)===Nc(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Si(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ny(a)!==Ny(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!In(a[u],l[u])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function po(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function Ci(t,e){if(t===e)return 0;const n=$r(t),r=$r(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Le(i.integerValue||i.doubleValue),u=Le(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ry(t.timestampValue,e.timestampValue);case 4:return Ry(fo(t),fo(e));case 5:return Xh(t.stringValue,e.stringValue);case 6:return function(i,a){const l=zr(i),u=zr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=le(Le(i.latitude),Le(a.latitude));return l!==0?l:le(Le(i.longitude),Le(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Py(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,f;const m=i.fields||{},g=a.fields||{},_=(l=m[Rc])===null||l===void 0?void 0:l.arrayValue,E=(u=g[Rc])===null||u===void 0?void 0:u.arrayValue,R=le(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Py(_,E)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===_l.mapValue&&a===_l.mapValue)return 0;if(i===_l.mapValue)return 1;if(a===_l.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Xh(u[m],f[m]);if(g!==0)return g;const _=Ci(l[u[m]],d[f[m]]);if(_!==0)return _}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw se(23264,{le:n})}}function Ry(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Br(t),r=Br(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function Py(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ci(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function Ti(t){return Zh(t)}function Zh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Zh(n.fields[a])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function Bl(t){switch($r(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vu(t);return e?16+Bl(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ks(r.fields,(i,a)=>{s+=i.length+Bl(a)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function ef(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function jy(t){return!!t&&"nullValue"in t}function Dy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zl(t){return!!t&&"mapValue"in t}function UP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qE])===null||n===void 0?void 0:n.stringValue)===KE}function Oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(n)}setAll(e){let n=tt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Oa(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ks(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Gt(Oa(this.value))}}function QE(t){const e=[];return ks(t.fields,(n,r)=>{const s=new tt([n]);if(zl(r)){const i=QE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ae.min(),ae.min(),ae.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ae.min(),ae.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ae.min(),ae.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.position=e,this.inclusive=n}}function Oy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=Ci(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function My(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n="asc"){this.field=e,this.dir=n}}function BP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{}class He extends JE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $P(e,n,r):n==="array-contains"?new GP(e,r):n==="in"?new qP(e,r):n==="not-in"?new KP(e,r):n==="array-contains-any"?new QP(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HP(e,r):new WP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ci(n,this.value)):n!==null&&$r(this.value)===$r(n)&&this.matchesComparison(Ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends JE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new kn(e,n)}matches(e){return YE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function YE(t){return t.op==="and"}function XE(t){return zP(t)&&YE(t)}function zP(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function tf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Ti(t.value);if(XE(t))return t.filters.map(e=>tf(e)).join(",");{const e=t.filters.map(n=>tf(n)).join(",");return`${t.op}(${e})`}}function ZE(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&ZE(a,s.filters[l]),!0):!1}(t,e):void se(19439)}function e1(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Ti(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(e1).join(" ,")+"}"}(t):"Filter"}class $P extends He{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class HP extends He{constructor(e,n){super(e,"in",n),this.keys=t1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WP extends He{constructor(e,n){super(e,"not-in",n),this.keys=t1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function t1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class GP extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&po(n.arrayValue,this.value)}}class qP extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&po(this.value.arrayValue,n)}}class KP extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!po(this.value.arrayValue,n)}}class QP extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Ly(t,e=null,n=[],r=[],s=null,i=null,a=null){return new JP(t,e,n,r,s,i,a)}function Um(t){const e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ti(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ti(r)).join(",")),e.Pe=n}return e.Pe}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!My(t.startAt,e.startAt)&&My(t.endAt,e.endAt)}function nf(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function YP(t,e,n,r,s,i,a,l){return new yu(t,e,n,r,s,i,a,l)}function Bm(t){return new yu(t)}function Vy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XP(t){return t.collectionGroup!==null}function Ma(t){const e=oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ge(tt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Te.push(new jc(i,r))}),n.has(tt.keyField().canonicalString())||e.Te.push(new jc(tt.keyField(),r))}return e.Te}function En(t){const e=oe(t);return e.Ie||(e.Ie=ZP(e,Ma(t))),e.Ie}function ZP(t,e){if(t.limitType==="F")return Ly(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new jc(s.field,i)});const n=t.endAt?new Pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pc(t.startAt.position,t.startAt.inclusive):null;return Ly(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rf(t,e,n){return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xu(t,e){return Fm(En(t),En(e))&&t.limitType===e.limitType}function n1(t){return`${Um(En(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>e1(s)).join(", ")}]`),gu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ti(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ti(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function _u(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ma(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const d=Oy(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,Ma(r),s)||r.endAt&&!function(a,l,u){const d=Oy(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,Ma(r),s))}(t,e)}function ej(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function r1(t){return(e,n)=>{let r=!1;for(const s of Ma(t)){const i=tj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function tj(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Ci(u,d):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return BE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new De(Z.comparator);function Jn(){return nj}const s1=new De(Z.comparator);function _a(...t){let e=s1;for(const n of t)e=e.insert(n.key,n);return e}function i1(t){let e=s1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return La()}function a1(){return La()}function La(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const rj=new De(Z.comparator),sj=new Ge(Z.comparator);function fe(...t){let e=sj;for(const n of t)e=e.add(n);return e}const ij=new Ge(le);function aj(){return ij}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function o1(t){return{integerValue:""+t}}function oj(t,e){return jP(e)?o1(e):zm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this._=void 0}}function lj(t,e,n){return t instanceof Dc?function(s,i){const a={fields:{[HE]:{stringValue:$E},[GE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lm(i)&&(i=vu(i)),i&&(a.fields[WE]=i),{mapValue:a}}(n,e):t instanceof go?c1(t,e):t instanceof vo?u1(t,e):function(s,i){const a=l1(s,i),l=Uy(a)+Uy(s.Ee);return ef(a)&&ef(s.Ee)?o1(l):zm(s.serializer,l)}(t,e)}function cj(t,e,n){return t instanceof go?c1(t,e):t instanceof vo?u1(t,e):n}function l1(t,e){return t instanceof Oc?function(r){return ef(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dc extends wu{}class go extends wu{constructor(e){super(),this.elements=e}}function c1(t,e){const n=d1(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class vo extends wu{constructor(e){super(),this.elements=e}}function u1(t,e){let n=d1(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class Oc extends wu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Uy(t){return Le(t.integerValue||t.doubleValue)}function d1(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof go&&s instanceof go||r instanceof vo&&s instanceof vo?Si(r.elements,s.elements,In):r instanceof Oc&&s instanceof Oc?In(r.Ee,s.Ee):r instanceof Dc&&s instanceof Dc}(t.transform,e.transform)}class dj{constructor(e,n){this.version=e,this.transformResults=n}}class Bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eu{}function h1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new m1(t.key,Bn.none()):new Ro(t.key,t.data,Bn.none());{const n=t.data,r=Gt.empty();let s=new Ge(tt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new As(t.key,r,new on(s.toArray()),Bn.none())}}function hj(t,e,n){t instanceof Ro?function(s,i,a){const l=s.value.clone(),u=By(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof As?function(s,i,a){if(!$l(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=By(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(f1(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof Ro?function(i,a,l,u){if(!$l(i.precondition,a))return l;const d=i.value.clone(),f=zy(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof As?function(i,a,l,u){if(!$l(i.precondition,a))return l;const d=zy(i.fieldTransforms,u,a),f=a.data;return f.setAll(f1(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return $l(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function fj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=l1(r.transform,s||null);i!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,i))}return n||null}function Fy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Si(r,s,(i,a)=>uj(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends Eu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class As extends Eu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function f1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function By(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,cj(a,l,n[s]))}return r}function zy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,lj(i,a,e))}return r}class m1 extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mj extends Eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&hj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=a1();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=h1(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Si(this.mutations,e.mutations,(n,r)=>Fy(n,r))&&Si(this.baseMutations,e.baseMutations,(n,r)=>Fy(n,r))}}class $m{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return rj}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new $m(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,me;function yj(t){switch(t){case z.OK:return se(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function p1(t){if(t===void 0)return Qn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ue.OK:return z.OK;case Ue.CANCELLED:return z.CANCELLED;case Ue.UNKNOWN:return z.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return z.INTERNAL;case Ue.UNAVAILABLE:return z.UNAVAILABLE;case Ue.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ue.NOT_FOUND:return z.NOT_FOUND;case Ue.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ue.ABORTED:return z.ABORTED;case Ue.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ue.DATA_LOSS:return z.DATA_LOSS;default:return se(39323,{code:t})}}(me=Ue||(Ue={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new Pr([4294967295,4294967295],0);function $y(t){const e=VE().encode(t),n=new AE;return n.update(e),new Uint8Array(n.digest())}function Hy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([s,i],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wa(`Invalid padding: ${n}`);if(r<0)throw new wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wa(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Pr.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Pr.fromNumber(r)));return s.compare(xj)===1&&(s=new Pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=$y(e),[r,s]=Hy(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Hm(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const n=$y(e),[r,s]=Hy(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bu(ae.min(),s,new De(le),Jn(),fe())}}class Po{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Po(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class g1{constructor(e,n){this.targetId=e,this.De=n}}class v1{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Wy{constructor(){this.ve=0,this.Ce=Gy(),this.Fe=st.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=fe(),n=fe(),r=fe();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new Po(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Gy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class _j{constructor(e){this.We=e,this.Ge=new Map,this.ze=Jn(),this.je=wl(),this.Je=wl(),this.He=new De(le)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const i=s.target;if(nf(i))if(r===0){const a=new Z(i.path);this.Xe(n,a,ft.newNoDocument(a,ae.min()))}else ye(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=zr(r).toUint8Array()}catch(u){if(u instanceof zE)return Ur("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Hm(a,s,i)}catch(u){return Ur(u instanceof wa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(n,i,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&nf(l.target)){const u=new Z(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,ft.newNoDocument(u,e))}i.Ne&&(n.set(a,i.Le()),i.ke())}});let r=fe();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new bu(e,n,this.He,this.ze,r);return this.ze=Jn(),this.je=wl(),this.Je=wl(),this.He=new De(le),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Wy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ge(le),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ge(le),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Wy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function wl(){return new De(Z.comparator)}function Gy(){return new De(Z.comparator)}const wj={asc:"ASCENDING",desc:"DESCENDING"},Ej={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bj={and:"AND",or:"OR"};class Sj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sf(t,e){return t.useProto3Json||gu(e)?e:{value:e}}function Mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cj(t,e){return Mc(t,e.toTimestamp())}function bn(t){return ye(!!t,49232),ae.fromTimestamp(function(n){const r=Br(n);return new Te(r.seconds,r.nanos)}(t))}function Wm(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function x1(t){const e=Ae.fromString(t);return ye(S1(e),10190,{key:e.toString()}),e}function of(t,e){return Wm(t.databaseId,e.path)}function Od(t,e){const n=x1(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(w1(n))}function _1(t,e){return Wm(t.databaseId,e)}function Tj(t){const e=x1(t);return e.length===4?Ae.emptyPath():w1(e)}function lf(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w1(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qy(t,e,n){return{name:of(t,e),fields:n.value.mapValue.fields}}function Ij(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string",58123),st.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),st.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?z.UNKNOWN:p1(d.code);return new X(f,d.message||"")}(a);n=new v1(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Od(t,r.document.name),i=bn(r.document.updateTime),a=r.document.createTime?bn(r.document.createTime):ae.min(),l=new Gt({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,a,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Hl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Od(t,r.document),i=r.readTime?bn(r.readTime):ae.min(),a=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Hl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Od(t,r.document),i=r.removedTargetIds||[];n=new Hl([],i,s,null)}else{if(!("filter"in e))return se(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new vj(s,i),l=r.targetId;n=new g1(l,a)}}return n}function kj(t,e){let n;if(e instanceof Ro)n={update:qy(t,e.key,e.value)};else if(e instanceof m1)n={delete:of(t,e.key)};else if(e instanceof As)n={update:qy(t,e.key,e.data),updateMask:Lj(e.fieldMask)};else{if(!(e instanceof mj))return se(16599,{Rt:e.type});n={verify:of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Dc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof go)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Oc)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw se(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Cj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function Nj(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?bn(s.updateTime):bn(i);return a.isEqual(ae.min())&&(a=bn(i)),new dj(a,s.transformResults||[])}(n,e))):[]}function Aj(t,e){return{documents:[_1(t,e.path)]}}function Rj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_1(t,s);const i=function(d){if(d.length!==0)return b1(kn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:$s(g.field),direction:Dj(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=sf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:n,parent:s}}function Pj(t){let e=Tj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=E1(m);return g instanceof kn&&XE(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(E){return new jc(Hs(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,gu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new Pc(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,_=m.values||[];return new Pc(_,g)}(n.endAt)),YP(e,s,a,i,l,"F",u,d)}function jj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hs(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hs(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hs(n.unaryFilter.field);return He.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Hs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>E1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function Dj(t){return wj[t]}function Oj(t){return Ej[t]}function Mj(t){return bj[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Hs(t){return tt.fromServerFormat(t.fieldPath)}function b1(t){return t instanceof He?function(n){if(n.op==="=="){if(Dy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(jy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(jy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:Oj(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>b1(s));return r.length===1?r[0]:{compositeFilter:{op:Mj(n.op),filters:r}}}(t):se(54877,{filter:t})}function Lj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,s,i=ae.min(),a=ae.min(),l=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.gt=e}}function Uj(t){const e=Pj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(){this.Dn=new Bj}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Fr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Bj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C1=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(C1,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ii(0)}static ur(){return new Ii(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LruGarbageCollector",zj=1048576;function Jy([t,e],[n,r]){const s=le(t,n);return s===0?le(e,r):s}class $j{constructor(e){this.Tr=e,this.buffer=new Ge(Jy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Hj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Q(Qy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ui(n)?Q(Qy,"Ignoring IndexedDB error during garbage collection: ",n):await Vi(n)}await this.Rr(3e5)})}}class Wj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(pu.ue);const r=new $j(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ky)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ky):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,i,a,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Bs()<=he.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Gj(t,e){return new Wj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Va(r.mutation,s,on.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=_a();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Jn();const a=La(),l=function(){return La()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof As)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Va(f.mutation,d,f.mutation.getFieldMask(),Te.now())):a.set(d.key,on.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new Kj(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=La();let s=new De((a,l)=>a-l),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||on.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||fe()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=a1();f.forEach(g=>{if(!i.has(g)){const _=h1(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(ls());let l=ho,u=i;return a.next(d=>L.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,fe())).next(f=>({batchId:l,changes:i1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=_a();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=_a();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(m,g){return new yu(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,ft.newInvalidDocument(f)))});let l=_a();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Va(f.mutation,d,on.empty(),Te.now()),_u(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:Uj(s.bundledQuery),readTime:bn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.overlays=new De(Z.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.wt(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=ls(),i=n.length+1,a=new Z(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ls(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ls(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return L.resolve(l)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gj(n,r));let i=this.kr.get(n);i===void 0&&(i=fe(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.qr=new Ge(qe.Qr),this.$r=new Ge(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new qe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Z(new Ae([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.$r.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Z(new Ae([])),r=new qe(n,e),s=new qe(n,e+1);let i=fe();return this.$r.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new qe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Z.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ge(qe.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new pj(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Mm:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(le);return n.forEach(s=>{const i=new qe(s,0),a=new qe(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{r=r.add(l.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const a=new qe(new Z(i),0);let l=new Ge(le);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},a),L.resolve(this.ei(l))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new qe(n,0),s=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.ni=e,this.docs=function(){return new De(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jn();const a=n.path,l=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||NP(kP(f),r)<=0||(s.has(f.key)||_u(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tD(this)}getSize(e){return L.resolve(this.size)}}class tD extends qj{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.persistence=e,this.ii=new Ns(n=>Um(n),Fm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Gm,this.targetCount=0,this._i=Ii.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ii(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.ai={},this.overlays={},this.ui=new pu(0),this.ci=!1,this.ci=!0,this.li=new Xj,this.referenceDelegate=e(this),this.hi=new nD(this),this.indexManager=new Fj,this.remoteDocumentCache=function(s){return new eD(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Vj(n),this.Ti=new Jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Zj(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new rD(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class rD extends RP{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Ai=new Gm,this.Ri=null}static Vi(e){return new qm(e)}get mi(){if(this.Ri)return this.Ri;throw se(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const s=Z.fromPath(r);return this.fi(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Lc{constructor(e,n){this.persistence=e,this.gi=new Ns(r=>DP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Gj(this,n)}static Vi(e,n){return new Lc(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bl(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Km(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return dk()?8:PP(pt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ps(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new sD;return this.ws(e,n,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,n,a,l.size)})}).next(()=>i.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(Bs()<=he.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Bs()<=he.DEBUG&&Q("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Bs()<=he.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):L.resolve())}ps(e,n){if(Vy(n))return L.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rf(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=fe(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,l);return this.Ds(n,d,a,u.readTime)?this.ps(e,rf(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,s){return Vy(n)||s.isEqual(ae.min())?L.resolve(null):this.gs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?L.resolve(null):(Bs()<=he.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zs(n)),this.vs(e,a,n,IP(s,ho)).next(l=>l))})}bs(e,n){let r=new Ge(r1(e));return n.forEach((s,i)=>{_u(e,i)&&(r=r.add(i))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,n,r){return Bs()<=he.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",zs(n)),this.gs.getDocumentsMatchingQuery(e,n,Fr.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="LocalStore",aD=3e8;class oD{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new De(le),this.Ms=new Ns(i=>Um(i),Fm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qj(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function lD(t,e,n,r){return new oD(t,e,n,r)}async function I1(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=fe();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function cD(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let _=L.resolve();return g.forEach(E=>{_=_.next(()=>f.getEntry(u,E)).next(R=>{const A=d.docVersions.get(E);ye(A!==null,48541),R.version.compareTo(A)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=fe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function k1(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function uD(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.hi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.hi.addMatchingKeys(i,f.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(st.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(m,_),function(R,A,w){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=aD?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,_,f)&&l.push(n.hi.updateTargetData(i,_))});let u=Jn(),d=fe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(dD(i,a,e.documentUpdates).next(f=>{u=f.Ls,d=f.ks})),!r.isEqual(ae.min())){const f=n.hi.getLastRemoteSnapshotVersion(i).next(m=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Fs=s,i))}function dD(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Q(Qm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ls:a,ks:s}})}function hD(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fD(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.hi.allocateTargetId(r).next(a=>(s=new _r(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function cf(t,e,n){const r=oe(t),s=r.Fs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ui(a))throw a;Q(Qm,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Yy(t,e,n){const r=oe(t);let s=ae.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=oe(u),g=m.Ms.get(f);return g!==void 0?L.resolve(m.Fs.get(g)):m.hi.getTargetData(d,f)}(r,a,En(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:ae.min(),n?i:fe())).next(l=>(mD(r,ej(e),l),{documents:l,qs:i})))}function mD(t,e,n){let r=t.xs.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.xs.set(e,r)}class Xy{constructor(){this.activeTargetIds=aj()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pD{constructor(){this.Fo=new Xy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Xy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="ConnectivityMonitor";class ex{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Q(Zy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Q(Zy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=null;function uf(){return El===null?El=function(){return 268435456+Math.round(2147483648*Math.random())}():El++,"0x"+El.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="RestConnection",vD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yD{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ac?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=uf(),l=this.Go(e,n.toUriEncodedString());Q(Md,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(l),f=Oi(d);return this.jo(e,l,u,r,f).then(m=>(Q(Md,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ur(Md,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Li}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,n){const r=vD[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class _D extends yD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,i){const a=uf();return new Promise((l,u)=>{const d=new RE;d.setWithCredentials(!0),d.listenOnce(PE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fl.NO_ERROR:const m=d.getResponseJson();Q(ut,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Fl.TIMEOUT:Q(ut,`RPC '${e}' ${a} timed out`),u(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case Fl.HTTP_ERROR:const g=d.getStatus();if(Q(ut,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const R=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(E.status);u(new X(R,E.message))}else u(new X(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new X(z.UNAVAILABLE,"Connection failed."));break;default:se(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Q(ut,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);Q(ut,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",f,r,15)})}P_(e,n,r){const s=uf(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=OE(),l=DE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(ut,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);this.T_(m);let g=!1,_=!1;const E=new xD({Ho:A=>{_?Q(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(Q(ut,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Q(ut,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Yo:()=>m.close()}),R=(A,w,v)=>{A.listen(w,S=>{try{v(S)}catch(N){setTimeout(()=>{throw N},0)}})};return R(m,xa.EventType.OPEN,()=>{_||(Q(ut,`RPC '${e}' stream ${s} transport opened.`),E.s_())}),R(m,xa.EventType.CLOSE,()=>{_||(_=!0,Q(ut,`RPC '${e}' stream ${s} transport closed`),E.__(),this.I_(m))}),R(m,xa.EventType.ERROR,A=>{_||(_=!0,Ur(ut,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),E.__(new X(z.UNAVAILABLE,"The operation could not be completed")))}),R(m,xa.EventType.MESSAGE,A=>{var w;if(!_){const v=A.data[0];ye(!!v,16349);const S=v,N=(S==null?void 0:S.error)||((w=S[0])===null||w===void 0?void 0:w.error);if(N){Q(ut,`RPC '${e}' stream ${s} received error:`,N);const B=N.status;let U=function(I){const k=Ue[I];if(k!==void 0)return p1(k)}(B),T=N.message;U===void 0&&(U=z.INTERNAL,T="Unknown error status: "+B+" with message "+N.message),_=!0,E.__(new X(U,T)),m.close()}else Q(ut,`RPC '${e}' stream ${s} received:`,v),E.a_(v)}}),R(l,jE.STAT_EVENT,A=>{A.stat===Yh.PROXY?Q(ut,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Yh.NOPROXY&&Q(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new Sj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="PersistentStream";class A1{constructor(e,n,r,s,i,a,l,u){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new N1(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Q(tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Q(tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wD extends A1{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Ij(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?bn(a.readTime):ae.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=lf(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=nf(u)?{documents:Aj(i,u)}:{query:Rj(i,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=y1(i,a.resumeToken);const d=sf(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ae.min())>0){l.readTime=Mc(i,a.snapshotVersion.toTimestamp());const d=sf(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=jj(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=lf(this.serializer),n.removeTarget=e,this.k_(n)}}class ED extends A1{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Nj(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=lf(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kj(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{}class SD extends bD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,af(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(z.UNKNOWN,i.toString())})}Jo(e,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,af(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(z.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class CD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qn(n),this._a=!1):Q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="RemoteStore";class TD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{Rs(this)&&(Q(ws,"Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.Ia.add(4),await jo(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Cu(d)}(this))})}),this.Aa=new CD(r,s)}}async function Cu(t){if(Rs(t))for(const e of t.da)await e(!0)}async function jo(t){for(const e of t.da)await e(!1)}function R1(t,e){const n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Zm(n)?Xm(n):Fi(n).x_()&&Ym(n,e))}function Jm(t,e){const n=oe(t),r=Fi(n);n.Ta.delete(e),r.x_()&&P1(n,e),n.Ta.size===0&&(r.x_()?r.B_():Rs(n)&&n.Aa.set("Unknown"))}function Ym(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fi(t).H_(e)}function P1(t,e){t.Ra.$e(e),Fi(t).Y_(e)}function Xm(t){t.Ra=new _j({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Fi(t).start(),t.Aa.aa()}function Zm(t){return Rs(t)&&!Fi(t).M_()&&t.Ta.size>0}function Rs(t){return oe(t).Ia.size===0}function j1(t){t.Ra=void 0}async function ID(t){t.Aa.set("Online")}async function kD(t){t.Ta.forEach((e,n)=>{Ym(t,e)})}async function ND(t,e){j1(t),Zm(t)?(t.Aa.la(e),Xm(t)):t.Aa.set("Unknown")}async function AD(t,e,n){if(t.Aa.set("Online"),e instanceof v1&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(t,e)}catch(r){Q(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vc(t,r)}else if(e instanceof Hl?t.Ra.Ye(e):e instanceof g1?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ae.min()))try{const r=await k1(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ta.get(d);f&&i.Ta.set(d,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const f=i.Ta.get(u);if(!f)return;i.Ta.set(u,f.withResumeToken(st.EMPTY_BYTE_STRING,f.snapshotVersion)),P1(i,u);const m=new _r(f.target,u,d,f.sequenceNumber);Ym(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(ws,"Failed to raise snapshot:",r),await Vc(t,r)}}async function Vc(t,e,n){if(!Ui(e))throw e;t.Ia.add(1),await jo(t),t.Aa.set("Offline"),n||(n=()=>k1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(ws,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Cu(t)})}function D1(t,e){return e().catch(n=>Vc(t,n,e))}async function Tu(t){const e=oe(t),n=Hr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mm;for(;RD(e);)try{const s=await hD(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,PD(e,s)}catch(s){await Vc(e,s)}O1(e)&&M1(e)}function RD(t){return Rs(t)&&t.Pa.length<10}function PD(t,e){t.Pa.push(e);const n=Hr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function O1(t){return Rs(t)&&!Hr(t).M_()&&t.Pa.length>0}function M1(t){Hr(t).start()}async function jD(t){Hr(t).na()}async function DD(t){const e=Hr(t);for(const n of t.Pa)e.X_(n.mutations)}async function OD(t,e,n){const r=t.Pa.shift(),s=$m.from(r,e,n);await D1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Tu(t)}async function MD(t,e){e&&Hr(t).Z_&&await async function(r,s){if(function(a){return yj(a)&&a!==z.ABORTED}(s.code)){const i=r.Pa.shift();Hr(r).N_(),await D1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Tu(r)}}(t,e),O1(t)&&M1(t)}async function nx(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Q(ws,"RemoteStore received new credentials");const r=Rs(n);n.Ia.add(3),await jo(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Cu(n)}async function LD(t,e){const n=oe(t);e?(n.Ia.delete(2),await Cu(n)):e||(n.Ia.add(2),await jo(n),n.Aa.set("Unknown"))}function Fi(t){return t.Va||(t.Va=function(n,r,s){const i=oe(n);return i.ia(),new wD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:ID.bind(null,t),e_:kD.bind(null,t),n_:ND.bind(null,t),J_:AD.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Zm(t)?Xm(t):t.Aa.set("Unknown")):(await t.Va.stop(),j1(t))})),t.Va}function Hr(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.ia(),new ED(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:jD.bind(null,t),n_:MD.bind(null,t),ea:DD.bind(null,t),ta:OD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Tu(t)):(await t.ma.stop(),t.Pa.length>0&&(Q(ws,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new ep(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),Ui(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{static emptySet(e){return new hi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=_a(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.fa=new De(Z.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):se(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ki{constructor(e,n,r,s,i,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ki(e,n,hi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class UD{constructor(){this.queries=sx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=sx(),i.forEach((a,l)=>{for(const u of l.wa)u.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function sx(){return new Ns(t=>n1(t),xu)}async function FD(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new VD,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=tp(a,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.wa.push(e),e.va(n.onlineState),i.ya&&e.Ca(i.ya)&&np(n)}async function BD(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zD(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&np(n)}function $D(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(e)}function np(t){t.Da.forEach(e=>{e.next()})}var df,ix;(ix=df||(df={})).Fa="default",ix.Cache="cache";class HD{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.key=e}}class V1{constructor(e){this.key=e}}class WD{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=fe(),this.mutatedKeys=fe(),this.Xa=r1(e),this.eu=new hi(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new rx,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),_=_u(this.query,m)?m:null,E=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;g&&_?g.data.isEqual(_.data)?E!==R&&(r.track({type:3,doc:_}),A=!0):this.iu(g,_)||(r.track({type:2,doc:_}),A=!0,(u&&this.Xa(_,u)>0||d&&this.Xa(_,d)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(u||d)&&(l=!0)),A&&(_?(a=a.add(_),i=R?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((f,m)=>function(_,E){const R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{At:A})}};return R(_)-R(E)}(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,a.length!==0||d?{snapshot:new ki(this.query,e.eu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=fe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new V1(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new L1(r))}),n}uu(e){this.Ha=e.qs,this.Za=fe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ki.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const rp="SyncEngine";class GD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qD{constructor(e){this.key=e,this.lu=!1}}class KD{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Ns(l=>n1(l),xu),this.Tu=new Map,this.Iu=new Set,this.du=new De(Z.comparator),this.Eu=new Map,this.Au=new Gm,this.Ru={},this.Vu=new Map,this.mu=Ii.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function QD(t,e,n=!0){const r=H1(t);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await U1(r,e,n,!0),s}async function JD(t,e){const n=H1(t);await U1(n,e,!0,!1)}async function U1(t,e,n,r){const s=await fD(t.localStore,En(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await YD(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&R1(t.remoteStore,s),l}async function YD(t,e,n,r,s){t.gu=(m,g,_)=>async function(R,A,w,v){let S=A.view.nu(w);S.Ds&&(S=await Yy(R.localStore,A.query,!1).then(({documents:T})=>A.view.nu(T,S)));const N=v&&v.targetChanges.get(A.targetId),B=v&&v.targetMismatches.get(A.targetId)!=null,U=A.view.applyChanges(S,R.isPrimaryClient,N,B);return ox(R,A.targetId,U._u),U.snapshot}(t,m,g,_);const i=await Yy(t.localStore,e,!0),a=new WD(e,i.qs),l=a.nu(i.documents),u=Po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);ox(t,n,d._u);const f=new GD(e,n,a);return t.Pu.set(e,f),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function XD(t,e,n){const r=oe(t),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(a=>!xu(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jm(r.remoteStore,s.targetId),hf(r,s.targetId)}).catch(Vi)):(hf(r,s.targetId),await cf(r.localStore,s.targetId,!0))}async function ZD(t,e){const n=oe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function eO(t,e,n){const r=oO(t);try{const s=await function(a,l){const u=oe(a),d=Te.now(),f=l.reduce((_,E)=>_.add(E.key),fe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Jn(),R=fe();return u.Os.getEntries(_,f).next(A=>{E=A,E.forEach((w,v)=>{v.isValidDocument()||(R=R.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,E)).next(A=>{m=A;const w=[];for(const v of l){const S=fj(v,m.get(v.key).overlayedDocument);S!=null&&w.push(new As(v.key,S,QE(S.value.mapValue),Bn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,w,l)}).next(A=>{g=A;const w=A.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(_,A.batchId,w)})}).then(()=>({batchId:g.batchId,changes:i1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ru[a.currentUser.toKey()];d||(d=new De(le)),d=d.insert(l,u),a.Ru[a.currentUser.toKey()]=d}(r,s.batchId,n),await Do(r,s.changes),await Tu(r.remoteStore)}catch(s){const i=tp(s,"Failed to persist write");n.reject(i)}}async function F1(t,e){const n=oe(t);try{const r=await uD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?ye(a.lu,14607):s.removedDocuments.size>0&&(ye(a.lu,42227),a.lu=!1))}),await Do(n,r,e)}catch(r){await Vi(r)}}function ax(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=oe(a);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.wa)g.va(l)&&(d=!0)}),d&&np(u)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tO(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let a=new De(Z.comparator);a=a.insert(i,ft.newNoDocument(i,ae.min()));const l=fe().add(i),u=new bu(ae.min(),new Map,new De(le),a,l);await F1(r,u),r.du=r.du.remove(i),r.Eu.delete(e),sp(r)}else await cf(r.localStore,e,!1).then(()=>hf(r,e,n)).catch(Vi)}async function nO(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await cD(n.localStore,e);z1(n,r,null),B1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Do(n,s)}catch(s){await Vi(s)}}async function rO(t,e,n){const r=oe(t);try{const s=await function(a,l){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ye(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);z1(r,e,n),B1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Do(r,s)}catch(s){await Vi(s)}}function B1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function z1(t,e,n){const r=oe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||$1(t,r)})}function $1(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Jm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),sp(t))}function ox(t,e,n){for(const r of n)r instanceof L1?(t.Au.addReference(r.key,e),sO(t,r)):r instanceof V1?(Q(rp,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||$1(t,r.key)):se(19791,{yu:r})}function sO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Q(rp,"New document in limbo: "+n),t.Iu.add(r),sp(t))}function sp(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Z(Ae.fromString(e)),r=t.mu.next();t.Eu.set(r,new qD(n)),t.du=t.du.insert(n,r),R1(t.remoteStore,new _r(En(Bm(n.path)),r,"TargetPurposeLimboResolution",pu.ue))}}async function Do(t,e,n){const r=oe(t),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((l,u)=>{a.push(r.gu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Km.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.hu.J_(s),await async function(u,d){const f=oe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(d,g=>L.forEach(g.Is,_=>f.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>L.forEach(g.ds,_=>f.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!Ui(m))throw m;Q(Qm,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const _=f.Fs.get(g),E=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(E);f.Fs=f.Fs.insert(g,R)}}}(r.localStore,i))}async function iO(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Q(rp,"User change. New user:",e.toKey());const r=await I1(n.localStore,e);n.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(u=>{u.reject(new X(z.CANCELLED,a))})}),i.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(n,r.Bs)}}function aO(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.lu)return fe().add(r.key);{let s=fe();const i=n.Tu.get(e);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function H1(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tO.bind(null,e),e.hu.J_=zD.bind(null,e.eventManager),e.hu.pu=$D.bind(null,e.eventManager),e}function oO(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rO.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return lD(this.persistence,new iD,e.initialUser,this.serializer)}Du(e){return new T1(qm.Vi,this.serializer)}bu(e){return new pD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class lO extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ye(this.persistence.referenceDelegate instanceof Lc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Hj(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new T1(r=>Lc.Vi(r,n),this.serializer)}}class ff{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ax(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iO.bind(null,this.syncEngine),await LD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UD}()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),r=function(i){return new _D(i)}(e.databaseInfo);return function(i,a,l,u){return new SD(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new TD(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ax(this.syncEngine,n,0),function(){return ex.C()?new ex:new gD}())}createSyncEngine(e,n){return function(s,i,a,l,u,d,f){const m=new KD(s,i,a,l,u,d);return f&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);Q(ws,"RemoteStore shutting down."),i.Ia.add(5),await jo(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ff.provider={build:()=>new ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class uO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Q(Wr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q(Wr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vd(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await I1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Ur("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ur("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function lx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dO(t);Q(Wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>nx(e.remoteStore,s)),t._onlineComponents=e}async function dO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Wr,"Using user provided OfflineComponentProvider");try{await Vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await Vd(t,new Uc)}}else Q(Wr,"Using default OfflineComponentProvider"),await Vd(t,new lO(void 0));return t._offlineComponents}async function W1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Wr,"Using user provided OnlineComponentProvider"),await lx(t,t._uninitializedComponentsProvider._online)):(Q(Wr,"Using default OnlineComponentProvider"),await lx(t,new ff))),t._onlineComponents}function hO(t){return W1(t).then(e=>e.syncEngine)}async function fO(t){const e=await W1(t),n=e.eventManager;return n.onListen=QD.bind(null,e.syncEngine),n.onUnlisten=XD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZD.bind(null,e.syncEngine),n}function mO(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const f=new cO({next:g=>{f.Ou(),a.enqueueAndForget(()=>BD(i,m));const _=g.docs.has(l);!_&&g.fromCache?d.reject(new X(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new X(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new HD(Bm(l.path),f,{includeMetadataChanges:!0,ka:!0});return FD(i,m)}(await fO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="firestore.googleapis.com",ux=!0;class dx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q1,this.ssl=ux}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:ux;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zj)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ip{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gP;switch(r.type){case"firstParty":return new _P(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cx.get(n);r&&(Q("ComponentProvider","Removing Datastore"),cx.delete(n),r.terminate())}(this),Promise.resolve()}}function pO(t,e,n,r={}){var s;t=uo(t,ip);const i=Oi(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;i&&(g0(`https://${u}`),v0("Firestore",!0)),a.host!==q1&&a.host!==u&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:r});if(!Lr(d,l)&&(t._setSettings(d),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=dt.MOCK_USER;else{f=rk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new dt(g)}t._authCredentials=new vP(new LE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ap(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ao(n,Qe._jsonSchema))return new Qe(e,r||null,new Z(Ae.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:Be("string",Qe._jsonSchemaVersion),referencePath:Be("string")};class yo extends ap{constructor(e,n,r){super(e,n,Bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new Z(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function Iu(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=Dm.newId()),CP("doc","path",e),t instanceof ip){const r=Ae.fromString(e,...n);return Cy(r),new Qe(t,null,new Z(r))}{if(!(t instanceof Qe||t instanceof yo))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Cy(r),new Qe(t.firestore,t instanceof yo?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="AsyncQueue";class fx{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new N1(this,"async_queue_retry"),this.oc=()=>{const r=Ld();r&&Q(hx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new jr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ui(e))throw e;Q(hx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Qn("INTERNAL UNHANDLED ERROR: ",mx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=ep.createAndSchedule(this,e,n,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&se(47125,{hc:mx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function mx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class op extends ip{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new fx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function gO(t,e){const n=typeof t=="object"?t:gm(),r=typeof t=="string"?t:Ac,s=Is(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tk("firestore");i&&pO(s,...i)}return s}function K1(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vO(t),t._firestoreClient}function vO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new LP(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,G1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new uO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(st.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ao(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:Be("string",qt._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sn._jsonSchemaVersion}}static fromJSON(e){if(Ao(e,Sn._jsonSchema))return new Sn(e.latitude,e.longitude)}}Sn._jsonSchemaVersion="firestore/geoPoint/1.0",Sn._jsonSchema={type:Be("string",Sn._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ao(e,Cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cn(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cn._jsonSchemaVersion="firestore/vectorValue/1.0",Cn._jsonSchema={type:Be("string",Cn._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^__.*__$/;class xO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}function J1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ec:t})}}class cp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(J1(this.Ec)&&yO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _O{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Su(e)}Dc(e,n,r,s=!1){return new cp({Ec:e,methodName:n,bc:r,path:tt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wO(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new _O(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EO(t,e,n,r,s,i={}){const a=t.Dc(i.merge||i.mergeFields?2:0,e,n,s);eb("Data must be an object, but it was:",a,r);const l=X1(r,a);let u,d;if(i.merge)u=new on(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=bO(e,m,n);if(!a.contains(g))throw new X(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);CO(f,g)||f.push(g)}u=new on(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new xO(new Gt(l),u,d)}function Y1(t,e){if(Z1(t=Ye(t)))return eb("Unsupported field value:",e,t),X1(t,e);if(t instanceof Q1)return function(r,s){if(!J1(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Y1(l,s.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Te.fromDate(r);return{timestampValue:Mc(s.serializer,i)}}if(r instanceof Te){const i=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mc(s.serializer,i)}}if(r instanceof Sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:y1(s.serializer,r._byteString)};if(r instanceof Qe){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cn)return function(a,l){return{mapValue:{fields:{[qE]:{stringValue:KE},[Rc]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return zm(l.serializer,d)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Om(r)}`)}(t,e)}function X1(t,e){const n={};return BE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(r,s)=>{const i=Y1(s,e.Vc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Z1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Sn||t instanceof qt||t instanceof Qe||t instanceof Q1||t instanceof Cn)}function eb(t,e,n){if(!Z1(n)||!UE(n)){const r=Om(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function bO(t,e,n){if((e=Ye(e))instanceof lp)return e._internalPath;if(typeof e=="string")return tb(t,e);throw Fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const SO=new RegExp("[~\\*/\\[\\]]");function tb(t,e,n){if(e.search(SO)>=0)throw Fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lp(...e.split("."))._internalPath}catch{throw Fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new X(z.INVALID_ARGUMENT,l+t+u)}function CO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TO extends nb{data(){return super.data()}}function rb(t,e){return typeof e=="string"?tb(t,e):e instanceof lp?e._internalPath:e._delegate._internalPath}class IO{convertValue(e,n="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ks(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Rc].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Le(a.doubleValue));return new Cn(i)}convertGeoPoint(e){return new Sn(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=Br(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);ye(S1(r),9688,{name:e});const s=new mo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends nb{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:Be("string",ds._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class Wl extends ds{data(e={}){return super.data(e)}}class Ua{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wl(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Wl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ea(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Wl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ea(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:NO(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t){t=uo(t,Qe);const e=uo(t.firestore,op);return mO(K1(e),t._key).then(n=>PO(e,t,n))}Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:Be("string",Ua._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class AO extends IO{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function ib(t,e,n){t=uo(t,Qe);const r=uo(t.firestore,op),s=kO(t.converter,e);return RO(r,[EO(wO(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Bn.none())])}function RO(t,e){return function(r,s){const i=new jr;return r.asyncQueue.enqueueAndForget(async()=>eO(await hO(r),s,i)),i.promise}(K1(t),e)}function PO(t,e,n){const r=n.docs.get(e._key),s=new AO(t);return new ds(t,s,e._key,r,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Li=s})(Mi),Tn(new hn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new op(new yP(r.getProvider("auth-internal")),new wP(a,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Jt(_y,wy,e),Jt(_y,wy,"esm2017")})();const jO={apiKey:"AIzaSyCiwB1htquwW3GT5h57rwM35Ei4T9MG0_8",authDomain:"seamunssite.firebaseapp.com",projectId:"seamunssite",storageBucket:"seamunssite.firebasestorage.app",messagingSenderId:"834316126529",appId:"1:834316126529:web:983e1745ef677df16cf9c0",measurementId:"G-GJZXN823XL"},DO=!0,Ni=DO?S0(jO):null,Ct=Ni?q2(Ni):null,Gr=Ni?gO(Ni):null;Ni&&typeof window<"u"&&hP(Ni);const up=C.createContext(null);function px(t){return t.includes("auth/invalid-credential")||t.includes("auth/wrong-password")?"Invalid email or password.":t.includes("auth/user-not-found")?"No account found for this email.":t.includes("auth/email-already-in-use")?"This email is already registered.":t.includes("auth/weak-password")?"Password should be at least 6 characters.":t.includes("auth/invalid-email")?"Please enter a valid email address.":t.includes("auth/too-many-requests")?"Too many attempts. Try again later.":t}function gx(t){return t?{uid:t.uid,name:t.displayName??null,email:t.email??null,picture:t.photoURL??null,isAnonymous:t.isAnonymous??!1}:null}function OO({children:t}){const[e,n]=C.useState(null),[r,s]=C.useState(!0),[i,a]=C.useState(null);C.useEffect(()=>{if(!Ct)return;const _=DA(Ct,async E=>{if(E)n(gx(E));else try{const R=await SA(Ct);n(gx(R.user))}catch{n(null)}s(!1)});return()=>_()},[]);const l=C.useCallback(async()=>{if(Ct){a(null),s(!0);try{const _=new On,E=Ct.currentUser;E!=null&&E.isAnonymous?await n2(E,_):await t2(Ct,_)}catch(_){a(_ instanceof Error?_.message:"Google sign-in failed")}finally{s(!1)}}},[]),u=C.useCallback(async(_,E)=>{if(Ct){a(null),s(!0);try{const R=Ct.currentUser;if(R!=null&&R.isAnonymous){const A=Vr.credential(_.trim(),E);await ey(R,A)}else await AA(Ct,_.trim(),E)}catch(R){const A=R instanceof Error?R.message:"Sign-in failed";a(A.includes("auth/")?px(A):A)}finally{s(!1)}}},[]),d=C.useCallback(async(_,E,R)=>{if(Ct){a(null),s(!0);try{const A=Ct.currentUser;if(A!=null&&A.isAnonymous){const w=Vr.credential(_.trim(),E),v=await ey(A,w);R!=null&&R.trim()&&v.user&&await ty(v.user,{displayName:R.trim()})}else{const w=await NA(Ct,_.trim(),E);R!=null&&R.trim()&&w.user&&await ty(w.user,{displayName:R.trim()})}}catch(A){const w=A instanceof Error?A.message:"Sign-up failed";a(w.includes("auth/")?px(w):w)}finally{s(!1)}}},[]),f=C.useCallback(async()=>{Ct&&await OA(Ct),n(null),a(null)},[]),m=C.useCallback(()=>a(null),[]),g={user:e,isAuthenticated:!!e,isLoading:r,login:l,loginWithEmail:u,signUpWithEmail:d,logout:f,authError:i,clearAuthError:m};return c.jsx(up.Provider,{value:g,children:t})}const ab={user:null,isAuthenticated:!1,isLoading:!1,login:async()=>{},loginWithEmail:async()=>{},signUpWithEmail:async()=>{},logout:async()=>{},authError:null,clearAuthError:()=>{}};function MO({children:t}){return c.jsx(up.Provider,{value:ab,children:t})}function Oo(){return C.useContext(up)??ab}const vx="seamuns-dashboard-theme",yx="seamuns-dashboard-color-mode",xx="seamuns-dashboard-color-theme",ob=[{id:"default",label:"Default",emoji:"",brand:"#2563eb"},{id:"health",label:"Health",emoji:"",brand:"#0d9488"},{id:"war",label:"War & conflict",emoji:"",brand:"#b91c1c"},{id:"women",label:"Women",emoji:"",brand:"#a855f7"},{id:"nature",label:"Nature",emoji:"",brand:"#16a34a"},{id:"peace",label:"Peace",emoji:"",brand:"#0284c7"},{id:"economy",label:"Economy",emoji:"",brand:"#d97706"},{id:"education",label:"Education",emoji:"",brand:"#4f46e5"},{id:"rights",label:"Human rights",emoji:"",brand:"#dc2626"}],mf="gold-blue",lb=[{id:"gold-blue",label:"Gold & Blue",emoji:""},{id:"red",label:"Red",emoji:""},{id:"orange",label:"Orange",emoji:""},{id:"yellow",label:"Yellow",emoji:""},{id:"green",label:"Green",emoji:""},{id:"light-blue",label:"Light Blue",emoji:""},{id:"blue",label:"Blue",emoji:""},{id:"purple",label:"Purple",emoji:""},{id:"pink",label:"Pink",emoji:""},{id:"brown",label:"Brown",emoji:""},{id:"monochromatic",label:"Monochromatic",emoji:""}],cb=C.createContext(null),LO=t=>ob.some(e=>e.id===t),VO=t=>lb.some(e=>e.id===t),UO=t=>t==="light"||t==="dark";function FO({children:t}){const[e,n]=C.useState(()=>{if(typeof window>"u")return"default";const f=localStorage.getItem(vx);return f&&LO(f)?f:"default"}),[r,s]=C.useState(()=>{if(typeof window>"u")return mf;const f=localStorage.getItem(xx);return f&&VO(f)?f:mf}),[i,a]=C.useState(()=>{if(typeof window>"u")return"light";const f=localStorage.getItem(yx);return f&&UO(f)?f:"light"});C.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem(vx,e)},[e]),C.useEffect(()=>{document.documentElement.setAttribute("data-color-theme",r),localStorage.setItem(xx,r)},[r]),C.useEffect(()=>{document.documentElement.setAttribute("data-color-mode",i),localStorage.setItem(yx,i)},[i]);const l=f=>n(f),u=f=>s(f),d=f=>a(f);return c.jsx(cb.Provider,{value:{themeId:e,setThemeId:l,themes:ob,colorThemeId:r,setColorThemeId:u,colorThemes:lb,colorMode:i,setColorMode:d},children:t})}function BO(){const t=C.useContext(cb);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ub=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $O={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},u)=>C.createElement("svg",{ref:u,...$O,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ub("lucide",s),...l},[...a.map(([d,f])=>C.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(t,e)=>{const n=C.forwardRef(({className:r,...s},i)=>C.createElement(HO,{ref:i,iconNode:e,className:ub(`lucide-${zO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=re("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=re("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=re("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=re("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=re("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=re("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=re("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=re("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=re("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=re("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=re("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=re("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=re("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=re("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=re("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=re("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Sx(){const{login:t,loginWithEmail:e,signUpWithEmail:n,logout:r,isAuthenticated:s,user:i,isLoading:a,authError:l,clearAuthError:u}=Oo(),[d,f]=C.useState(!1),[m,g]=C.useState("login"),[_,E]=C.useState(""),[R,A]=C.useState(""),[w,v]=C.useState(""),S=C.useRef(null);C.useEffect(()=>{if(!d)return;const U=T=>{S.current&&!S.current.contains(T.target)&&f(!1)};return document.addEventListener("click",U),()=>document.removeEventListener("click",U)},[d]);const N=()=>{f(U=>!U),d||(u(),E(""),A(""),v(""))},B=U=>{U.preventDefault(),m==="login"?e(_,R):n(_,R,w||void 0)};return a&&!d?c.jsx("span",{className:"text-xs text-[var(--text-muted)] px-2 py-1.5",children:"Loading"}):s&&i&&!i.isAnonymous?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("div",{className:"hidden sm:flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[i.picture?c.jsx("img",{src:i.picture,alt:i.name??"User",className:"w-6 h-6 rounded-lg object-cover border border-[var(--border)]"}):c.jsx("div",{className:"w-6 h-6 rounded-lg bg-[var(--brand-soft)] flex items-center justify-center",children:c.jsx(Ru,{className:"w-3 h-3 text-[var(--brand)]"})}),c.jsx("span",{className:"text-[var(--text)] max-w-[120px] truncate",children:i.name??i.email})]}),c.jsxs("button",{type:"button",onClick:()=>r(),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors",children:[c.jsx(e4,{className:"w-3 h-3"}),"Log out"]})]}):c.jsxs("div",{className:"relative",ref:S,children:[c.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity",children:[c.jsx(ZO,{className:"w-3 h-3"}),"Log in / Sign up",c.jsx(Bi,{className:`w-3 h-3 transition-transform ${d?"rotate-180":""}`})]}),d&&c.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 w-72 rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] shadow-lg p-3",children:[c.jsxs("button",{type:"button",onClick:()=>{t(),f(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-[var(--text)] bg-[var(--bg-card)] hover:bg-[var(--border)] border border-[var(--border)] transition-colors",children:[c.jsx(fb,{className:"w-4 h-4 text-[var(--brand)]"}),"Continue with Gmail"]}),c.jsx("div",{className:"my-3 border-t border-[var(--border)]"}),c.jsxs("div",{className:"flex gap-1 p-0.5 rounded-lg bg-[var(--bg-card)] border border-[var(--border)]",children:[c.jsx("button",{type:"button",onClick:()=>{g("login"),u()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="login"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Log in"}),c.jsx("button",{type:"button",onClick:()=>{g("signup"),u()},className:`flex-1 px-2 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="signup"?"bg-[var(--brand)] text-white":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:"Sign up"})]}),c.jsxs("form",{onSubmit:B,className:"space-y-2 mt-2",children:[m==="signup"&&c.jsxs("label",{className:"block",htmlFor:"auth-display-name",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),c.jsx("input",{id:"auth-display-name",name:"display-name",type:"text",value:w,onChange:U=>v(U.target.value),placeholder:"Your name",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),c.jsxs("label",{className:"block",htmlFor:"auth-email",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email"}),c.jsx("input",{id:"auth-email",name:"email",type:"email",value:_,onChange:U=>E(U.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),c.jsxs("label",{className:"block",htmlFor:"auth-password",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Password"}),c.jsx("input",{id:"auth-password",name:"password",type:"password",value:R,onChange:U=>A(U.target.value),placeholder:m==="signup"?"At least 6 characters":"",required:!0,minLength:m==="signup"?6:void 0,autoComplete:m==="login"?"current-password":"new-password",className:"mt-0.5 w-full px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)]"})]}),l&&c.jsx("p",{className:"text-xs text-[var(--danger)]",children:l}),c.jsx("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:a?"Please wait":m==="login"?"Log in with email":"Create account"})]})]})]})}function Cx(){const{colorThemeId:t,setColorThemeId:e,colorThemes:n,colorMode:r,setColorMode:s,setThemeId:i}=BO(),[a,l]=C.useState(!1),u=C.useRef(null);C.useEffect(()=>{function f(m){u.current&&!u.current.contains(m.target)&&l(!1)}return a&&document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[a]);const d=n.find(f=>f.id===t)??n[0];return c.jsxs("div",{className:"relative",ref:u,children:[c.jsxs("button",{type:"button",onClick:()=>l(!a),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text)] hover:bg-[var(--bg-card)] border border-[var(--border)] bg-[var(--bg-elevated)] transition-colors","aria-expanded":a,"aria-haspopup":"listbox","aria-label":"Theme",children:[c.jsx(r4,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)]"}),c.jsx("span",{className:"hidden sm:inline",children:"Theme"}),c.jsx("span",{className:"text-[var(--brand)]",title:d.label,"aria-hidden":!0,children:d.emoji}),c.jsx(Bi,{className:`w-4 h-4 flex-shrink-0 text-[var(--text-muted)] transition-transform ${a?"rotate-180":""}`,"aria-hidden":!0})]}),a&&c.jsxs("div",{className:"absolute right-0 top-full mt-1.5 py-2 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] shadow-lg z-50 min-w-[200px]",role:"dialog","aria-label":"Theme options",children:[c.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:"Appearance"}),c.jsxs("div",{className:"flex gap-1 px-2 pb-2",children:[c.jsxs("button",{type:"button",onClick:()=>s("light"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="light"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="light",children:[c.jsx(l4,{className:"w-4 h-4"}),"Light"]}),c.jsxs("button",{type:"button",onClick:()=>s("dark"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${r==="dark"?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:bg-[var(--bg-elevated)] hover:text-[var(--text)]"}`,"aria-pressed":r==="dark",children:[c.jsx(n4,{className:"w-4 h-4"}),"Dark"]})]}),c.jsxs("div",{className:"px-3 py-1.5 text-xs font-medium text-[var(--text-muted)] border-b border-[var(--border)] mb-2",children:["Theme color ",c.jsx("span",{className:"font-normal",children:"(default: Gold & Blue)"})]}),c.jsx("div",{className:"max-h-[260px] overflow-y-auto",role:"listbox","aria-label":"Theme color",children:n.map(f=>{const m=f.id===mf,g=t===f.id;return c.jsxs("button",{type:"button",role:"option","aria-selected":g,onClick:()=>{e(f.id),i("default"),l(!1)},className:`flex items-center gap-2 w-full px-3 py-2 text-left text-sm transition-colors whitespace-nowrap min-w-0 ${g?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:[c.jsx("span",{className:"text-base flex-shrink-0","aria-hidden":!0,children:f.emoji}),c.jsx("span",{className:"truncate",children:f.label}),m&&c.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0 ${g?"bg-white/20 text-white":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:"Default"}),g&&c.jsx("span",{className:"ml-auto text-white","aria-hidden":!0,children:""})]},f.id)})})]})]})}function wb({className:t="h-8 w-auto"}){return c.jsx("img",{src:"/logo.png",alt:"SEAMUNs",className:t,fetchPriority:"high"})}const Tx=[{to:"/",label:" Home"},{to:"/chair",label:" Chair Room"},{to:"/delegate",label:" Delegate"}];function u4(){const[t,e]=C.useState(!1),n=Cs(),r=()=>e(!1);return C.useEffect(()=>{r()},[n.pathname]),c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsxs("header",{className:"sticky top-0 z-50 border-b border-[var(--border)] bg-[var(--bg-base)]/95 backdrop-blur-sm shadow-[0_1px_0_0_var(--border)]",children:[c.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 sm:px-4 py-1.5 sm:py-2 flex items-center justify-between gap-2 min-h-0",children:[c.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 min-w-0",children:[c.jsxs(Sd,{to:"/",className:"font-semibold text-base sm:text-lg md:text-xl text-[var(--text)] hover:text-[var(--brand)] transition-colors flex items-center gap-1.5 sm:gap-2 whitespace-nowrap min-w-0 py-1",onClick:r,children:[c.jsx(wb,{className:"h-5 sm:h-7 w-auto flex-shrink-0"}),c.jsx("span",{className:"hidden sm:inline truncate",children:"SEAMUNs Dashboard"}),c.jsx("span",{className:"sm:hidden truncate",children:"SEAMUNs"}),c.jsx("span",{className:"text-[var(--brand)]/80 text-sm hidden sm:inline",children:""})]}),c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[var(--text-muted)] hover:text-[var(--brand)] transition-colors hidden md:inline",children:"seamuns.site"})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[c.jsx(Cx,{}),c.jsx("nav",{className:"flex items-center gap-0.5 p-0.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] flex-nowrap",children:Tx.map(({to:s,label:i})=>c.jsx(Sd,{to:s,className:({isActive:a})=>`px-2.5 py-1 rounded-md text-xs font-medium transition-colors whitespace-nowrap ${a?"bg-[var(--brand)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s))}),c.jsx(Sx,{})]}),c.jsxs("div",{className:"flex md:hidden items-center gap-0.5",children:[c.jsx(Cx,{}),c.jsx("button",{type:"button",onClick:()=>e(!t),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors","aria-expanded":t,"aria-label":t?"Close menu":"Open menu",children:t?c.jsx(Pu,{className:"w-4 h-4"}):c.jsx(t4,{className:"w-4 h-4"})}),c.jsx(Sx,{})]})]}),t&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40 bg-black/30 md:hidden",onClick:r,"aria-hidden":!0}),c.jsx("div",{className:"fixed top-11 right-0 bottom-0 left-0 z-50 md:hidden bg-[var(--bg-elevated)] border-l border-[var(--border)] shadow-xl overflow-y-auto",role:"dialog","aria-label":"Navigation menu",children:c.jsxs("nav",{className:"flex flex-col p-4 gap-1",children:[Tx.map(({to:s,label:i})=>c.jsx(Sd,{to:s,onClick:r,className:({isActive:a})=>`px-4 py-3 rounded-lg text-sm font-medium transition-colors ${a?"bg-[var(--brand)] text-white":"text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:i},s)),c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",onClick:r,className:"px-4 py-3 rounded-lg text-sm text-[var(--text-muted)] hover:text-[var(--brand)] hover:bg-[var(--bg-card)]",children:"seamuns.site "})]})})]})]}),c.jsx("main",{className:"main-content flex-1 min-w-0",children:c.jsx(RI,{})}),c.jsxs("footer",{className:"border-t border-[var(--border)] py-2 sm:py-3 px-3 sm:px-4 text-center text-[10px] sm:text-xs text-[var(--text-muted)] bg-[var(--bg-elevated)]/50",children:["Part of ",c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  Model UN conferences across South East Asia",c.jsx("span",{className:"block mt-1 opacity-70",title:"You see this when the latest build (AL, EU, IOPC, UKPC, PC, HCC committees) is deployed",children:"Build: committees+allocations"})]})]})}const d4={Afghanistan:"AF",Albania:"AL",Algeria:"DZ",Andorra:"AD",Angola:"AO","Antigua and Barbuda":"AG",Argentina:"AR",Armenia:"AM",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bhutan:"BT",Bolivia:"BO","Bosnia and Herzegovina":"BA",Botswana:"BW",Brazil:"BR","Brunei Darussalam":"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI","Cabo Verde":"CV",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN",Colombia:"CO",Comoros:"KM",Congo:"CG","Costa Rica":"CR",Croatia:"HR",Cuba:"CU",Cyprus:"CY","Czech Republic":"CZ","Cte d'Ivoire":"CI","Democratic People's Republic of Korea":"KP","Democratic Republic of the Congo":"CD",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Eswatini:"SZ",Ethiopia:"ET",Fiji:"FJ",Finland:"FI",France:"FR",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Greece:"GR",Grenada:"GD",Guatemala:"GT",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT",Honduras:"HN",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID",Iran:"IR",Iraq:"IQ",Ireland:"IE",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI",Kuwait:"KW",Kyrgyzstan:"KG","Lao People's Democratic Republic":"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Mauritania:"MR",Mauritius:"MU",Mexico:"MX","Micronesia (Federated States of)":"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG","North Macedonia":"MK",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Poland:"PL",Portugal:"PT",Qatar:"QA","Republic of Korea":"KR",Romania:"RO","Russian Federation":"RU",Rwanda:"RW","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR",Sweden:"SE",Switzerland:"CH","Syrian Arab Republic":"SY",Tajikistan:"TJ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE","United Kingdom":"GB","United Republic of Tanzania":"TZ","United States":"US",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU",Venezuela:"VE","Viet Nam":"VN",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"};function h4(t){return/^[A-Z]{2}$/i.test(t)?Array.from(t.toUpperCase()).map(e=>String.fromCodePoint(127397+e.charCodeAt(0))).join(""):""}function Eb(t){const e=d4[t];return e?h4(e):""}const bb="chairData";async function f4(t){if(!Gr)return null;const e=Iu(Gr,bb,t),n=await sb(e);return n.exists()?n.data():null}async function Ix(t,e){if(!Gr)return;const n=Iu(Gr,bb,t);await ib(n,e)}const Sb="seamuns-dashboard-chair-state",ur={committee:"UNSC",topic:"Cybersecurity and International Peace",universe:"",sessionStarted:!1,sessionStartTime:null,delegates:[],delegateStrikes:[],delegateFeedback:[],motions:[],speakers:[],activeSpeaker:null,speakerDuration:60,rollCallComplete:!1,crisisSlides:[],crisisSpeakers:[],crisisFacts:[],crisisPathways:[],archive:[],voteInProgress:null,delegateVotes:{},flowChecklist:{},prepChecklist:{},delegationEmojiOverrides:{},chairName:"",chairEmail:""};function kx(){try{const t=localStorage.getItem(Sb);if(t){const e=JSON.parse(t);return{...ur,...e}}}catch{}return ur}const Cb=C.createContext(null);function m4({children:t,userId:e=null}){const[n,r]=C.useState(kx),[s,i]=C.useState(!1),[a,l]=C.useState(null),[u,d]=C.useState(!1);C.useEffect(()=>{if(!e){d(!0);return}let V=!1;return f4(e).then(M=>{if(!V)if(M)r({...ur,...M,delegates:Array.isArray(M.delegates)?M.delegates:ur.delegates,delegateStrikes:Array.isArray(M.delegateStrikes)?M.delegateStrikes:ur.delegateStrikes,delegateFeedback:Array.isArray(M.delegateFeedback)?M.delegateFeedback:ur.delegateFeedback,motions:Array.isArray(M.motions)?M.motions:ur.motions,speakers:Array.isArray(M.speakers)?M.speakers:ur.speakers,activeSpeaker:M.activeSpeaker,voteInProgress:M.voteInProgress});else{const K=kx();Ix(e,K).catch(()=>{})}}).catch(()=>{}).finally(()=>{V||d(!0)}),()=>{V=!0}},[e]),C.useEffect(()=>{const V=setTimeout(()=>{try{localStorage.setItem(Sb,JSON.stringify(n))}catch{}},1e3);return()=>clearTimeout(V)},[n]);const f=C.useCallback(async()=>{if(e){i(!0);try{await Ix(e,n),l(new Date)}finally{i(!1)}}},[e,n]);C.useEffect(()=>{if(!e||!u)return;const V=setTimeout(()=>{f()},3e3);return()=>clearTimeout(V)},[e,u,n,f]),C.useEffect(()=>{if(!e||!u)return;const V=setInterval(()=>f(),5*60*1e3);return()=>clearInterval(V)},[e,u,f]);const m=C.useCallback(V=>{r(M=>({...M,committee:V}))},[]),g=C.useCallback(V=>{r(M=>({...M,topic:V}))},[]),_=C.useCallback(V=>{r(M=>({...M,universe:V}))},[]),E=C.useCallback(V=>{r(M=>({...M,chairName:V}))},[]),R=C.useCallback(V=>{r(M=>({...M,chairEmail:V}))},[]),A=C.useCallback(()=>{r(V=>({...V,sessionStarted:!0,sessionStartTime:new Date().toISOString()}))},[]),w=C.useCallback(()=>{r(V=>({...V,sessionStarted:!1,sessionStartTime:null}))},[]),v=C.useCallback(V=>{r(M=>({...M,delegates:[...M.delegates,{...V,id:crypto.randomUUID()}]}))},[]),S=C.useCallback(V=>{r(M=>({...M,delegates:M.delegates.filter(K=>K.id!==V),delegateStrikes:M.delegateStrikes.filter(K=>K.delegateId!==V),delegateFeedback:M.delegateFeedback.filter(K=>K.delegateId!==V)}))},[]),N=C.useCallback((V,M)=>{r(K=>({...K,delegates:K.delegates.map(_e=>_e.id===V?{..._e,...M}:_e)}))},[]),B=C.useCallback((V,M)=>{r(K=>({...K,motions:[...K.motions,{id:crypto.randomUUID(),text:V,type:M,starred:!1,timestamp:new Date().toISOString(),status:"active"}]}))},[]),U=C.useCallback(V=>{r(M=>({...M,motions:M.motions.map(K=>K.id===V?{...K,starred:!K.starred}:K)}))},[]),T=C.useCallback((V,M)=>{r(K=>({...K,motions:K.motions.map(_e=>_e.id===V?{..._e,status:M}:_e)}))},[]),x=C.useCallback(V=>{r(M=>{const K=M.motions.find(_e=>_e.id===V);return!K||K.type==="point"?M:{...M,voteInProgress:K,delegateVotes:{}}})},[]),I=C.useCallback((V,M)=>{r(K=>({...K,delegateVotes:{...K.delegateVotes,[V]:M}}))},[]),k=C.useCallback(()=>{r(V=>{if(!V.voteInProgress)return V;const M=Object.values(V.delegateVotes).filter(Dt=>Dt==="yes").length,K=Object.values(V.delegateVotes).filter(Dt=>Dt==="no").length,_e=Object.values(V.delegateVotes).filter(Dt=>Dt==="abstain").length;return{...V,motions:V.motions.map(Dt=>Dt.id===V.voteInProgress.id?{...Dt,votes:{yes:M,no:K,abstain:_e},status:M>K?"passed":"failed"}:Dt),voteInProgress:null,delegateVotes:{}}})},[]),P=C.useCallback((V,M,K)=>{r(_e=>({..._e,speakers:[..._e.speakers,{id:crypto.randomUUID(),delegateId:V,country:M,name:K,duration:_e.speakerDuration,speaking:!1}]}))},[]),j=C.useCallback(V=>{r(M=>{var K;return{...M,speakers:M.speakers.filter(_e=>_e.id!==V),activeSpeaker:((K=M.activeSpeaker)==null?void 0:K.id)===V?null:M.activeSpeaker}})},[]),b=C.useCallback(V=>{r(M=>({...M,activeSpeaker:V,speakers:M.speakers.map(K=>K.id===(V==null?void 0:V.id)?{...K,speaking:!0,startTime:Date.now()}:{...K,speaking:!1})}))},[]),Y=C.useCallback(V=>{r(M=>({...M,speakerDuration:V}))},[]),ce=C.useCallback(V=>{r(M=>({...M,rollCallComplete:V}))},[]),St=C.useCallback(V=>{r(M=>({...M,crisisSlides:[...M.crisisSlides,V]}))},[]),ze=C.useCallback(V=>{r(M=>({...M,crisisSpeakers:[...M.crisisSpeakers,V]}))},[]),G=C.useCallback(V=>{r(M=>({...M,crisisFacts:[...M.crisisFacts,V]}))},[]),ee=C.useCallback(V=>{r(M=>({...M,crisisPathways:[...M.crisisPathways,V]}))},[]),te=C.useCallback((V,M,K)=>{r(_e=>({..._e,archive:[..._e.archive,{type:V,name:M,content:K}]}))},[]),xe=C.useCallback((V,M)=>{r(K=>({...K,delegateStrikes:[...K.delegateStrikes,{delegateId:V,type:M,timestamp:new Date().toISOString()}]}))},[]),q=C.useCallback((V,M)=>{r(K=>{const _e=[...K.delegateStrikes].reverse().findIndex(Ds=>Ds.delegateId===V&&Ds.type===M);if(_e===-1)return K;const Dt=K.delegateStrikes.length-1-_e;return{...K,delegateStrikes:K.delegateStrikes.filter((Ds,Wi)=>Wi!==Dt)}})},[]),F=C.useCallback((V,M)=>{r(K=>({...K,delegateFeedback:[...K.delegateFeedback,{delegateId:V,type:M,timestamp:new Date().toISOString()}]}))},[]),H=C.useCallback(V=>{const M={compliment:0,concern:0};return n.delegateFeedback.filter(K=>K.delegateId===V).forEach(K=>{M[K.type]=(M[K.type]??0)+1}),M},[n.delegateFeedback]),de=C.useCallback(V=>{r(M=>({...M,flowChecklist:{...M.flowChecklist,[V]:!M.flowChecklist[V]}}))},[]),ve=C.useCallback(V=>!!n.flowChecklist[V],[n.flowChecklist]),ie=C.useCallback(()=>{r(V=>({...V,flowChecklist:{}}))},[]),gt=C.useCallback(V=>{r(M=>({...M,prepChecklist:{...M.prepChecklist,[V]:!M.prepChecklist[V]}}))},[]),zi=C.useCallback(V=>!!n.prepChecklist[V],[n.prepChecklist]),Ps=C.useCallback(()=>{r(V=>({...V,prepChecklist:{}}))},[]),js=C.useCallback((V,M)=>{r(K=>{const _e={...K.delegationEmojiOverrides};return M===null||M===""?delete _e[V]:_e[V]=M,{...K,delegationEmojiOverrides:_e}})},[]),$i=C.useCallback(V=>{const M=n.delegationEmojiOverrides[V];return M!==void 0&&M!==""?M:Eb(V)},[n.delegationEmojiOverrides]),Hi={...n,setCommittee:m,setTopic:g,setUniverse:_,setChairName:E,setChairEmail:R,startSession:A,stopSession:w,addDelegate:v,removeDelegate:S,updateDelegate:N,addMotion:B,starMotion:U,setMotionStatus:T,startVote:x,recordVote:I,endVote:k,addToSpeakers:P,removeFromSpeakers:j,setActiveSpeaker:b,setSpeakerDuration:Y,setRollCallComplete:ce,addCrisisSlide:St,addCrisisSpeaker:ze,addCrisisFact:G,addCrisisPathway:ee,addToArchive:te,addStrike:xe,removeStrike:q,getStrikeCount:(V,M)=>n.delegateStrikes.filter(K=>K.delegateId===V&&K.type===M).length,getStrikeCountsByType:V=>{const M={};return n.delegateStrikes.filter(K=>K.delegateId===V).forEach(K=>{M[K.type]=(M[K.type]??0)+1}),M},addDelegateFeedback:F,getFeedbackCountsByType:H,toggleFlowStep:de,isFlowStepDone:ve,resetFlowChecklist:ie,togglePrepStep:gt,isPrepStepDone:zi,resetPrepChecklist:Ps,setDelegationEmoji:js,getDelegationEmoji:$i,saveToAccount:f,isSaving:s,lastSaved:a,isLoaded:u};return c.jsx(Cb.Provider,{value:Hi,children:t})}function bt(){const t=C.useContext(Cb);if(!t)throw new Error("useChair must be used within ChairProvider");return t}function nr({title:t,children:e,label:n="More info"}){const[r,s]=C.useState(!1),i=C.useRef(null);return C.useEffect(()=>{if(!r)return;const a=l=>{i.current&&!i.current.contains(l.target)&&s(!1)};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[r]),c.jsxs("div",{className:"relative inline-flex",ref:i,children:[c.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),s(l=>!l)},className:"p-1 rounded-full text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-expanded":r,"aria-haspopup":"dialog","aria-label":n,children:c.jsx(JO,{className:"w-4 h-4"})}),r&&c.jsxs("div",{role:"dialog","aria-label":t,className:"absolute left-0 top-full mt-1 z-50 min-w-[220px] max-w-[320px] p-3 rounded-xl border border-[var(--border)] bg-[var(--bg-card)] shadow-lg text-left",children:[c.jsx("p",{className:"font-medium text-[var(--text)] text-sm mb-1",children:t}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] [&_ul]:list-disc [&_ul]:pl-4 [&_ul]:space-y-0.5 [&_ol]:list-decimal [&_ol]:pl-4 [&_ol]:space-y-0.5",children:e})]})]})}const p4=["Point of order abuse","Unparliamentary language","Speaking out of turn","Disruption","Failure to yield","Other"],gf=3;function g4(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function v4(){const{delegates:t,committee:e,topic:n,universe:r,getStrikeCountsByType:s,addDelegateFeedback:i,getFeedbackCountsByType:a,getDelegationEmoji:l}=bt(),[u,d]=C.useState(null),f=C.useRef(null);return C.useEffect(()=>{if(!u)return;const m=g=>{f.current&&!f.current.contains(g.target)&&d(null)};return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[u]),c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Digital Room View",c.jsx(nr,{title:"Digital Room",children:"Shows all delegates with their roll-call status (Absent, Present, P&V). Click a delegate card to give a compliment or concern reminder. Delegates are listed alphabetically by country."})]}),c.jsxs("p",{className:"text-[var(--text-muted)] text-sm",children:[e,r?`  ${r}  ${n}`:`  ${n}`]}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Click a delegate to give a compliment or concern reminder."})]})}),c.jsx("div",{className:"card-block p-6 min-h-[320px]",children:t.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-[var(--text-muted)]",children:[c.jsx("p",{className:"text-sm",children:" No delegates in the room yet."}),c.jsx("p",{className:"text-xs mt-1",children:"Add delegates from the Delegates section."})]}):c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[...t].sort((m,g)=>m.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(m=>{const g=s(m.id),_=Object.values(g).reduce((S,N)=>S+N,0),E=Object.values(g).some(S=>S>=gf),R=a(m.id),A=R.compliment??0,w=R.concern??0,v=u===m.id;return c.jsxs("div",{ref:v?f:void 0,className:"relative",children:[c.jsxs("button",{type:"button",onClick:()=>d(v?null:m.id),className:`w-full rounded-lg border p-3 text-center transition-colors text-left ${E?"border-[var(--danger)] bg-[var(--danger)]/10 hover:bg-[var(--danger)]/15":"border-[var(--border)] bg-[var(--bg-elevated)] hover:bg-[var(--bg-card)] hover:border-[var(--accent)]/50"} ${v?"ring-2 ring-[var(--accent)]":""}`,"aria-expanded":v,"aria-haspopup":"menu","aria-label":`${m.country}  give compliment or concern`,children:[c.jsxs("div",{className:"text-xs font-medium text-[var(--accent)] uppercase tracking-wide flex items-center justify-center gap-1",children:[c.jsx("span",{children:l(m.country)||""}),c.jsx("span",{children:m.country})]}),c.jsx("div",{className:"text-sm text-[var(--text)] mt-1 font-medium",children:m.name||""}),m.committee&&c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-0.5",children:m.committee}),c.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 flex-wrap",children:[(()=>{const S=g4(m),N={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};return c.jsxs("span",{className:`inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] font-medium ${S==="absent"?"bg-[var(--text-muted)]/20 text-[var(--text-muted)]":S==="present"?"bg-[var(--success)]/20 text-[var(--success)]":"bg-[var(--accent)]/20 text-[var(--accent)]"}`,title:N[S],children:[c.jsx("span",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${S==="absent"?"bg-[var(--text-muted)]":S==="present"?"bg-[var(--success)]":"bg-[var(--accent)]"}`}),S==="present-and-voting"?"P&V":S==="present"?"Present":"Absent"]})})(),_>0&&c.jsxs("span",{className:`inline-flex items-center gap-0.5 text-xs ${E?"text-[var(--danger)]":"text-[var(--accent)]"}`,title:Object.entries(g).map(([S,N])=>`${S}: ${N}`).join(", "),children:[c.jsx(Bc,{className:"w-3 h-3"}),_]}),A>0&&c.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--success)]",title:"Compliments",children:[c.jsx(bx,{className:"w-3 h-3"}),A]}),w>0&&c.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-[var(--danger)]",title:"Concern reminders",children:[c.jsx(wx,{className:"w-3 h-3"}),w]}),c.jsx(Bi,{className:`w-3 h-3 text-[var(--text-muted)] flex-shrink-0 transition-transform ${v?"rotate-180":""}`,"aria-hidden":!0})]})]}),v&&c.jsxs("div",{className:"absolute left-0 right-0 top-full mt-1 z-10 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] shadow-lg py-1 min-w-[10rem]",role:"menu","aria-label":"Delegate actions",children:[c.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(m.id,"compliment"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(bx,{className:"w-4 h-4 text-[var(--success)]"}),"Give compliment"]}),c.jsxs("button",{type:"button",role:"menuitem",onClick:()=>{i(m.id,"concern"),d(null)},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-sm text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(wx,{className:"w-4 h-4 text-[var(--danger)]"}),"Give concern reminder"]})]})]},m.id)})})})]})}const y4=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Cte d'Ivoire","Democratic People's Republic of Korea","Democratic Republic of the Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia (Federated States of)","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Republic of Korea","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United Republic of Tanzania","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Viet Nam","Yemen","Zambia","Zimbabwe"],fi="__OTHER__",x4=[{value:"AL",label:"AL  Arab League"},{value:"EU",label:"EU  European Union"},{value:"IOPC",label:"IOPC  International Olympic and Paralympic Committee"},{value:"UKPC",label:"UKPC  UK Parliament Committee"},{value:"PC",label:"PC  Press Corps"},{value:"HCC",label:"HCC  Historical Crisis Committee"},{value:"UNSC",label:"SC / UNSC  Security Council"},{value:"HSC",label:"HSC  Historical Security Council"},{value:"US-Senate",label:"US Senate  United States Senate"},{value:"ASEAN",label:"ASEAN  Association of Southeastern Asian Nations"},{value:"AU",label:"AU  African Union"},{value:"CCPCJ",label:"CCPCJ  Commission on Crime Prevention and Criminal Justice"},{value:"CERN",label:"CERN  European Organization for Nuclear Research"},{value:"CND",label:"CND  United Nations Commission on Narcotic Drugs"},{value:"CoM",label:"CoM  Council of Marvels (Fictional)"},{value:"CPD",label:"CPD  Commission on Population and Development"},{value:"CSTD",label:"CSTD  Commission on Science and Technology for Development"},{value:"DGC",label:"DGC  United Nations Department of Global Communications"},{value:"DISEC",label:"DISEC  Disarmament and International Security Committee (UNGA 1st)"},{value:"ECOFIN",label:"ECOFIN  Economic and Financial Committee (UNGA 2nd)"},{value:"ECOSOC",label:"ECOSOC  Economic and Social Council"},{value:"FAO",label:"FAO  Food and Agriculture Organization"},{value:"FIFA",label:"FIFA  Fdration Internationale de Football Association"},{value:"GA6",label:"GA6  Legal (UNGA 6th Committee)"},{value:"HRC",label:"HRC  Human Rights Council"},{value:"UNHRC",label:"UNHRC  Human Rights Council"},{value:"IAEA",label:"IAEA  International Atomic Energy Agency"},{value:"ICAO",label:"ICAO  International Civil Aviation Organisation"},{value:"ICC",label:"ICC  International Criminal Court"},{value:"ICC-Commerce",label:"ICC  International Chamber of Commerce"},{value:"ICJ",label:"ICJ  International Court of Justice"},{value:"ICRC",label:"ICRC  International Committee of the Red Cross"},{value:"ILO",label:"ILO  International Labour Organization"},{value:"IMF",label:"IMF  International Monetary Fund"},{value:"IMO",label:"IMO  International Maritime Organisation"},{value:"Interpol",label:"Interpol  International Criminal Police Organization"},{value:"NATO",label:"NATO  North Atlantic Treaty Organization"},{value:"PBC",label:"PBC  Peacebuilding Commission"},{value:"SCSHT",label:"SCSHT  Special Conference on Slavery and Human Trafficking"},{value:"SOCHUM",label:"SOCHUM  Social, Cultural, and Humanitarian Committee (UNGA 3rd)"},{value:"SPECPOL",label:"SPECPOL  Special Political and Decolonization (UNGA 4th)"},{value:"UNCSA",label:"UNCSA  Commission on Superhuman Activities (Fictional)"},{value:"UNCTAD",label:"UNCTAD  United Nations Conference on Trade and Development"},{value:"UNEP",label:"UNEP  United Nations Environmental Program"},{value:"UNESCO",label:"UNESCO  UN Educational, Scientific, and Cultural Organization"},{value:"UNHCR",label:"UNHCR  UN High Commissioner for Refugees"},{value:"UNICEF",label:"UNICEF  United Nations Children's Fund"},{value:"UNIDO",label:"UNIDO  UN Industrial Development Organization"},{value:"UNISDR",label:"UNISDR  United Nations Office for Disaster Risk Reduction"},{value:"UNODC",label:"UNODC  United Nations Office on Drugs and Crime"},{value:"UNOOSA",label:"UNOOSA  United Nations Office for Outer Space Affairs"},{value:"UNPFII",label:"UNPFII  UN Permanent Forum on Indigenous Issues"},{value:"UN-Women",label:"UN Women  United Nations Entity for Gender Equality and the Empowerment of Women"},{value:"UNWTO",label:"UNWTO  World Tourism Organization"},{value:"WFP",label:"WFP  World Food Program"},{value:"WHO",label:"WHO  World Health Organization"},{value:"WMO",label:"WMO  World Meteorological Organization"},{value:"WIPO",label:"WIPO  World Intellectual Property Organization"},{value:"WB",label:"WB  World Bank"},{value:"WTO",label:"WTO  World Trade Organization"},{value:"Crisis",label:"Crisis Committee"}],Dr=x4;Dr.map(t=>t.value);const $t="__OTHER__";function _4(t){const e=t.party==="D"?"Democrat":t.party==="R"?"Republican":"Independent";return`${t.state}  ${t.name} (${e})`}const w4=[{state:"Alabama",name:"Katie Britt",party:"R"},{state:"Alabama",name:"Tommy Tuberville",party:"R"},{state:"Alaska",name:"Lisa Murkowski",party:"R"},{state:"Alaska",name:"Dan Sullivan",party:"R"},{state:"Arizona",name:"Mark Kelly",party:"D"},{state:"Arizona",name:"Kyrsten Sinema",party:"I"},{state:"Arkansas",name:"John Boozman",party:"R"},{state:"Arkansas",name:"Tom Cotton",party:"R"},{state:"California",name:"Alex Padilla",party:"D"},{state:"California",name:"Laphonza Butler",party:"D"},{state:"Colorado",name:"Michael Bennet",party:"D"},{state:"Colorado",name:"John Hickenlooper",party:"D"},{state:"Connecticut",name:"Richard Blumenthal",party:"D"},{state:"Connecticut",name:"Chris Murphy",party:"D"},{state:"Delaware",name:"Tom Carper",party:"D"},{state:"Delaware",name:"Chris Coons",party:"D"},{state:"Florida",name:"Rick Scott",party:"R"},{state:"Florida",name:"Marco Rubio",party:"R"},{state:"Georgia",name:"Jon Ossoff",party:"D"},{state:"Georgia",name:"Raphael Warnock",party:"D"},{state:"Hawaii",name:"Brian Schatz",party:"D"},{state:"Hawaii",name:"Mazie Hirono",party:"D"},{state:"Idaho",name:"Mike Crapo",party:"R"},{state:"Idaho",name:"Jim Risch",party:"R"},{state:"Illinois",name:"Dick Durbin",party:"D"},{state:"Illinois",name:"Tammy Duckworth",party:"D"},{state:"Indiana",name:"Todd Young",party:"R"},{state:"Indiana",name:"Jim Banks",party:"R"},{state:"Iowa",name:"Chuck Grassley",party:"R"},{state:"Iowa",name:"Joni Ernst",party:"R"},{state:"Kansas",name:"Jerry Moran",party:"R"},{state:"Kansas",name:"Roger Marshall",party:"R"},{state:"Kentucky",name:"Mitch McConnell",party:"R"},{state:"Kentucky",name:"Rand Paul",party:"R"},{state:"Louisiana",name:"Bill Cassidy",party:"R"},{state:"Louisiana",name:"John Kennedy",party:"R"},{state:"Maine",name:"Susan Collins",party:"R"},{state:"Maine",name:"Angus King",party:"I"},{state:"Maryland",name:"Ben Cardin",party:"D"},{state:"Maryland",name:"Chris Van Hollen",party:"D"},{state:"Massachusetts",name:"Elizabeth Warren",party:"D"},{state:"Massachusetts",name:"Ed Markey",party:"D"},{state:"Michigan",name:"Gary Peters",party:"D"},{state:"Michigan",name:"Elissa Slotkin",party:"D"},{state:"Minnesota",name:"Amy Klobuchar",party:"D"},{state:"Minnesota",name:"Tina Smith",party:"D"},{state:"Mississippi",name:"Roger Wicker",party:"R"},{state:"Mississippi",name:"Cindy Hyde-Smith",party:"R"},{state:"Missouri",name:"Josh Hawley",party:"R"},{state:"Missouri",name:"Eric Schmitt",party:"R"},{state:"Montana",name:"Jon Tester",party:"D"},{state:"Montana",name:"Steve Daines",party:"R"},{state:"Nebraska",name:"Deb Fischer",party:"R"},{state:"Nebraska",name:"Pete Ricketts",party:"R"},{state:"Nevada",name:"Catherine Cortez Masto",party:"D"},{state:"Nevada",name:"Jacky Rosen",party:"D"},{state:"New Hampshire",name:"Jeanne Shaheen",party:"D"},{state:"New Hampshire",name:"Maggie Hassan",party:"D"},{state:"New Jersey",name:"Cory Booker",party:"D"},{state:"New Jersey",name:"Andy Kim",party:"D"},{state:"New Mexico",name:"Martin Heinrich",party:"D"},{state:"New Mexico",name:"Ben Ray Lujn",party:"D"},{state:"New York",name:"Chuck Schumer",party:"D"},{state:"New York",name:"Kirsten Gillibrand",party:"D"},{state:"North Carolina",name:"Thom Tillis",party:"R"},{state:"North Carolina",name:"Ted Budd",party:"R"},{state:"North Dakota",name:"John Hoeven",party:"R"},{state:"North Dakota",name:"Kevin Cramer",party:"R"},{state:"Ohio",name:"Sherrod Brown",party:"D"},{state:"Ohio",name:"JD Vance",party:"R"},{state:"Oklahoma",name:"James Lankford",party:"R"},{state:"Oklahoma",name:"Markwayne Mullin",party:"R"},{state:"Oregon",name:"Ron Wyden",party:"D"},{state:"Oregon",name:"Jeff Merkley",party:"D"},{state:"Pennsylvania",name:"Bob Casey Jr.",party:"D"},{state:"Pennsylvania",name:"John Fetterman",party:"D"},{state:"Rhode Island",name:"Jack Reed",party:"D"},{state:"Rhode Island",name:"Sheldon Whitehouse",party:"D"},{state:"South Carolina",name:"Lindsey Graham",party:"R"},{state:"South Carolina",name:"Tim Scott",party:"R"},{state:"South Dakota",name:"John Thune",party:"R"},{state:"South Dakota",name:"Mike Rounds",party:"R"},{state:"Tennessee",name:"Marsha Blackburn",party:"R"},{state:"Tennessee",name:"Bill Hagerty",party:"R"},{state:"Texas",name:"John Cornyn",party:"R"},{state:"Texas",name:"Ted Cruz",party:"R"},{state:"Utah",name:"Mike Lee",party:"R"},{state:"Utah",name:"John Curtis",party:"R"},{state:"Vermont",name:"Peter Welch",party:"D"},{state:"Vermont",name:"Bernie Sanders",party:"I"},{state:"Virginia",name:"Mark Warner",party:"D"},{state:"Virginia",name:"Tim Kaine",party:"D"},{state:"Washington",name:"Patty Murray",party:"D"},{state:"Washington",name:"Maria Cantwell",party:"D"},{state:"West Virginia",name:"Shelley Moore Capito",party:"R"},{state:"West Virginia",name:"Jim Justice",party:"R"},{state:"Wisconsin",name:"Tammy Baldwin",party:"D"},{state:"Wisconsin",name:"Ron Johnson",party:"R"},{state:"Wyoming",name:"John Barrasso",party:"R"},{state:"Wyoming",name:"Cynthia Lummis",party:"R"}],E4=w4.map(_4),b4=["Algeria","Bahrain","Comoros","Djibouti","Egypt","Iraq","Jordan","Kuwait","Lebanon","Libya","Mauritania","Morocco","Oman","State of Palestine","Qatar","Saudi Arabia","Somalia","Sudan","Syrian Arab Republic","Tunisia","United Arab Emirates","Yemen"],S4=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],C4=["Algeria","Argentina","Australia","Azerbaijan","Brazil","Cabo Verde","Cameroon","Chile","China","Cte d'Ivoire","Cuba","Djibouti","Ethiopia","France","Guyana","India","Japan","Kazakhstan","Kenya","Malaysia","Mexico","Morocco","Netherlands","New Zealand","Peru","Philippines","Republic of Korea","Russian Federation","Senegal","Serbia","Slovenia","South Africa","Sweden","Tunisia","United Kingdom","United States"],T4=["Keir Starmer (Labour  PM)","David Lammy (Labour  Justice)","Rachel Reeves (Labour  Chancellor)","Pat McFadden (Labour  Work & Pensions)","Darren Jones (Labour  Cabinet)","Yvette Cooper (Labour  Foreign Sec)","John Healey (Labour  Defence)","Shabana Mahmood (Labour  Home Sec)","Wes Streeting (Labour  Health)","Bridget Phillipson (Labour  Education)","Ed Miliband (Labour  Energy)","Liz Kendall (Labour  Science)","Jonathan Reynolds (Labour  Whip)","Heidi Alexander (Labour  Transport)","Diane Abbott (Labour  MP Hackney)","Bayo Alaba (Labour  MP Southend)","Dawn Butler (Labour  MP Brent)","Kemi Badenoch (Conservative)","Mel Stride (Conservative)","Priti Patel (Conservative)","Chris Philp (Conservative)","James Cartlidge (Conservative)","Robert Jenrick (Conservative)","Victoria Atkins (Conservative)","Laura Trott (Conservative)","Tom Tugendhat (Conservative)","James Cleverly (Conservative)","Ed Davey (Lib Dem)","Daisy Cooper (Lib Dem)","Helen Morgan (Lib Dem)","Stephen Flynn (SNP)","Pete Wishart (SNP)","Nigel Farage (Reform UK)","Richard Tice (Reform UK)","Lee Anderson (Reform UK)"],I4=["African News Agency (ANA)","Agence France-Presse (AFP)","Agenzia Nazionale Stampa Associata (ANSA)","Al Jazeera","AP News","Asian News International (ANI)","Australian Broadcasting Corporation (ABC)","British Broadcasting Corporation (BBC)","CBC (Canada)","Channel News Asia (CNA)","China Central Television (CCTV)","DW News (Germany)","Fox News (USA)","Global Times (GT)","Le Monde (LEM)","Korean Central News Agency (KCNA)","Kyodo News (Japan)","NBC News (USA)","New York Times (NYT)","NHK (Japan)","Novaya Gazeta Europe (NGE)","Prensa Latina (PL)","Rappler (RAP)","Reuters (REU)","Russia Today (RT)","South China Morning Post (SCMP)","The Guardian (TG)","The Times of Israel (TOI)","The Washington Post (WP)","Xinhua News Agency (XNA)","Yonhap News Agency (YNA)"],k4=["Vladimir Putin (Pres Russia)","Dmitry Medvedev (PM Russia)","Sergei Shoigu (Defence Minister)","Valery Gerasimov (Chief of Staff)","Sergey Lavrov (Foreign Min)","Oleksandr Turchynov (Acting Pres Ukraine)","Arseniy Yatsenyuk (PM Ukraine)","Barack Obama (US Pres)","John Kerry (US Sec of State)","Angela Merkel (German Chancellor)","David Cameron (PM UK)","Ban Ki-moon (UN SG)","Xi Jinping (China Pres)","Cao Cao (Wei)","Sima Yi (Wei)","Zhuge Liang (Shu)","Lin Zexu (Viceroy)","Daoguang Emperor","Viscount Melbourne (British PM)","Lord Palmerston (Foreign Secretary)","Charles Elliot (Trade Superintendent)"],Tb=["China","France","Russian Federation","United Kingdom","United States","Albania","Brazil","Gabon","Ghana","India","Ireland","Kenya","Mexico","Norway","United Arab Emirates"],N4=[...Tb],pp={UNSC:Tb,HSC:N4,"US-Senate":E4,AL:b4,EU:S4,IOPC:C4,UKPC:T4,PC:I4,HCC:k4},Nx=[...y4],A4=new Set(Object.keys(pp));function Ax(t){return(t??"").replace(/[\u2013\u2014\u2212\-]/g,"-").trim()}function R4(t){const e=(t??"").trim();if(!e)return"";if(pp[e])return e;const n=Ax(e),r=Dr.find(i=>i.value===e||i.label===e||Ax(i.label)===n);if(r)return r.value;const s=e.match(/^([A-Za-z0-9\-]+)\s*[\-\s]/);return s!=null&&s[1]&&A4.has(s[1])?s[1]:e}function Fa(t){if(!t||!t.trim())return Nx;const e=R4(t),n=e?pp[e]:void 0;return n?[...n]:Nx}function P4(t,e){const n=Fa(t),r=new Set(e),s=new Set(n),i=e.filter(u=>!s.has(u)),a=e.filter(u=>s.has(u)),l=n.filter(u=>!r.has(u));return[...a,...l,...i]}function j4(){const{delegates:t,addDelegate:e,removeDelegate:n,updateDelegate:r,committee:s,addStrike:i,removeStrike:a,getStrikeCountsByType:l,getDelegationEmoji:u,setDelegationEmoji:d}=bt(),[f,m]=C.useState(""),[g,_]=C.useState(""),[E,R]=C.useState(""),[A,w]=C.useState(""),[v,S]=C.useState(!1),[N,B]=C.useState(null),[U,T]=C.useState(""),[x,I]=C.useState(null),[k,P]=C.useState(""),[j,b]=C.useState(""),[Y,ce]=C.useState(null),[St,ze]=C.useState(""),G=f===fi?g.trim():f,ee=P4(s,t.map(q=>q.country)),te=()=>{G&&(e({country:G,name:E.trim()||void 0,email:A.trim()||void 0,committee:s||void 0,rollCallStatus:"absent"}),m(""),_(""),R(""),w(""))},xe=()=>{Fa(s).forEach(F=>{t.some(H=>H.country===F)||e({country:F,committee:s||void 0,rollCallStatus:"absent"})}),S(!1)};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Delegates",c.jsx(nr,{title:"Delegates",children:"Add all countries in the room. Select from the UNGA dropdown or add custom. You can set a name and email per delegate. Use the  icon to set a custom flag/emoji for non-UN delegations (e.g. FWC). Strikes can be recorded per delegate."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Add or remove delegates. Country list is tailored to this committee (e.g. UNSC shows 15 members; GA committees show all UNGA). Use  to set a custom emoji for non-UN delegations."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add delegate"}),c.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Country"}),c.jsxs("select",{value:f,onChange:q=>m(q.target.value),className:"min-w-[12rem] max-w-[20rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Country / delegation",children:[c.jsx("option",{value:"",children:" Select country "}),ee.map(q=>c.jsx("option",{value:q,children:q},q)),c.jsx("option",{value:fi,children:" Other "})]})]}),f===fi&&c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Custom country"}),c.jsx("input",{type:"text",value:g,onChange:q=>_(q.target.value),placeholder:"e.g. Observer State",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Name (optional)"}),c.jsx("input",{type:"text",value:E,onChange:q=>R(q.target.value),placeholder:"Delegate name",className:"w-40 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Email (optional)"}),c.jsx("input",{type:"email",value:A,onChange:q=>w(q.target.value),placeholder:"delegate@example.com",className:"w-48 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("button",{onClick:te,disabled:!G,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap items-center gap-2",children:c.jsx("button",{onClick:()=>S(!0),className:"px-3 py-1.5 rounded-lg bg-[var(--accent-soft)] text-[var(--accent)] text-sm font-medium hover:bg-[var(--accent-soft)]/80 transition-colors",children:"Add all UNGA members not in list"})})]}),v&&c.jsxs("div",{className:"rounded-xl border border-[var(--accent)] bg-[var(--accent-soft)] p-4 flex items-center justify-between flex-wrap gap-2",children:[c.jsxs("p",{className:"text-sm text-[var(--text)]",children:["Add all possible participants for this committee not yet in the list?",Fa(s).length<50&&c.jsxs("span",{className:"text-[var(--text-muted)] ml-1",children:["(",Fa(s).length," for this committee)"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>S(!1),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm",children:"Cancel"}),c.jsx("button",{onClick:xe,className:"px-3 py-1.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium",children:"Add all"})]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)] flex items-center gap-2",children:[c.jsx(Ru,{className:"w-4 h-4 text-[var(--text-muted)]"}),c.jsxs("span",{className:"text-sm font-medium text-[var(--text)]",children:[" Current delegates (",t.length,")"]})]}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-[28rem] overflow-auto",children:[...t].sort((q,F)=>q.country.localeCompare(F.country,void 0,{sensitivity:"base"})).map(q=>{const F=l(q.id),H=Object.values(F).some(ie=>ie>=gf),de=Object.values(F).reduce((ie,gt)=>ie+gt,0),ve=x===q.id;return c.jsxs("li",{className:`px-4 py-3 flex flex-col gap-2 ${H?"bg-[var(--danger)]/10 border-l-4 border-[var(--danger)]":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[c.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2 min-w-0",children:[c.jsx("span",{className:"text-base shrink-0",title:"Delegation flag/emoji",children:u(q.country)||""}),c.jsx("strong",{className:"text-[var(--accent)] truncate",children:q.country}),q.name&&c.jsxs("span",{className:"text-[var(--text-muted)] ml-1 shrink-0",children:[" ",q.name]}),q.email&&c.jsxs("span",{className:"text-xs text-[var(--text-muted)] ml-1 shrink-0 truncate",title:q.email,children:[" ",q.email]}),de>0&&c.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 text-xs",title:"Strikes",children:[c.jsx(Bc,{className:`w-3.5 h-3.5 ${H?"text-[var(--danger)]":"text-[var(--accent)]"}`}),de]})]}),c.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[c.jsx("button",{onClick:()=>{B(N===q.id?null:q.id),T(q.email??"")},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Edit delegate email",children:c.jsx(fb,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>{ce(Y===q.country?null:q.country),ze(u(q.country))},className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Set custom emoji/flag for this delegation",children:c.jsx(o4,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>I(ve?null:q.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors",title:"Add strike",children:c.jsx(Bc,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>n(q.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] transition-colors",title:"Remove delegate",children:c.jsx(Es,{className:"w-4 h-4"})})]})]}),Y===q.country&&c.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[c.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Custom emoji for this delegation:"}),c.jsx("input",{type:"text",value:St,onChange:ie=>ze(ie.target.value),placeholder:"e.g.  or paste any emoji",className:"w-24 px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),c.jsx("button",{onClick:()=>{d(q.country,St.trim()||null),ce(null),ze("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),c.jsx("button",{onClick:()=>{d(q.country,null),ce(null),ze("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear (use preset)"}),c.jsx("button",{onClick:()=>{ce(null),ze("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),N===q.id&&c.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-center",children:[c.jsx("label",{className:"text-xs text-[var(--text-muted)]",children:"Delegate email:"}),c.jsx("input",{type:"email",value:U,onChange:ie=>T(ie.target.value),placeholder:"delegate@example.com",className:"flex-1 min-w-[12rem] px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm"}),c.jsx("button",{onClick:()=>{r(q.id,{email:U.trim()||void 0}),B(null),T("")},className:"px-2 py-1.5 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Apply"}),c.jsx("button",{onClick:()=>{r(q.id,{email:void 0}),B(null),T("")},className:"px-2 py-1.5 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-xs",children:"Clear"}),c.jsx("button",{onClick:()=>{B(null),T("")},className:"px-2 py-1.5 rounded-lg text-[var(--text-muted)] text-xs",children:"Cancel"})]}),Object.keys(F).length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(F).map(([ie,gt])=>c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-md ${gt>=gf?"bg-[var(--danger)]/20 text-[var(--danger)]":"bg-[var(--accent-soft)] text-[var(--accent)]"}`,children:[ie,": ",gt,c.jsx("button",{onClick:()=>a(q.id,ie),className:"p-0.5 rounded hover:bg-black/10",title:"Remove one strike",children:c.jsx(mp,{className:"w-3 h-3"})})]},ie))}),ve&&c.jsxs("div",{className:"pt-2 border-t border-[var(--border)] flex flex-wrap gap-2 items-end",children:[c.jsxs("select",{value:j,onChange:ie=>{const gt=ie.target.value;b(gt),gt&&(i(q.id,gt),I(null),b(""),P(""))},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[c.jsx("option",{value:"",children:" Select misbehaviour"}),p4.map(ie=>c.jsx("option",{value:ie,children:ie},ie))]}),c.jsx("input",{type:"text",value:k,onChange:ie=>P(ie.target.value),placeholder:"Or type custom",className:"w-36 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsx("button",{onClick:()=>{const ie=k.trim();ie&&(i(q.id,ie),I(null),P(""),b(""))},disabled:!k.trim(),className:"px-3 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add strike (custom)"}),c.jsx("button",{onClick:()=>{I(null),P(""),b("")},className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-[var(--text-muted)] text-sm",children:"Cancel"})]})]},q.id)})})]})]})}const D4=[{id:"mod-caucus",label:"Moderated caucus",type:"motion",template:t=>`Motion for moderated caucus for ${t.duration||"___"} on the topic of ${t.topic||"___"} with ${t.speakerTime||"___"} per speaker`,fields:[{key:"duration",label:"Total time",placeholder:"e.g. 10 minutes"},{key:"topic",label:"Topic",placeholder:"e.g. causes of conflict"},{key:"speakerTime",label:"Time per speaker",placeholder:"e.g. 45 seconds"}]},{id:"unmod-caucus",label:"Unmoderated caucus",type:"motion",template:t=>`Motion for unmoderated caucus for ${t.duration||"___"}`,fields:[{key:"duration",label:"Duration",placeholder:"e.g. 5 minutes"}]},{id:"open-speaker-list",label:"Open speaker list",type:"motion",template:()=>"Motion to open the speaker list",fields:[]},{id:"close-speaker-list",label:"Close speaker list",type:"motion",template:()=>"Motion to close the speaker list",fields:[]},{id:"point-order",label:"Point of order",type:"point",template:()=>"Point of order",fields:[]},{id:"point-information",label:"Point of information",type:"point",template:()=>"Point of information",fields:[]},{id:"point-personal",label:"Point of personal privilege",type:"point",template:()=>"Point of personal privilege",fields:[]}];function O4(){const{motions:t,addMotion:e,starMotion:n,setMotionStatus:r,startVote:s}=bt(),[i,a]=C.useState(""),[l,u]=C.useState("motion"),[d,f]=C.useState(!1),[m,g]=C.useState(null),[_,E]=C.useState({}),R=()=>{i.trim()&&(e(i.trim(),l),a(""))},A=N=>{g(N),E({}),u(N.type)},w=()=>{if(!m)return;const N=m.template(_);e(N,m.type),g(null),E({}),f(!1)},v=t.filter(N=>N.status==="active"),S=t.filter(N=>N.status!=="active");return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Motions & Points"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record and star motions and points."})]}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>u("motion"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="motion"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Motion"}),c.jsx("button",{onClick:()=>u("point"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${l==="point"?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:" Point"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:i,onChange:N=>a(N.target.value),onKeyDown:N=>N.key==="Enter"&&R(),placeholder:l==="motion"?"e.g. Motion to open the speaker list":"e.g. Point of order",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"}),"  Add"]})]}),c.jsxs("div",{className:"border-t border-[var(--border)] pt-3 mt-3",children:[c.jsxs("button",{type:"button",onClick:()=>f(!d),className:"flex items-center gap-1.5 text-xs font-medium text-[var(--text-muted)] hover:text-[var(--accent)]",children:[d?c.jsx(hp,{className:"w-3.5 h-3.5"}):c.jsx(Bi,{className:"w-3.5 h-3.5"}),"Preset options"]}),d&&c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsx("div",{className:"flex flex-wrap gap-1.5",children:D4.map(N=>c.jsx("button",{type:"button",onClick:()=>A(N),className:`px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors ${(m==null?void 0:m.id)===N.id?"bg-[var(--accent)] text-white":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]"}`,children:N.label},N.id))}),m&&c.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3 space-y-2",children:[m.fields.length===0?c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:m.template({})}):m.fields.map(N=>c.jsxs("label",{className:"block",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-0.5",children:N.label}),c.jsx("input",{type:"text",value:_[N.key]??"",onChange:B=>E(U=>({...U,[N.key]:B.target.value})),placeholder:N.placeholder,className:"w-full px-2.5 py-1.5 rounded-md bg-[var(--bg-card)] border border-[var(--border)] text-[var(--text)] text-sm placeholder-[var(--text-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},N.key)),c.jsxs("div",{className:"flex gap-2 pt-1",children:[c.jsxs("button",{type:"button",onClick:w,className:"px-3 py-1.5 rounded-md bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:["Add ",m.type==="motion"?"motion":"point"]}),c.jsx("button",{type:"button",onClick:()=>g(null),className:"px-3 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] text-xs font-medium",children:"Cancel"})]})]})]})]})]}),v.length>0&&c.jsxs("div",{className:"rounded-xl border border-[var(--accent)]/40 bg-[var(--accent-soft)]/30 p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-3",children:" Active"}),c.jsx("ul",{className:"space-y-2",children:v.map(N=>c.jsxs("li",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>n(N.id),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--accent)]",title:N.starred?"Unstar":"Star",children:c.jsx(Ex,{className:`w-4 h-4 ${N.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),c.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:N.type}),c.jsx("span",{className:"text-sm text-[var(--text)] flex-1",children:N.text}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>r(N.id,"passed"),className:"p-1.5 rounded-lg bg-[var(--success)]/20 text-[var(--success)] hover:bg-[var(--success)]/30",title:"Passed",children:c.jsx(dp,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(N.id,"failed"),className:"p-1.5 rounded-lg bg-[var(--danger)]/20 text-[var(--danger)] hover:bg-[var(--danger)]/30",title:"Failed",children:c.jsx(Pu,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(N.id,"tabled"),className:"p-1.5 rounded-lg bg-[var(--text-muted)]/20 text-[var(--text-muted)]",title:"Tabled",children:c.jsx(mp,{className:"w-4 h-4"})}),N.type==="motion"&&c.jsx("button",{onClick:()=>s(N.id),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium",children:"Vote"})]})]},N.id))})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Log"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...S].reverse().map(N=>c.jsxs("li",{className:"px-4 py-3 flex items-start gap-2",children:[c.jsx("button",{onClick:()=>n(N.id),className:"p-1 rounded mt-0.5 text-[var(--text-muted)] hover:text-[var(--accent)] flex-shrink-0",children:c.jsx(Ex,{className:`w-4 h-4 ${N.starred?"fill-[var(--accent)] text-[var(--accent)]":""}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:N.type}),c.jsx("p",{className:"text-sm text-[var(--text)]",children:N.text}),c.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-[var(--text-muted)]",children:[c.jsx("span",{children:new Date(N.timestamp).toLocaleString()}),c.jsx("span",{className:"capitalize",children:N.status}),N.type==="motion"&&N.votes&&c.jsxs("span",{children:["Yes ",N.votes.yes," / No ",N.votes.no," / Abstain ",N.votes.abstain]})]})]})]},N.id))})]})]})}function Rx(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}function M4(){const{voteInProgress:t,delegates:e,delegateVotes:n,recordVote:r,endVote:s,getDelegationEmoji:i}=bt();if(!t)return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Voting"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start a vote from a motion in Motions & Points."})]}),c.jsx("div",{className:"card-block p-8 text-center text-[var(--text-muted)]",children:' No active vote. Go to Motions & Points and click "Vote" on a motion.'})]});const a=Object.values(n).filter(g=>g==="yes").length,l=Object.values(n).filter(g=>g==="no").length,u=Object.values(n).filter(g=>g==="abstain").length,f=e.filter(g=>Rx(g)!=="absent").length,m=Object.keys(n).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Active Voting",c.jsx(nr,{title:"Voting",children:`Start a vote from a motion in Motions & Points. Record each delegate's vote: Yes, No, or Abstain. Delegates marked "Present and voting" cannot abstain. Absent delegates have no vote buttons. End vote to record the result on the motion.`})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Record each delegate's vote."})]})}),c.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)] bg-[var(--accent-soft)]/30 p-4",children:[c.jsx("p",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Motion:"}),c.jsx("p",{className:"text-[var(--text)]",children:t.text}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[c.jsxs("span",{className:"text-[var(--success)]",children:["Yes: ",a]}),c.jsxs("span",{className:"text-[var(--danger)]",children:["No: ",l]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Abstain: ",u]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Recorded: ",m," / ",f]})]}),c.jsx("button",{onClick:s,className:"mt-4 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:"End vote & record result"})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegate votes"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...e].sort((g,_)=>g.country.localeCompare(_.country,void 0,{sensitivity:"base"})).map(g=>{const _=n[g.id],E=Rx(g),R=E==="absent",A=E==="present";return c.jsxs("li",{className:`px-4 py-3 flex items-center justify-between ${R?"opacity-60":""}`,children:[c.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[c.jsx("span",{className:"shrink-0",children:i(g.country)||""}),c.jsx("strong",{className:"text-[var(--accent)]",children:g.country}),g.name&&c.jsx("span",{className:"text-[var(--text-muted)]",children:g.name}),R&&c.jsx("span",{className:"ml-2 text-xs text-[var(--text-muted)]",children:"(Absent)"})]}),R?c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:""}):c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>r(g.id,"yes"),className:`p-2 rounded-lg transition-colors ${_==="yes"?"bg-[var(--success)]/30 text-[var(--success)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--success)]"}`,title:"Yes",children:c.jsx(dp,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(g.id,"no"),className:`p-2 rounded-lg transition-colors ${_==="no"?"bg-[var(--danger)]/30 text-[var(--danger)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--danger)]"}`,title:"No",children:c.jsx(Pu,{className:"w-4 h-4"})}),A&&c.jsx("button",{onClick:()=>r(g.id,"abstain"),className:`p-2 rounded-lg transition-colors ${_==="abstain"?"bg-[var(--text-muted)]/30 text-[var(--text)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)]"}`,title:"Abstain (present only)",children:c.jsx(mp,{className:"w-4 h-4"})})]})]},g.id)})})]})]})}function Px({onClose:t}){const{committee:e,topic:n,universe:r,chairName:s,chairEmail:i,setCommittee:a,setTopic:l,setUniverse:u,setChairName:d,setChairEmail:f}=bt(),m=C.useMemo(()=>Dr.find(E=>E.value===e)?e:e?$t:"",[e]),g=_=>{a(_===$t?"":_)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold text-lg text-[var(--text)]",children:" Committee & topic"}),t&&c.jsx("button",{onClick:t,className:"text-[var(--text-muted)] hover:text-[var(--text)] text-sm",children:"Close"})]}),c.jsxs("label",{className:"block",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Set committee"}),c.jsxs("select",{value:m,onChange:_=>g(_.target.value),className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Committee",children:[c.jsx("option",{value:"",children:"Select committee"}),Dr.map(_=>c.jsx("option",{value:_.value,children:_.label},_.value)),c.jsx("option",{value:$t,children:"Other (custom)"})]}),m===$t&&c.jsx("input",{id:"chair-committee-custom",name:"committee-custom",type:"text",value:e,onChange:_=>a(_.target.value),placeholder:"e.g. Custom committee name",className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Custom committee name"})]}),c.jsxs("label",{className:"block",htmlFor:"chair-universe",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Universe (optional, for fictional committees)"}),c.jsx("input",{id:"chair-universe",name:"chair-universe",type:"text",value:r,onChange:_=>u(_.target.value),placeholder:"e.g. Star Wars, Harry Potter  leave blank for real-world",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Universe (optional)"})]}),c.jsxs("label",{className:"block",htmlFor:"chair-topic",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Topic"}),c.jsx("input",{id:"chair-topic",name:"chair-topic",type:"text",value:n,onChange:_=>l(_.target.value),placeholder:"e.g. Cybersecurity and International Peace",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("div",{className:"pt-2 border-t border-[var(--border)]",children:[c.jsx("h4",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Chair"}),c.jsxs("label",{className:"block mb-2",htmlFor:"chair-name",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair name (optional)"}),c.jsx("input",{id:"chair-name",name:"chair-name",type:"text",value:s,onChange:_=>d(_.target.value),placeholder:"e.g. Jane Smith",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair name"})]}),c.jsxs("label",{className:"block",htmlFor:"chair-email",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Chair email (optional)"}),c.jsx("input",{id:"chair-email",name:"chair-email",type:"email",value:i,onChange:_=>f(_.target.value),placeholder:"e.g. chair@conference.org",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Chair email"})]})]})]})}function L4(){const{motions:t}=bt(),e=t.filter(a=>a.status==="passed").length,n=t.filter(a=>a.status==="failed").length,r=t.filter(a=>a.status==="tabled").length,s=t.filter(a=>a.type==="motion").length,i=t.filter(a=>a.type==="point").length;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Score"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Motions and points summary."})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--success)]",children:e}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Passed"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--danger)]",children:n}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Failed"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--text-muted)]",children:r}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Tabled"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.length}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Total"})]})]}),c.jsxs("div",{className:"card-block p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)] mb-2",children:" Breakdown"}),c.jsxs("p",{className:"text-sm text-[var(--text-muted)]",children:["Motions: ",s,"  Points: ",i]})]})]})}function bl(t){return t.rollCallStatus?t.rollCallStatus:t.present?"present":"absent"}const V4={absent:"present",present:"present-and-voting","present-and-voting":"absent"},jx={absent:"Absent",present:"Present (may abstain)","present-and-voting":"Present and voting"};function U4(){const{delegates:t,rollCallComplete:e,setRollCallComplete:n,updateDelegate:r,getDelegationEmoji:s}=bt(),i=(m,g)=>{r(m,{rollCallStatus:g})},a=(m,g)=>{i(m,V4[g])},l=t.filter(m=>bl(m)==="present").length,u=t.filter(m=>bl(m)==="present-and-voting").length,d=t.filter(m=>bl(m)==="absent").length,f=l+u;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Roll Call Tracker",c.jsx(nr,{title:"Roll call",children:"Mark each delegate as Absent, Present (may abstain), or Present and voting (must vote, cannot abstain). Click a delegate's status to cycle. During voting, only present delegates can vote; present-and-voting cannot choose abstain."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Present (may abstain from voting), Present and voting (must vote, cannot abstain), or Absent. Click to cycle."})]})}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e,onChange:m=>n(m.target.checked),className:"rounded border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] focus:ring-[var(--accent)]"}),c.jsx("span",{className:"text-sm text-[var(--text)]",children:"Roll call complete"})]})}),c.jsxs("div",{className:"card-block p-4 flex flex-wrap gap-4 text-sm",children:[c.jsxs("span",{className:"text-[var(--success)]",children:["Present (may abstain): ",c.jsx("strong",{children:l})]}),c.jsxs("span",{className:"text-[var(--accent)]",children:["Present and voting: ",c.jsx("strong",{children:u})]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Absent: ",c.jsx("strong",{children:d})]}),c.jsxs("span",{className:"text-[var(--text-muted)]",children:["Total present: ",c.jsx("strong",{children:f})," / ",t.length]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Delegates"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:[...t].sort((m,g)=>m.country.localeCompare(g.country,void 0,{sensitivity:"base"})).map(m=>{const g=bl(m),_=g==="present",E=g==="present-and-voting",R=g==="absent";return c.jsxs("li",{className:"px-4 py-3 flex items-center justify-between gap-2",children:[c.jsxs("span",{className:"text-sm text-[var(--text)] min-w-0 flex items-center gap-2",children:[c.jsx("span",{className:"text-base shrink-0",children:s(m.country)||""}),c.jsx("strong",{className:"text-[var(--accent)] truncate",children:m.country}),m.name&&c.jsx("span",{className:"text-[var(--text-muted)] shrink-0",children:m.name})]}),c.jsxs("button",{onClick:()=>a(m.id,g),className:`flex items-center gap-1.5 text-xs px-2.5 py-1.5 rounded-lg transition-colors shrink-0 ${R?"text-[var(--text-muted)] bg-[var(--bg-elevated)] hover:bg-[var(--border)]":_?"text-[var(--success)] bg-[var(--success)]/10 hover:bg-[var(--success)]/20":"text-[var(--accent)] bg-[var(--accent-soft)] hover:bg-[var(--accent-soft)]/80"}`,title:jx[g],children:[R&&c.jsx(Pu,{className:"w-4 h-4"}),_&&c.jsx(dp,{className:"w-4 h-4"}),E&&c.jsx(_b,{className:"w-4 h-4"}),jx[g]]})]},m.id)})})]}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Click a delegate's status to cycle: Absent  Present (may abstain)  Present and voting  Absent."})]})}function F4(){const{sessionStarted:t,sessionStartTime:e,startSession:n,stopSession:r}=bt();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Committee Session"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Start or stop the committee session."})]}),c.jsxs("div",{className:"card-block p-6 flex flex-col sm:flex-row items-center gap-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`w-3 h-3 rounded-md ${t?"bg-[var(--success)] animate-pulse":"bg-[var(--text-muted)]"}`}),c.jsx("span",{className:"text-sm font-medium text-[var(--text)]",children:t?" Session in progress":" Session not started"})]}),e&&c.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Started: ",new Date(e).toLocaleString()]}),c.jsx("div",{className:"flex gap-3",children:t?c.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--danger)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[c.jsx(Au,{className:"w-4 h-4"}),"  Stop session"]}):c.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--success)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[c.jsx(gb,{className:"w-4 h-4"}),"  Start session"]})})]})]})}const Ud=30,Fd=300;function B4(){const{delegates:t,speakers:e,activeSpeaker:n,speakerDuration:r,setSpeakerDuration:s,addToSpeakers:i,removeFromSpeakers:a,setActiveSpeaker:l,getDelegationEmoji:u}=bt(),[d,f]=C.useState(""),[m,g]=C.useState(0),[_,E]=C.useState(String(r));C.useEffect(()=>{if(!(n!=null&&n.startTime))return;const v=setInterval(()=>{g(Math.floor((Date.now()-n.startTime)/1e3))},1e3);return()=>clearInterval(v)},[n==null?void 0:n.startTime,n==null?void 0:n.id]),C.useEffect(()=>{E(String(r))},[r]);const R=()=>{const v=parseInt(_,10);!Number.isNaN(v)&&v>=Ud&&v<=Fd?(s(v),E(String(v))):E(String(r))},A=()=>{const v=t.find(S=>S.id===d);v&&(i(v.id,v.country,v.name||v.country),f(""))},w=n?Math.max(0,r-m):0;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Speakers"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Mod Speakers List, Active Speaker (Timed), Consultation Speakers."})]}),c.jsxs("div",{className:"rounded-xl border-2 border-[var(--accent)]/50 bg-[var(--accent-soft)]/30 p-4",children:[c.jsxs("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2 flex items-center gap-2",children:[c.jsx(Nu,{className:"w-4 h-4"}),"  Active speaker"]}),n?c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("span",{className:"text-lg font-semibold text-[var(--text)] flex items-center gap-2",children:[c.jsx("span",{children:u(n.country)||""}),n.country,"  ",n.name]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(xo,{className:"w-4 h-4 text-[var(--text-muted)]"}),c.jsxs("span",{className:w===0?"text-[var(--danger)]":"text-[var(--text)]",children:[Math.floor(w/60),":",String(w%60).padStart(2,"0")," remaining"]})]}),c.jsx("button",{onClick:()=>l(null),className:"px-3 py-1.5 rounded-lg bg-[var(--bg-card)] text-sm text-[var(--text)] hover:bg-[var(--border)]",children:"End speech"})]}):c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"No active speaker. Start one from the list below."})]}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Speaker duration (seconds)"}),c.jsx("input",{type:"number",min:Ud,max:Fd,value:_,onChange:v=>E(v.target.value),onBlur:R,onKeyDown:v=>v.key==="Enter"&&v.target.blur(),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Speaker duration in seconds"}),c.jsxs("p",{className:"text-xs text-[var(--text-muted)]",children:["Between ",Ud," and ",Fd," seconds. Change takes effect when you leave the field."]})]}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to speakers list"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:d,onChange:v=>f(v.target.value),className:"px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]",children:[c.jsx("option",{value:"",children:"Select delegate"}),[...t].sort((v,S)=>v.country.localeCompare(S.country,void 0,{sensitivity:"base"})).map(v=>c.jsxs("option",{value:v.id,children:[v.country," ",v.name?` ${v.name}`:""]},v.id))]}),c.jsxs("button",{onClick:A,disabled:!d,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Mod speakers list"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-80 overflow-auto",children:e.map((v,S)=>c.jsxs("li",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-6",children:[S+1,"."]}),c.jsxs("span",{className:"text-sm text-[var(--text)] flex items-center gap-2",children:[c.jsx("span",{className:"shrink-0",children:u(v.country)||""}),c.jsx("strong",{className:"text-[var(--accent)]",children:v.country}),"  ",v.name]}),v.speaking&&c.jsx("span",{className:"px-2 py-0.5 rounded bg-[var(--accent-soft)] text-[var(--accent)] text-xs font-medium",children:"Speaking"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!v.speaking&&c.jsx("button",{onClick:()=>l(v),className:"px-2 py-1 rounded-lg bg-[var(--accent)] text-white text-xs font-medium hover:opacity-90",children:"Start"}),c.jsx("button",{onClick:()=>a(v.id),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]",title:"Remove",children:c.jsx(Es,{className:"w-4 h-4"})})]})]},v.id))})]})]})}const z4=[{id:"slides",label:"Slides",icon:hb},{id:"speakers",label:"Speakers",icon:Nu},{id:"facts",label:"Facts",icon:ku},{id:"pathways",label:"Pathways",icon:s4}];function $4(){const{crisisSlides:t,crisisSpeakers:e,crisisFacts:n,crisisPathways:r,addCrisisSlide:s,addCrisisSpeaker:i,addCrisisFact:a,addCrisisPathway:l}=bt(),[u,d]=C.useState("slides"),[f,m]=C.useState(""),g=()=>{f.trim()&&(u==="slides"&&s(f.trim()),u==="speakers"&&i(f.trim()),u==="facts"&&a(f.trim()),u==="pathways"&&l(f.trim()),m(""))},E={slides:t,speakers:e,facts:n,pathways:r}[u];return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Crisis Dashboard"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Slides  Speakers  Facts  Pathways."})]}),c.jsx("div",{className:"flex gap-2 border-b border-[var(--border)] pb-2",children:z4.map(({id:R,label:A,icon:w})=>c.jsxs("button",{onClick:()=>d(R),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${u===R?"bg-[var(--accent-soft)] text-[var(--accent)]":"text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[c.jsx(w,{className:"w-4 h-4"})," ",A]},R))}),c.jsxs("div",{className:"card-block p-4 space-y-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:f,onChange:R=>m(R.target.value),onKeyDown:R=>R.key==="Enter"&&g(),placeholder:u==="slides"?"Slide title or URL":u==="speakers"?"Speaker name":u==="facts"?"Fact":"Pathway description",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:E.map((R,A)=>c.jsx("li",{className:"px-3 py-2 flex items-center justify-between text-sm text-[var(--text)]",children:R},A))})]})]})}const H4=[{id:"position",label:" Position papers",icon:ku},{id:"chair-report",label:" Chair reports",icon:Mo},{id:"slides",label:" Slides (ceremony or crisis)",icon:hb},{id:"speeches",label:" Speeches",icon:Nu},{id:"prep",label:" Prep document",icon:KO}];function W4(){const{archive:t,addToArchive:e}=bt(),[n,r]=C.useState("position"),[s,i]=C.useState(""),[a,l]=C.useState(""),u=()=>{s.trim()&&(e(n,s.trim(),a.trim()||void 0),i(""),l(""))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Archive"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Position papers, chair reports, slides, speeches, prep docs."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Add to archive"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:H4.map(({id:d,label:f,icon:m})=>c.jsxs("button",{onClick:()=>r(d),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n===d?"bg-[var(--accent-soft)] text-[var(--accent)]":"bg-[var(--bg-elevated)] text-[var(--text-muted)]"}`,children:[c.jsx(m,{className:"w-4 h-4"})," ",f]},d))}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"Document name",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsx("textarea",{value:a,onChange:d=>l(d.target.value),placeholder:"Optional content or link",rows:2,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"}),c.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]})]}),c.jsxs("div",{className:"card-block overflow-hidden",children:[c.jsx("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Archive"})}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-96 overflow-auto",children:t.length===0?c.jsx("li",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"No items in archive yet."}):t.slice().reverse().map((d,f)=>c.jsxs("li",{className:"px-4 py-3",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] uppercase",children:d.type}),c.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:d.name}),d.content&&c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:d.content})]},f))})]})]})}const Bd=[{id:"rollcall",label:"Roll call"},{id:"open-floor",label:"Open the floor (points & motions)"},{id:"recognize-motions",label:"Recognize motions"},{id:"vote-motions",label:"Vote on motion(s)"},{id:"engage-or-gsl",label:"Engage in chosen motion or move to GSL"},{id:"open-floor-again",label:"Open the floor again"},{id:"recognize-motions-2",label:"Recognize motions (repeat as needed)"},{id:"vote-motions-2",label:"Vote on motion(s)"},{id:"continue-cycle",label:"Continue cycle (engage motion / GSL  open floor)"}];function G4(){const{toggleFlowStep:t,isFlowStepDone:e,resetFlowChecklist:n}=bt(),r=Bd.filter(s=>e(s.id)).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Committee flow checklist",c.jsx(nr,{title:"Committee flow",children:"Tick each step as you run the session: roll call  open the floor  recognize motions  vote  engage in the motion or move to GSL  open the floor again. Reset when starting a new session or cycle."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Normal committee flow  tick steps as you go. Reset when starting a new session or cycle."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[c.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[r," / ",Bd.length," done"]}),c.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(vb,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),c.jsx("ul",{className:"space-y-1",children:Bd.map(s=>{const i=e(s.id);return c.jsx("li",{children:c.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${i?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[c.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:i?c.jsx(Lo,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):c.jsx(Au,{className:"w-5 h-5"})}),c.jsx("span",{className:`text-sm ${i?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:s.label}),c.jsx("input",{type:"checkbox",checked:i,onChange:()=>t(s.id),className:"sr-only","aria-label":s.label})]})},s.id)})})]})]})}const Dx=[{title:" Rules & procedure",steps:[{id:"prep-rules-read",label:"Read and understand committee rules of procedure"},{id:"prep-parliamentary",label:"Review parliamentary procedure (motions, points, voting)"},{id:"prep-time-limits",label:"Confirm speaking times and time limits"},{id:"prep-quorum",label:"Know quorum and voting requirements"}]},{title:" Committee & topic",steps:[{id:"prep-topic-research",label:"Research committee topic and background"},{id:"prep-study-guide",label:"Read study guide and key documents"},{id:"prep-committee-set",label:"Set committee name and topic in dashboard"},{id:"prep-agenda",label:"Prepare session agenda and flow"}]},{title:" Room & tech",steps:[{id:"prep-room-setup",label:"Set up digital room (delegates list, placards)"},{id:"prep-tech-check",label:"Tech check: platform, audio, screen share"},{id:"prep-backup",label:"Have backup plan if tech fails"}]},{title:" Materials & logistics",steps:[{id:"prep-rollcall-list",label:"Prepare roll call list and attendance"},{id:"prep-speakers-list",label:"Plan speakers list management"},{id:"prep-motions-templates",label:"Prepare common motions / points (if using templates)"},{id:"prep-timing",label:"Confirm session start time and breaks"}]},{title:" Crisis (if applicable)",steps:[{id:"prep-crisis-brief",label:"Review crisis elements and update slides"},{id:"prep-crisis-speakers",label:"Plan crisis speaker order / cues"},{id:"prep-crisis-pathways",label:"Prepare crisis pathways and facts"}]},{title:" Team & communication",steps:[{id:"prep-co-chair",label:"Coordinate with co-chair(s) on roles"},{id:"prep-staff",label:"Confirm staff / dais support and cues"},{id:"prep-delegate-brief",label:"Prepare brief for delegates (rules, timing)"}]}];function q4(){const{togglePrepStep:t,isPrepStepDone:e,resetPrepChecklist:n}=bt(),r=Dx.flatMap(i=>i.steps),s=r.filter(i=>e(i.id)).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Chair preparation checklist",c.jsx(nr,{title:"Chair prep",children:"Before the conference: review rules and procedure, research the topic, set up the digital room and tech, prepare roll call and speakers list, and coordinate with co-chairs. Reset when prepping a new session."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Before the conference: rules, topic, room, materials, and team. Reset when prepping a new session."})]})}),c.jsxs("div",{className:"card-block p-4 flex items-center justify-between gap-2 mb-4",children:[c.jsxs("span",{className:"text-xs font-medium text-[var(--text-muted)]",children:[s," / ",r.length," done"]}),c.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx(vb,{className:"w-3.5 h-3.5"}),"Reset checklist"]})]}),c.jsx("div",{className:"space-y-5",children:Dx.map(i=>c.jsxs("div",{className:"card-block p-4",children:[c.jsx("h3",{className:"font-medium text-[var(--text)] mb-3",children:i.title}),c.jsx("ul",{className:"space-y-1",children:i.steps.map(a=>{const l=e(a.id);return c.jsx("li",{children:c.jsxs("label",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${l?"bg-[var(--success)]/10 text-[var(--text)]":"hover:bg-[var(--bg-elevated)]"}`,children:[c.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:l?c.jsx(Lo,{className:"w-5 h-5 fill-[var(--success)] text-[var(--success)]"}):c.jsx(Au,{className:"w-5 h-5"})}),c.jsx("span",{className:`text-sm ${l?"line-through text-[var(--text-muted)]":"text-[var(--text)]"}`,children:a.label}),c.jsx("input",{type:"checkbox",checked:l,onChange:()=>t(a.id),className:"sr-only","aria-label":a.label})]})},a.id)})})]},i.title))})]})}const K4=[{step:1,title:"Set committee & topic",body:"Open Settings () or go to  Committee & Topic. Enter committee name, optional universe for fictional committees, topic, and your chair name/email."},{step:2,title:"Prep checklist",body:"Use  Prep checklist to tick off rules, topic research, room setup, materials, and team coordination before the conference."},{step:3,title:"Add delegates",body:"Go to  Delegates. Select country from the dropdown (all UNGA members) or add custom. Optionally add name and email. Use the  icon to set a custom flag/emoji for delegations like FWC."},{step:4,title:"Roll call",body:"In  Roll Call, mark each delegate as Absent, Present (may abstain), or Present and voting (must vote). Click to cycle. Mark roll call complete when done."},{step:5,title:"Digital Room",body:" Digital Room shows all delegates with their roll-call status. Click a delegate to give a compliment or concern reminder."},{step:6,title:"Flow checklist",body:"Use  Flow checklist during the session: roll call  open floor  recognize motions  vote  engage or GSL  repeat."},{step:7,title:"Motions & voting",body:"In  Motions & Points, add motions or points. Start a vote from a motion; in  Voting record each delegate's vote (Yes/No/Abstain). Present and voting delegates cannot abstain."},{step:8,title:"Speakers",body:"In  Speakers, add delegates to the mod speakers list, set speaking time, and start/stop the active speaker with the timer."},{step:9,title:"Crisis & archive",body:"Use  Crisis for crisis elements. Use  Archive to store position papers, chair reports, and prep docs."}];function Q4(){const[t,e]=C.useState(!1);return c.jsxs("section",{className:"mt-10 pt-6 border-t border-[var(--border)]","aria-labelledby":"chair-howto-heading",children:[c.jsxs("button",{type:"button",onClick:()=>e(n=>!n),className:"flex items-center gap-2 w-full text-left group","aria-expanded":t,children:[c.jsx(Mo,{className:"w-5 h-5 text-[var(--accent)] shrink-0"}),c.jsx("h2",{id:"chair-howto-heading",className:"font-semibold text-lg text-[var(--text)] group-hover:text-[var(--accent)] transition-colors",children:"How to use this system (Chair)"}),t?c.jsx(hp,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"}):c.jsx(Bi,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"})]}),t&&c.jsxs("div",{className:"mt-4 space-y-4 text-sm text-[var(--text-muted)]",children:[c.jsx("p",{className:"text-[var(--text)]",children:"Step-by-step guide for running committee in the Chair Room:"}),c.jsx("ol",{className:"space-y-3 list-none pl-0",children:K4.map(({step:n,title:r,body:s})=>c.jsxs("li",{className:"flex gap-3",children:[c.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-[var(--accent-soft)] text-[var(--accent)] font-semibold flex items-center justify-center text-xs",children:n}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-[var(--text)]",children:r}),c.jsx("p",{className:"mt-0.5",children:s})]})]},n))})]})]})}const gp=[{category:"Documents & articles",sources:[{name:"UN Official Document System (ODS)",url:"https://documents.un.org/"},{name:"UN Digital Library",url:"https://digitallibrary.un.org/"},{name:"UN News",url:"https://news.un.org/"},{name:"UN Yearbook",url:"https://www.un.org/en/yearbook/"},{name:"UN Press",url:"https://press.un.org/"}]},{category:"Legislation & treaties",sources:[{name:"UN Treaty Collection",url:"https://treaties.un.org/"},{name:"UN Audiovisual Library of International Law",url:"https://legal.un.org/avl/"},{name:"UNCITRAL (International Trade Law)",url:"https://uncitral.un.org/"},{name:"UN Charter",url:"https://www.un.org/en/about-us/un-charter"}]},{category:"Main bodies",sources:[{name:"UN General Assembly",url:"https://www.un.org/ga/"},{name:"UN Security Council",url:"https://www.un.org/securitycouncil/"},{name:"UN ECOSOC",url:"https://www.un.org/ecosoc/"},{name:"International Court of Justice (ICJ)",url:"https://www.icj-cij.org/"},{name:"UN Secretariat",url:"https://www.un.org/sg/"},{name:"UN Trusteeship Council",url:"https://www.un.org/en/about-us/trusteeship-council"}]},{category:"Programmes & funds",sources:[{name:"UNDP",url:"https://www.undp.org/"},{name:"UNICEF",url:"https://www.unicef.org/"},{name:"UNHCR",url:"https://www.unhcr.org/"},{name:"WFP (World Food Programme)",url:"https://www.wfp.org/"},{name:"UNFPA",url:"https://www.unfpa.org/"},{name:"UN Environment Programme (UNEP)",url:"https://www.unep.org/"},{name:"UN Women",url:"https://www.unwomen.org/"},{name:"UN-Habitat",url:"https://unhabitat.org/"}]},{category:"Specialized agencies & related",sources:[{name:"WHO",url:"https://www.who.int/"},{name:"UNESCO",url:"https://www.unesco.org/"},{name:"IOM (International Organization for Migration)",url:"https://www.iom.int/"},{name:"UN Office on Drugs and Crime (UNODC)",url:"https://www.unodc.org/"},{name:"UN Office for Disarmament Affairs (UNODA)",url:"https://www.un.org/disarmament/"},{name:"UN Human Rights (OHCHR)",url:"https://www.ohchr.org/"},{name:"World Bank",url:"https://www.worldbank.org/"},{name:"IMF",url:"https://www.imf.org/"},{name:"ILO",url:"https://www.ilo.org/"},{name:"FAO",url:"https://www.fao.org/"}]},{category:"Peacekeeping & missions",sources:[{name:"UN Peacekeeping",url:"https://peacekeeping.un.org/"},{name:"UN Peacekeeping  current missions",url:"https://peacekeeping.un.org/en/missions"},{name:"UN Special Political Missions",url:"https://dppa.un.org/en/special-political-missions"}]},{category:"Founders & members",sources:[{name:"UN Member States",url:"https://www.un.org/en/about-us/member-states"},{name:"UN System (founders & members)",url:"https://www.un.org/en/about-us/un-system"},{name:"UN History",url:"https://www.un.org/en/about-us/history"}]}],Ib=gp.flatMap(t=>t.sources);function vp({compact:t=!1,showHeading:e=!0}){return c.jsxs("div",{className:"space-y-4",children:[e&&c.jsxs("div",{children:[c.jsx("h2",{className:"section-heading text-[var(--text)] mb-0.5",children:" Official UN links"}),c.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:"Documents, treaties, main bodies, programmes, missions, and member info. Open in new tab."})]}),c.jsx("div",{className:t?"space-y-3":"space-y-5",children:gp.map(({category:n,sources:r})=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 sm:mb-2",children:n}),c.jsx("ul",{className:t?"flex flex-wrap gap-1.5":"flex flex-wrap gap-2",children:r.map(({name:s,url:i})=>c.jsx("li",{children:c.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:`inline-block rounded-md border border-[var(--border)] bg-[var(--bg-elevated)] text-[var(--accent)] hover:bg-[var(--accent-soft)] transition-colors ${t?"px-2 py-1 text-xs":"px-2.5 py-1.5 text-sm"}`,children:[s," "]})},s))})]},n))})]})}const kb="seamuns-dashboard-sidebar-expanded";function J4(){try{const t=localStorage.getItem(kb);return t===null?!0:t==="true"}catch{return!0}}const Y4=[{id:"committee",label:" Committee & Topic",icon:Mo},{id:"prep",label:" Prep checklist",icon:XO},{id:"flow",label:" Flow checklist",icon:Lo},{id:"delegates",label:" Delegates",icon:xb},{id:"room",label:" Digital Room",icon:YO},{id:"rollcall",label:" Roll Call",icon:_x},{id:"session",label:" Session",icon:gb},{id:"speakers",label:" Speakers",icon:Nu},{id:"motions",label:" Motions & Points",icon:ku},{id:"voting",label:" Voting",icon:_b},{id:"score",label:" Score",icon:_x},{id:"crisis",label:" Crisis",icon:Bc},{id:"archive",label:" Archive",icon:WO},{id:"links",label:" Official links",icon:pf}];function X4(){const[t,e]=C.useState("committee"),[n,r]=C.useState(!1),[s,i]=C.useState(J4),{saveToAccount:a,isLoaded:l}=bt();C.useEffect(()=>{localStorage.setItem(kb,String(s))},[s]),C.useEffect(()=>{l&&a()},[t,l,a]);const u=()=>i(d=>!d);return c.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[c.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${s?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:c.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[Y4.map(({id:d,label:f,icon:m})=>c.jsxs("button",{onClick:()=>e(d),title:f,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===d?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[c.jsx(m,{className:"w-3.5 h-3.5 flex-shrink-0"}),c.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:f})]},d)),c.jsxs("button",{onClick:()=>r(!n),title:"Settings",className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] mt-auto shrink-0 ${s?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"}`,children:[c.jsx(a4,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:s?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:" Settings"})]}),c.jsxs("button",{type:"button",onClick:u,title:s?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[s?c.jsx(mb,{className:"w-4 h-4 flex-shrink-0"}):c.jsx(pb,{className:"w-4 h-4 flex-shrink-0"}),s&&c.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),c.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[n&&c.jsx("div",{className:"mb-6 p-4 card-block",children:c.jsx(Px,{onClose:()=>r(!1)})}),t==="prep"&&c.jsx(q4,{}),t==="flow"&&c.jsx(G4,{}),t==="room"&&c.jsx(v4,{}),t==="delegates"&&c.jsx(j4,{}),t==="motions"&&c.jsx(O4,{}),t==="voting"&&c.jsx(M4,{}),t==="committee"&&c.jsx(Px,{}),t==="score"&&c.jsx(L4,{}),t==="rollcall"&&c.jsx(U4,{}),t==="session"&&c.jsx(F4,{}),t==="speakers"&&c.jsx(B4,{}),t==="crisis"&&c.jsx($4,{}),t==="archive"&&c.jsx(W4,{}),t==="links"&&c.jsx("div",{className:"card-block p-4 sm:p-6",children:c.jsx(vp,{showHeading:!0})}),c.jsx(Q4,{})]})]})}function Z4(){const{saveToAccount:t,isSaving:e,lastSaved:n,isLoaded:r}=bt(),{isAuthenticated:s}=Oo(),i=a=>{const l=Date.now()-a.getTime();return l<6e4?"Saved just now":l<36e5?`Saved ${Math.floor(l/6e4)}m ago`:a.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return c.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[c.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:c.jsx(db,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Chair Room"}),c.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Digital Room   Motions   Voting   Speakers"}),r&&!s&&c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Data is saved automatically to this device. Sign in to save to your account and sync across devices."}),r&&s&&c.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:"Data is saved automatically to this device and to your account."})]}),r&&s&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>t(),disabled:e,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[c.jsx(yb,{className:"w-3.5 h-3.5"}),e?"Saving":"Save to account"]}),n&&!e&&c.jsxs("span",{className:"text-xs text-[var(--text-muted)]",title:"Auto-saved to your account",children:["Auto-saved ",i(n)]})]})]})}function eM(){const{user:t}=Oo(),e=(t==null?void 0:t.uid)??null;return c.jsxs(m4,{userId:e,children:[c.jsx(Z4,{}),c.jsx(X4,{})]})}const Nb="delegateData";async function tM(t){if(!Gr)return null;const e=Iu(Gr,Nb,t),n=await sb(e);return n.exists()?n.data():null}async function Ox(t,e){if(!Gr)return;const n=Iu(Gr,Nb,t);await ib(n,e)}const Ab="seamuns-dashboard-delegate-state";function Rb(t){const e=t.committeeMatrix&&Object.keys(t.committeeMatrix).length>0,n=t.committeeMatrixEntries&&t.committeeMatrixEntries.length>0;return{...t,delegateEmail:t.delegateEmail??"",positionPaperDeadline:t.positionPaperDeadline??"",conferenceEndDate:t.conferenceEndDate??"",committeeCount:t.committeeCount??0,committees:t.committees??[],committeeMatrixEntries:e&&!n&&t.committeeMatrix?Object.entries(t.committeeMatrix).map(([s,i])=>({committee:s,firstName:i,delegation:""})):t.committeeMatrixEntries??[],checklist:{...Pb,...t.checklist||{}}}}const Pb={positionPaper:!1,researchTopic:!1,researchCountryStance:!1,researchResolutions:!1,researchAllies:!1,researchNews:!1,positionPaperDraft:!1,positionPaperFinal:!1,positionPaperSubmit:!1,openingSpeechDraft:!1,openingSpeechTimed:!1,openingSpeech:!1,modSpeeches:!1,modCaucusPoints:!1,knowRules:!1,knowAgenda:!1,materialsReady:!1},Gl=t=>({id:t,name:"New Conference",country:"",delegateEmail:"",stanceOverview:"",committeeCount:0,committees:[],committeeMatrixEntries:[],countdownDate:"",conferenceEndDate:"",positionPaperDeadline:"",checklist:{...Pb},trustedSources:[],nationSources:[],uploadedResources:[]});function ql(){var t;return((t=crypto.randomUUID)==null?void 0:t.call(crypto))??`conf-${Date.now()}-${Math.random().toString(36).slice(2,9)}`}function zd(){var t;try{const e=localStorage.getItem(Ab);if(!e)return null;const n=JSON.parse(e);if(!Array.isArray(n.conferences)||n.conferences.length===0)return null;const r=n.conferences.map(i=>Rb(i)),s=typeof n.activeConferenceId=="string"&&n.activeConferenceId?n.activeConferenceId:((t=r[0])==null?void 0:t.id)??"";return!s&&r[0]?{conferences:r,activeConferenceId:r[0].id}:{conferences:r,activeConferenceId:s}}catch{return null}}const jb=C.createContext(null);function nM(t,e){const n=t.find(r=>r.id===e);return n||(t.length>0?t[0]:Gl(ql()))}function rM({children:t,userId:e=null}){var q;const[n,r]=C.useState(()=>{var H;const F=zd();return(H=F==null?void 0:F.conferences)!=null&&H.length?F.conferences:[Gl(ql())]}),[s,i]=C.useState(()=>{var H;const F=zd();return F!=null&&F.activeConferenceId&&((H=F==null?void 0:F.conferences)!=null&&H.some(de=>de.id===F.activeConferenceId))?F.activeConferenceId:""}),[a,l]=C.useState(!1),[u,d]=C.useState(null),[f,m]=C.useState(!1),g=s||((q=n[0])==null?void 0:q.id),_=nM(n,g??"");C.useEffect(()=>{!g&&n[0]&&i(n[0].id)},[g,n]),C.useEffect(()=>{const F=setTimeout(()=>{var H;try{localStorage.setItem(Ab,JSON.stringify({conferences:n,activeConferenceId:g??((H=n[0])==null?void 0:H.id)??""}))}catch{}},1e3);return()=>clearTimeout(F)},[n,g]),C.useEffect(()=>{if(!e){m(!0);return}let F=!1;return tM(e).then(H=>{var de,ve;if(!F)if(H&&H.conferences.length>0)r(H.conferences.map(Rb)),i(H.activeConferenceId||H.conferences[0].id);else{const ie=zd();(de=ie==null?void 0:ie.conferences)!=null&&de.length&&Ox(e,{conferences:ie.conferences,activeConferenceId:ie.activeConferenceId||((ve=ie.conferences[0])==null?void 0:ve.id)||""}).catch(()=>{})}}).catch(()=>{}).finally(()=>{F||m(!0)}),()=>{F=!0}},[e]);const E=C.useCallback(F=>{r(H=>{const de=H.findIndex(ie=>ie.id===g);if(de<0)return H;const ve=[...H];return ve[de]=F(H[de]),ve})},[g]),R=C.useCallback(F=>E(H=>({...H,name:F})),[E]),A=C.useCallback(F=>E(H=>({...H,country:F})),[E]),w=C.useCallback(F=>E(H=>({...H,delegateEmail:F})),[E]),v=C.useCallback(F=>E(H=>({...H,stanceOverview:F})),[E]),S=C.useCallback(F=>E(H=>({...H,committeeCount:Math.max(0,Math.min(20,F))})),[E]),N=C.useCallback(F=>E(H=>({...H,committees:F})),[E]),B=C.useCallback(F=>E(H=>({...H,committeeMatrixEntries:[...H.committeeMatrixEntries??[],F]})),[E]),U=C.useCallback(F=>E(H=>({...H,committeeMatrixEntries:(H.committeeMatrixEntries??[]).filter((de,ve)=>ve!==F)})),[E]),T=C.useCallback(F=>E(H=>({...H,countdownDate:F})),[E]),x=C.useCallback(F=>E(H=>({...H,conferenceEndDate:F})),[E]),I=C.useCallback(F=>E(H=>({...H,positionPaperDeadline:F})),[E]),k=C.useCallback(F=>E(H=>({...H,checklist:{...H.checklist,[F]:!H.checklist[F]}})),[E]),P=C.useCallback(F=>E(H=>({...H,trustedSources:[...H.trustedSources,F]})),[E]),j=C.useCallback(F=>E(H=>({...H,trustedSources:H.trustedSources.filter((de,ve)=>ve!==F)})),[E]),b=C.useCallback(F=>E(H=>({...H,nationSources:[...H.nationSources,F]})),[E]),Y=C.useCallback(F=>E(H=>({...H,nationSources:H.nationSources.filter((de,ve)=>ve!==F)})),[E]),ce=C.useCallback((F,H)=>E(de=>({...de,uploadedResources:[...de.uploadedResources,{name:F,url:H}]})),[E]),St=C.useCallback(F=>E(H=>({...H,uploadedResources:H.uploadedResources.filter((de,ve)=>ve!==F)})),[E]),ze=C.useCallback(()=>{const F=ql(),H=Gl(F);r(de=>[...de,H]),i(F)},[]),G=C.useCallback(F=>{var ie,gt;const H=n.filter(zi=>zi.id!==F),de=H.length>0?H:[Gl(ql())],ve=g===F?((ie=de[0])==null?void 0:ie.id)??"":g??((gt=de[0])==null?void 0:gt.id)??"";r(de),i(ve)},[n,g]),ee=C.useCallback(F=>{i(F)},[]),te=C.useCallback(async()=>{var F;if(e){l(!0);try{await Ox(e,{conferences:n,activeConferenceId:g??((F=n[0])==null?void 0:F.id)??""}),d(new Date)}finally{l(!1)}}},[e,n,g]);C.useEffect(()=>{if(!e||!f)return;const F=setTimeout(()=>{te()},3e3);return()=>clearTimeout(F)},[e,f,n,g,te]),C.useEffect(()=>{if(!e||!f)return;const F=setInterval(()=>te(),5*60*1e3);return()=>clearInterval(F)},[e,f,te]);const xe={..._,conferences:n,activeConferenceId:g??"",setName:R,setCountry:A,setDelegateEmail:w,setStanceOverview:v,setCommitteeCount:S,setCommittees:N,addCommitteeMatrixEntry:B,removeCommitteeMatrixEntry:U,setCountdownDate:T,setConferenceEndDate:x,setPositionPaperDeadline:I,toggleChecklist:k,addTrustedSource:P,removeTrustedSource:j,addNationSource:b,removeNationSource:Y,addUploadedResource:ce,removeUploadedResource:St,addConference:ze,removeConference:G,setActiveConference:ee,saveToAccount:te,isSaving:a,lastSaved:u,isLoaded:f};return c.jsx(jb.Provider,{value:xe,children:t})}function An(){const t=C.useContext(jb);if(!t)throw new Error("useDelegate must be used within DelegateProvider");return t}const vf=[];for(let t=0;t<24;t++)for(let e=0;e<60;e+=15)vf.push(`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`);function sM(t){if(!t)return"";const e=new Date(t);if(Number.isNaN(e.getTime()))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${s}`}function iM(t){if(!t)return"09:00";const e=new Date(t);if(Number.isNaN(e.getTime()))return"09:00";const n=e.getHours(),r=e.getMinutes(),s=Math.round(r/15)*15,i=s===60?n+1:n,a=s===60?0:s;return`${String(i%24).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function Mx(t,e){if(!t)return"";const[n,r]=(e||"09:00").split(":").map(Number),s=new Date(t+"T"+String(n).padStart(2,"0")+":"+String(r).padStart(2,"0")+":00");return Number.isNaN(s.getTime())?"":s.toISOString()}function mi({id:t,label:e,value:n,onChange:r,className:s="",dateInputClassName:i="",timeSelectClassName:a=""}){const l=sM(n),u=iM(n),d=vf.includes(u)?u:"09:00",f=g=>{const _=g.target.value||"";r(_?Mx(_,d):"")},m=g=>{const _=g.target.value;r(l?Mx(l,_):"")};return c.jsxs("label",{className:`block ${s}`,htmlFor:t,children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:e}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("input",{id:t,name:t,type:"date",value:l,onChange:f,className:`px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] ${i}`,"aria-label":`${e} date`}),c.jsx("select",{id:`${t}-time`,name:`${t}-time`,value:d,onChange:m,className:`px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] min-w-[5.5rem] ${a}`,"aria-label":`${e} time`,children:vf.map(g=>c.jsx("option",{value:g,children:g},g))})]})]})}function Ba(t){const[e,n]=C.useState(null);return C.useEffect(()=>{if(!t){n(null);return}const r=new Date(t).getTime(),s=()=>{const a=Date.now();if(a>=r){n({days:0,hours:0,minutes:0,seconds:0});return}const l=Math.floor((r-a)/1e3);n({days:Math.floor(l/86400),hours:Math.floor(l%86400/3600),minutes:Math.floor(l%3600/60),seconds:l%60})};s();const i=setInterval(s,1e3);return()=>clearInterval(i)},[t]),e}function $d({diff:t,label:e}){return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--text-muted)]",children:[c.jsx(xo,{className:"w-4 h-4 text-[var(--accent)]"}),c.jsx("span",{children:e})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.days}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Days"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.hours}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Hours"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.minutes}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Minutes"})]}),c.jsxs("div",{className:"card-block p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-semibold text-[var(--accent)]",children:t.seconds}),c.jsx("div",{className:"text-xs text-[var(--text-muted)] mt-1",children:" Seconds"})]})]})]})}function aM(){const{countdownDate:t,positionPaperDeadline:e}=An(),n=Ba(t??""),r=Ba(e??""),s=i=>`${i.days}d ${i.hours}h ${i.minutes}m ${i.seconds}s`;return!n&&!r?c.jsx("p",{className:"text-sm text-[var(--text-muted)] mb-4",children:"Set conference start and/or position paper deadline below to see countdowns."}):c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[n&&c.jsxs("div",{className:"card-block p-3 flex items-center gap-3",children:[c.jsx(xo,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:"Conference starts in"}),c.jsx("div",{className:"text-sm font-semibold text-[var(--accent)]",children:s(n)})]})]}),r&&c.jsxs("div",{className:"card-block p-3 flex items-center gap-3",children:[c.jsx(xo,{className:"w-5 h-5 text-[var(--accent)] flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:"Position paper due in"}),c.jsx("div",{className:"text-sm font-semibold text-[var(--accent)]",children:s(r)})]})]})]})}function oM(){const{countdownDate:t,setCountdownDate:e,conferenceEndDate:n,setConferenceEndDate:r,positionPaperDeadline:s,setPositionPaperDeadline:i}=An(),a=Ba(t??""),l=Ba(n??""),u=Ba(s??"");return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Conference & position paper countdown"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set conference start/end and position paper due date to see time remaining."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx(mi,{id:"countdown-conference-start",label:"Conference start (date & time)",value:t??"",onChange:d=>e(d),dateInputClassName:"max-w-[12rem]"}),c.jsx(mi,{id:"countdown-conference-end",label:"Conference end (date & time)",value:n??"",onChange:d=>r(d),dateInputClassName:"max-w-[12rem]"}),a&&c.jsx($d,{diff:a,label:" Time until conference:"}),l&&c.jsx($d,{diff:l,label:" Time until conference ends:"})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"font-medium text-lg text-[var(--text)]",children:" Position paper countdown"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set the position paper due date to see time remaining."}),c.jsx(mi,{id:"countdown-position-paper-deadline",label:"Position paper due (date & time)",value:s??"",onChange:d=>i(d),dateInputClassName:"max-w-[12rem]"}),u&&c.jsx($d,{diff:u,label:" Time until position paper due:"})]})]})}const Lx=0,Vx=31;function lM(){const{name:t,country:e,delegateEmail:n,stanceOverview:r,countdownDate:s,conferenceEndDate:i,positionPaperDeadline:a,setName:l,setCountry:u,setDelegateEmail:d,setStanceOverview:f,setCountdownDate:m,setConferenceEndDate:g,setPositionPaperDeadline:_}=An(),E=s&&i?Math.round((new Date(i).getTime()-new Date(s).getTime())/864e5):0,[R,A]=C.useState(E?String(E):""),w=C.useRef(!1);C.useEffect(()=>{w.current||A(E?String(E):"")},[E]);const v=()=>{const N=parseInt(R,10);if(Number.isNaN(N)||N<Lx){A(E?String(E):"");return}const B=Math.min(N,Vx);if(B<=0){g(""),A("");return}if(!s)return;const U=new Date(s),T=new Date(U);T.setDate(T.getDate()+B),g(T.toISOString()),A(String(B))},S=()=>{v(),w.current=!1};return c.jsxs("div",{className:"space-y-6",children:[c.jsx(aM,{}),c.jsxs("div",{className:"card-block p-4 space-y-4 border-2 border-[var(--accent)]/30",children:[c.jsx("h3",{className:"font-semibold text-lg text-[var(--text)] flex items-center gap-1.5",children:" Conference & position paper dates"}),c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Add dates when registering your stance. Countdowns will appear here and in the  Conference & position paper countdown section."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[c.jsx(mi,{id:"stance-conference-start",label:"Conference start (date & time)",value:s??"",onChange:N=>m(N),dateInputClassName:"w-full"}),c.jsx(mi,{id:"stance-conference-end",label:"Conference end (date & time)",value:i??"",onChange:N=>g(N),dateInputClassName:"w-full"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-conference-duration",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Duration (days)  sets end from start"}),c.jsx("input",{id:"stance-conference-duration",name:"conference-duration-days",type:"number",min:Lx,max:Vx,value:R,onChange:N=>A(N.target.value),onFocus:()=>{w.current=!0},onBlur:S,onKeyDown:N=>N.key==="Enter"&&N.target.blur(),placeholder:"e.g. 2",className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Conference duration in days"}),c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mt-1",children:"Type a number (031), then blur or press Enter. Set conference start first for it to set the end date."})]}),c.jsx(mi,{id:"stance-position-paper-deadline",label:"Position paper deadline (date & time)",value:a??"",onChange:N=>_(N),dateInputClassName:"max-w-[12rem]"})]}),c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Country Assignment",c.jsx(nr,{title:"Country & Stance",children:"Enter your conference name, country assignment, optional email (e.g. for chair contact), and a brief stance overview. This is your main profile for this conference."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Your country and brief stance overview for this conference."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsxs("label",{className:"block",htmlFor:"stance-conference-name",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Conference name"}),c.jsx("input",{id:"stance-conference-name",name:"conference-name",type:"text",value:t,onChange:N=>l(N.target.value),placeholder:"e.g. NMUN 2025",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-country",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Country"}),c.jsx("input",{id:"stance-country",name:"country",type:"text",value:e,onChange:N=>u(N.target.value),placeholder:"e.g. France, United Kingdom",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-delegate-email",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Your email (optional)"}),c.jsx("input",{id:"stance-delegate-email",name:"delegate-email",type:"email",value:n,onChange:N=>d(N.target.value),placeholder:"e.g. you@example.com",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Your email"})]}),c.jsxs("label",{className:"block",htmlFor:"stance-overview",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block mb-1",children:"Brief stance overview"}),c.jsx("textarea",{id:"stance-overview",name:"stance-overview",value:r,onChange:N=>f(N.target.value),placeholder:"Summarize your country's position on the committee topic(s)...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}function cM(t){if(t===$t)return"Other";const e=Dr.find(n=>n.value===t);return e?e.label:t}function uM(){const{committeeCount:t,committees:e,setCommitteeCount:n,setCommittees:r,committeeMatrixEntries:s,addCommitteeMatrixEntry:i,removeCommitteeMatrixEntry:a}=An(),[l,u]=C.useState(""),[d,f]=C.useState(""),[m,g]=C.useState(""),[_,E]=C.useState({}),[R,A]=C.useState(0),w=Math.max(0,Math.min(20,t)),v=e.length>0?e:Array.from({length:w},(b,Y)=>_[Y]??""),S=b=>{const Y=Math.max(0,Math.min(20,b));n(Y),Y<e.length?r(e.slice(0,Y)):Y>e.length&&r([...e,...Array(Y-e.length).fill("")])},N=(b,Y)=>{const ce=[...v];ce[b]=Y===$t?$t:Y,r(ce)},B=(b,Y)=>{E(St=>({...St,[b]:Y}));const ce=[...e];ce.length<=b||(ce[b]=Y,r(ce))},U=b=>b===$t?"Other":cM(b),T=v.filter(Boolean),x=Math.min(Math.max(0,R),Math.max(0,T.length-1)),I=T[x]??"",k=b=>s.map((Y,ce)=>({entry:Y,i:ce})).filter(({entry:Y})=>Y.committee===b),P=Fa(I),j=b=>{const Y=d===fi?m.trim():d;!b||!l.trim()||(i({committee:b,firstName:l.trim(),delegation:Y||""}),u(""),f(""),g(""))};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Committee Matrix",c.jsx(nr,{title:"Committee Matrix",children:"Set how many committees and which ones for this conference. Use one tab per committee to add entries: first name and delegation. Each delegation shows a flag emoji. Use this to track who is in which committee."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Set how many committees for this conference, which committees, then add delegates (first name + delegation)."})]})}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Conference committees"}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"When registering this conference: how many committees, and which ones?"}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"How many committees?"}),c.jsx("input",{type:"number",min:0,max:20,value:w,onChange:b=>S(parseInt(b.target.value,10)||0),className:"w-24 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Number of committees"})]}),w>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] block",children:"Which committees?"}),Array.from({length:w},(b,Y)=>c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("span",{className:"text-xs text-[var(--text-muted)] w-20",children:["Committee ",Y+1]}),c.jsxs("select",{value:v[Y]&&Dr.some(ce=>ce.value===v[Y])?v[Y]:v[Y]?$t:"",onChange:ce=>N(Y,ce.target.value),className:"min-w-[12rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":`Committee ${Y+1}`,children:[c.jsx("option",{value:"",children:"Select"}),Dr.map(ce=>c.jsx("option",{value:ce.value,children:ce.label},ce.value)),c.jsx("option",{value:$t,children:"Other (custom)"})]}),(v[Y]===$t||v[Y]&&!Dr.some(ce=>ce.value===v[Y]))&&c.jsx("input",{type:"text",value:v[Y]&&v[Y]!==$t?v[Y]:_[Y]??"",onChange:ce=>B(Y,ce.target.value),placeholder:"Committee name",className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]},Y))]})]}),c.jsx("div",{className:"card-block overflow-hidden",children:T.length===0?c.jsx("div",{className:"px-4 py-8 text-center text-[var(--text-muted)] text-sm",children:"Set committees above, then use the tabs to add and view matrix entries per committee."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex border-b border-[var(--border)] overflow-x-auto",children:T.map((b,Y)=>c.jsx("button",{type:"button",onClick:()=>A(Y),className:`px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${Y===x?"border-[var(--accent)] text-[var(--accent)] bg-[var(--accent-soft)]/30":"border-transparent text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-elevated)]"}`,children:U(b)},b))}),I&&c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Delegation options are tailored to this committee (e.g. UNSC: 15 members; GA committees: full UNGA)."}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)] mr-2",children:" Add to this committee:"}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"First name"}),c.jsx("input",{type:"text",value:l,onChange:b=>u(b.target.value),placeholder:"e.g. Alex",className:"w-28 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("label",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-xs text-[var(--text-muted)]",children:"Delegation"}),c.jsxs("select",{value:d,onChange:b=>f(b.target.value),className:"min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Delegation",children:[c.jsx("option",{value:"",children:"Select"}),P.map(b=>c.jsx("option",{value:b,children:b},b)),c.jsx("option",{value:fi,children:"Other"})]}),d===fi&&c.jsx("input",{type:"text",value:m,onChange:b=>g(b.target.value),placeholder:"Delegation name",className:"mt-1 min-w-[10rem] px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),c.jsxs("button",{onClick:()=>j(I),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)]",children:[c.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"First name"}),c.jsx("th",{className:"text-left px-4 py-2 font-medium text-[var(--text-muted)]",children:"Delegation"}),c.jsx("th",{className:"w-10 px-2 py-2","aria-label":"Remove"})]})}),c.jsx("tbody",{children:k(I).length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-[var(--text-muted)]",children:"No entries for this committee yet."})}):k(I).map(({entry:b,i:Y})=>c.jsxs("tr",{className:"border-b border-[var(--border)]",children:[c.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:b.firstName}),c.jsx("td",{className:"px-4 py-3 text-[var(--text)]",children:c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsx("span",{className:"text-base shrink-0",title:b.delegation||void 0,children:Eb(b.delegation||"")||""}),b.delegation||""]})}),c.jsx("td",{className:"px-2 py-3",children:c.jsx("button",{type:"button",onClick:()=>a(Y),className:"p-1.5 rounded text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)]","aria-label":"Remove entry",children:c.jsx(Es,{className:"w-4 h-4"})})})]},Y))})]})})]})]})})]})}const Db="https://docs.google.com/document/d/1SuV8e971dG78pm6_P6Z62MZQTjRKgBn2lyclq148Ifw/edit?usp=sharing";function dM(){const{country:t}=An();return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Prep Template"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Use this template to structure your research and speaking prep."})]}),c.jsxs("div",{className:"card-block p-4 sm:p-5 border-2 border-[var(--accent)]/30 bg-[var(--accent-soft)]/50",children:[c.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] mb-1 flex items-center gap-2",children:[c.jsx(qO,{className:"w-4 h-4 text-[var(--accent)]"}),"Make a copy to guide your prep"]}),c.jsxs("p",{className:"text-sm text-[var(--text-muted)] mb-3",children:["Open the MUN Prep Template in Google Docs, then use ",c.jsx("strong",{children:"File  Make a copy"})," to create your own copy for research and speaking prep."]}),c.jsxs("a",{href:Db,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90 transition-opacity",children:[c.jsx(fp,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]}),c.jsxs("div",{className:"card-block p-6 space-y-4",children:[c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country"}),c.jsx("p",{className:"text-sm text-[var(--text)]",children:t||""})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Topic research"}),c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"Key facts, UN resolutions, recent developments."}),c.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Country stance"}),c.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:"How your country views the topic; red lines and priorities."}),c.jsx("textarea",{placeholder:"Notes...",rows:4,className:"mt-2 w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Opening speech (draft)"}),c.jsx("textarea",{placeholder:"Draft opening statement...",rows:5,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]}),c.jsxs("section",{children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--accent)] mb-2",children:" Mod speeches (optional)"}),c.jsx("textarea",{placeholder:"Talking points for moderated caucus...",rows:3,className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)] resize-none"})]})]})]})}const Ob=["Reuters","BBC News","Al Jazeera","Associated Press (AP)","The Guardian","Council on Foreign Relations (CFR)","Human Rights Watch","Amnesty International"],Ux=[...Ib.map(t=>t.name),...Ob],hM=Object.fromEntries(Ib.map(t=>[t.name,t.url])),fM={health:["WHO","UN News"],disease:["WHO","UN News"],refugee:["UNHCR","UN News","Amnesty International"],refugees:["UNHCR","UN News","Amnesty International"],migration:["UNHCR","UN News","IOM (International Organization for Migration)"],climate:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],environment:["UN News","UN Environment Programme (UNEP)","Reuters","The Guardian"],economy:["World Bank","IMF","UN News"],economic:["World Bank","IMF","UN News"],finance:["IMF","World Bank"],rights:["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],"human-rights":["Human Rights Watch","Amnesty International","UN News","UN Human Rights (OHCHR)"],conflict:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Peacekeeping"],security:["Reuters","BBC News","Council on Foreign Relations (CFR)","UN News","UN Security Council"],peace:["UN News","UN Peacekeeping","Reuters","BBC News"],education:["UN News","UNESCO"],women:["UN News","Amnesty International","UN Women"],gender:["UN News","Amnesty International","UN Women"],disarmament:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],arms:["UN News","UN Office for Disarmament Affairs (UNODA)","Reuters"],drugs:["UN Office on Drugs and Crime (UNODC)","UN News"],crime:["UN Office on Drugs and Crime (UNODC)","UN News"],treaties:["UN Treaty Collection","UN Official Document System (ODS)","UN Audiovisual Library of International Law"],documents:["UN Official Document System (ODS)","UN Digital Library","UN Treaty Collection"],food:["WFP (World Food Programme)","FAO","UN News"],labour:["ILO","UN News"],habitat:["UN-Habitat","UN News"],charter:["UN Charter","UN Official Document System (ODS)"],missions:["UN Peacekeeping","UN Peacekeeping  current missions","UN Special Political Missions"]};function mM(t){const e=t.toLowerCase().trim().split(/\s+/).filter(Boolean);if(e.length===0)return[];const n=new Set;for(const i of e){const a=[];for(const[u,d]of Object.entries(fM))(u.includes(i)||i.includes(u))&&a.push(...d);const l=Ux.filter(u=>u.toLowerCase().includes(i));[...a,...l].forEach(u=>n.add(u))}const r=e.join(" ");return Ux.filter(i=>i.toLowerCase().includes(r)).forEach(i=>n.add(i)),Array.from(n)}function pM(){const{trustedSources:t,nationSources:e,addTrustedSource:n,removeTrustedSource:r,addNationSource:s,removeNationSource:i}=An(),[a,l]=C.useState(""),[u,d]=C.useState(""),[f,m]=C.useState(""),g=C.useMemo(()=>mM(f),[f]),_=()=>{a.trim()&&(n(a.trim()),l(""))},E=()=>{u.trim()&&(s(u.trim()),d(""))},R=A=>{t.includes(A)||n(A)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Trusted & Nation Sources"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Trusted sources and nation-specific sources for research."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Search by key terms (topic-related)"}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"Enter terms related to your topic (e.g. health, refugees, climate, economy) to see suggested sources."}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx(i4,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--text-muted)] pointer-events-none"}),c.jsx("input",{id:"sources-key-terms",name:"sources-key-terms",type:"text",value:f,onChange:A=>m(A.target.value),placeholder:"e.g. health refugees climate",className:"w-full pl-9 pr-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]})}),g.length>0&&c.jsxs("div",{className:"rounded-lg border border-[var(--border)] bg-[var(--bg-elevated)] p-3",children:[c.jsx("p",{className:"text-xs font-medium text-[var(--text-muted)] mb-2",children:"Suggested sources for your topic"}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(A=>c.jsxs("button",{type:"button",onClick:()=>R(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--accent-soft)] text-[var(--accent)] hover:opacity-90 border border-[var(--accent)]/30 disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))})]}),c.jsx("h3",{className:"text-sm font-medium text-[var(--text)] pt-2 border-t border-[var(--border)]",children:" Trusted sources"}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Official UN links by category (click to add; open link in new tab)."}),gp.map(({category:A,sources:w})=>c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5",children:A}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.map(({name:v,url:S})=>c.jsxs("span",{className:"inline-flex items-center gap-1",children:[c.jsxs("button",{type:"button",onClick:()=>R(v),disabled:t.includes(v),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",v]}),c.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline text-xs",title:"Open in new tab",children:""})]},v))})]},A)),c.jsx("h4",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wide mb-1.5 mt-4",children:"Other trusted"}),c.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:Ob.map(A=>c.jsxs("button",{type:"button",onClick:()=>R(A),disabled:t.includes(A),className:"px-2.5 py-1 rounded-md text-xs font-medium transition-colors bg-[var(--bg-elevated)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--accent-soft)] border border-[var(--border)] disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",A]},A))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"sources-trusted-input",name:"sources-trusted",type:"text",value:a,onChange:A=>l(A.target.value),onKeyDown:A=>A.key==="Enter"&&_(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"space-y-2",children:t.map((A,w)=>{const v=hM[A];return c.jsxs("li",{className:"flex items-center justify-between gap-2 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[v?c.jsxs("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--accent)] hover:underline truncate min-w-0",children:[A," "]}):c.jsx("span",{className:"truncate min-w-0",children:A}),c.jsx("button",{onClick:()=>r(w),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)] shrink-0",children:c.jsx(Es,{className:"w-4 h-4"})})]},w)})})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsx("h3",{className:"text-sm font-medium text-[var(--text)]",children:" Nation-specific sources"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"sources-nation-input",name:"sources-nation",type:"text",value:u,onChange:A=>d(A.target.value),onKeyDown:A=>A.key==="Enter"&&E(),placeholder:"URL or name",className:"flex-1 px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"space-y-2",children:e.map((A,w)=>c.jsxs("li",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-[var(--bg-elevated)] text-sm text-[var(--text)]",children:[A,c.jsx("button",{onClick:()=>i(w),className:"p-1 rounded text-[var(--text-muted)] hover:text-[var(--danger)]",children:c.jsx(Es,{className:"w-4 h-4"})})]},w))})]})]})}function gM(){const{uploadedResources:t,addUploadedResource:e,removeUploadedResource:n}=An(),[r,s]=C.useState(""),[i,a]=C.useState(""),l=()=>{r.trim()&&(e(r.trim(),i.trim()||void 0),s(""),a(""))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1",children:" Chair Report & Delegate Resources"}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm",children:"Handbook, position paper guidelines, chair report  upload or link."})]}),c.jsxs("div",{className:"card-block p-4 space-y-4",children:[c.jsxs("h3",{className:"text-sm font-medium text-[var(--text)] flex items-center gap-2",children:[c.jsx(c4,{className:"w-4 h-4 text-[var(--accent)]"}),"  Add resource"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{id:"resource-name",name:"resource-name",type:"text",value:r,onChange:u=>s(u.target.value),placeholder:"Resource name (e.g. Chair report, Pos paper guidelines)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsx("input",{id:"resource-url",name:"resource-url",type:"text",value:i,onChange:u=>a(u.target.value),placeholder:"URL (optional)",className:"w-full px-3 py-2 rounded-lg bg-[var(--bg-elevated)] border border-[var(--border)] text-[var(--text)] placeholder-[var(--text-muted)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),c.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[var(--accent)] text-white text-sm font-medium hover:opacity-90",children:[c.jsx(Nn,{className:"w-4 h-4"})," Add"]})]}),c.jsx("ul",{className:"divide-y divide-[var(--border)] max-h-64 overflow-auto",children:t.map((u,d)=>c.jsxs("li",{className:"px-3 py-3 flex items-center justify-between gap-2",children:[u.url?c.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 min-w-0 flex items-center gap-2 rounded-lg py-1 -mx-1 px-1 hover:bg-[var(--accent-soft)] transition-colors group",children:[c.jsx(fp,{className:"w-4 h-4 flex-shrink-0 text-[var(--text-muted)] group-hover:text-[var(--accent)]"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-[var(--text)] group-hover:text-[var(--accent)] truncate",children:u.name}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] truncate max-w-xs",children:u.url})]})]}):c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-[var(--text)]",children:u.name}),c.jsx("p",{className:"text-xs text-[var(--text-muted)]",children:"No link"})]}),c.jsx("button",{type:"button",onClick:()=>n(d),className:"p-1.5 rounded-lg text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-elevated)] flex-shrink-0","aria-label":"Remove resource",children:c.jsx(Es,{className:"w-4 h-4"})})]},d))})]})]})}const vM=[{title:" Topic research",docSection:"Complete the Topic research section in your prep doc",keys:[{key:"researchTopic",label:"Topic and background (key facts, history)"},{key:"researchResolutions",label:"Existing UN resolutions and draft ideas"},{key:"researchNews",label:"Recent news and developments on the topic"}]},{title:" Country stance",docSection:"Complete the Country stance section in your prep doc",keys:[{key:"researchCountryStance",label:"Your countrys stance, policy, and red lines"},{key:"researchAllies",label:"Likely allies and blocs"}]},{title:" Position paper",docSection:"Use the Position paper section in your prep doc",keys:[{key:"positionPaperDraft",label:"Draft (structure and main points)"},{key:"positionPaperFinal",label:"Finalise (edit and cite sources)"},{key:"positionPaperSubmit",label:"Submit by deadline"},{key:"positionPaper",label:"Complete and approved"}]},{title:" Opening speech",docSection:"Use the Opening speech section in your prep doc",keys:[{key:"openingSpeechDraft",label:"Draft opening statement"},{key:"openingSpeechTimed",label:"Time and trim to speaking limit"},{key:"openingSpeech",label:"Ready and practised"}]},{title:" Mod & unmod speeches",docSection:"Use the Mod / unmod section in your prep doc",keys:[{key:"modSpeeches",label:"Moderated caucus talking points"},{key:"modCaucusPoints",label:"Unmoderated caucus / bloc discussion points"}]},{title:" Rules & materials",docSection:"Check off before conference",keys:[{key:"knowRules",label:"Committee rules and parliamentary procedure"},{key:"knowAgenda",label:"Agenda, timing, and conference schedule"},{key:"materialsReady",label:"Materials ready (placard, paper, laptop, etc.)"}]}];function yM(){const{checklist:t,toggleChecklist:e}=An();return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-start gap-2",children:c.jsxs("div",{children:[c.jsxs("h2",{className:"font-semibold text-2xl text-[var(--text)] mb-1 flex items-center gap-1.5",children:[" Preparation checklist",c.jsx(nr,{title:"Preparation checklist",children:"Tick off research, position paper, speeches, and materials. The checklist follows the sections of the MUN Prep Template  make a copy of the template and work through each section in your doc."})]}),c.jsx("p",{className:"text-[var(--text-muted)] text-sm mb-2",children:"This checklist follows the sections of the MUN Prep Template. Make a copy of the template and work through each section in your doc."}),c.jsxs("a",{href:Db,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-sm font-medium text-[var(--accent)] hover:underline",children:[c.jsx(fp,{className:"w-4 h-4"}),"Open MUN Prep Template (Google Doc)"]})]})}),c.jsx("div",{className:"space-y-5",children:vM.map(n=>c.jsxs("div",{className:"card-block p-4",children:[c.jsx("h3",{className:"font-medium text-[var(--text)] mb-1",children:n.title}),c.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-3",children:n.docSection}),c.jsx("ul",{className:"space-y-1",children:n.keys.map(({key:r,label:s})=>c.jsx("li",{children:c.jsxs("label",{className:"flex items-center gap-3 px-3 py-2.5 rounded-lg cursor-pointer hover:bg-[var(--bg-elevated)] transition-colors",children:[c.jsx("span",{className:"text-[var(--accent)] flex-shrink-0",children:t[r]?c.jsx(Lo,{className:"w-5 h-5 fill-[var(--accent)]"}):c.jsx(Au,{className:"w-5 h-5"})}),c.jsx("span",{className:`text-sm text-[var(--text)] ${t[r]?"line-through text-[var(--text-muted)]":""}`,children:s}),c.jsx("input",{type:"checkbox",checked:t[r],onChange:()=>e(r),className:"sr-only","aria-label":s})]})},r))})]},n.title))})]})}const xM=[{step:1,title:"Set your conference & country",body:"In  Country & Stance, enter conference name, your country assignment, your email (optional), and a brief stance overview."},{step:2,title:"Committee matrix",body:"In  Committee Matrix, set how many committees and which ones. Use the tabs to add entries per committee: first name and delegation. Each delegation shows a flag emoji."},{step:3,title:"Prep template",body:"In  Prep Template, open the MUN Prep Template (Google Doc) and make a copy. Use it to structure research, country stance, position paper, and speeches."},{step:4,title:"Trusted & nation sources",body:"In  Trusted & Nation Sources, add links and sources you use for research and country policy."},{step:5,title:"Checklist",body:"In  Checklist, tick off research, position paper, speeches, and materials. The checklist follows the sections of the MUN Prep Template."},{step:6,title:"Chair report & resources",body:"In  Chair Report & Resources, add handbook, position paper guidelines, and any uploaded resources from your chair."},{step:7,title:"Conference & position paper countdown",body:"In  Conference & position paper countdown (or on  Country & Stance) set conference start/end and position paper due date to see countdowns."},{step:8,title:"Save to account",body:'Sign in and use "Save to account" to store your conferences and data across devices. You can add multiple conferences and switch between them.'}];function _M(){const[t,e]=C.useState(!1);return c.jsxs("section",{className:"mt-10 pt-6 border-t border-[var(--border)]","aria-labelledby":"delegate-howto-heading",children:[c.jsxs("button",{type:"button",onClick:()=>e(n=>!n),className:"flex items-center gap-2 w-full text-left group","aria-expanded":t,children:[c.jsx(Mo,{className:"w-5 h-5 text-[var(--accent)] shrink-0"}),c.jsx("h2",{id:"delegate-howto-heading",className:"font-semibold text-lg text-[var(--text)] group-hover:text-[var(--accent)] transition-colors",children:"How to use this system (Delegate)"}),t?c.jsx(hp,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"}):c.jsx(Bi,{className:"w-5 h-5 text-[var(--text-muted)] ml-auto"})]}),t&&c.jsxs("div",{className:"mt-4 space-y-4 text-sm text-[var(--text-muted)]",children:[c.jsx("p",{className:"text-[var(--text)]",children:"Step-by-step guide for preparing as a delegate:"}),c.jsx("ol",{className:"space-y-3 list-none pl-0",children:xM.map(({step:n,title:r,body:s})=>c.jsxs("li",{className:"flex gap-3",children:[c.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-[var(--accent-soft)] text-[var(--accent)] font-semibold flex items-center justify-center text-xs",children:n}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-[var(--text)]",children:r}),c.jsx("p",{className:"mt-0.5",children:s})]})]},n))})]})]})}const Mb="seamuns-dashboard-sidebar-expanded";function wM(){try{const t=localStorage.getItem(Mb);return t===null?!0:t==="true"}catch{return!0}}function EM(){const{conferences:t,activeConferenceId:e,setActiveConference:n,addConference:r,removeConference:s,saveToAccount:i,isSaving:a,lastSaved:l,isLoaded:u}=An(),{isAuthenticated:d}=Oo(),f=t.length>1,m=g=>{const _=Date.now()-g.getTime();return _<6e4?"Saved just now":_<36e5?`Saved ${Math.floor(_/6e4)}m ago`:g.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})};return c.jsxs("div",{className:"border-b border-[var(--border)] bg-[var(--bg-elevated)] px-3 sm:px-4 py-2 sm:py-3 flex flex-wrap items-center gap-2 sm:gap-3 shadow-[0_1px_0_0_var(--border)]",children:[c.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center flex-shrink-0",children:c.jsx(Ru,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h1",{className:"page-title text-[var(--text)] whitespace-nowrap truncate",children:" Delegate Dashboard"}),c.jsx("p",{className:"text-xs sm:text-sm text-[var(--text-muted)] whitespace-nowrap truncate",children:" Country   Matrix   Prep   Checklist   Countdown"}),u&&!d&&c.jsx("p",{className:"text-xs text-[var(--accent)] mt-1",children:"Sign in and save to account so your data isn't lost on refresh or when switching devices."})]}),u&&c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("label",{className:"flex items-center gap-1.5 text-xs text-[var(--text-muted)]",children:[c.jsx("span",{className:"hidden sm:inline",children:"Conference"}),c.jsx("select",{value:e,onChange:g=>n(g.target.value),className:"min-w-[8rem] px-2.5 py-1.5 rounded-lg bg-[var(--bg-base)] border border-[var(--border)] text-[var(--text)] text-sm focus:outline-none focus:ring-2 focus:ring-[var(--accent)]","aria-label":"Select conference",children:t.map(g=>c.jsx("option",{value:g.id,children:g.name||"Unnamed"},g.id))})]}),c.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--accent)] text-white hover:opacity-90 transition-opacity",children:[c.jsx(Nn,{className:"w-3.5 h-3.5"})," Add conference"]}),f&&c.jsx("button",{type:"button",onClick:()=>s(e),title:"Remove this conference",className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium text-[var(--text-muted)] hover:text-[var(--danger)] hover:bg-[var(--bg-card)] transition-colors","aria-label":"Remove conference",children:c.jsx(Es,{className:"w-3.5 h-3.5"})}),d&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>i(),disabled:a,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium bg-[var(--brand)] text-white hover:opacity-90 transition-opacity disabled:opacity-60",children:[c.jsx(yb,{className:"w-3.5 h-3.5"}),a?"Saving":"Save to account"]}),l&&!a&&c.jsxs("span",{className:"text-xs text-[var(--text-muted)]",title:"Auto-saved to your account",children:["Auto-saved ",m(l)]})]})]})]})}const bM=[{id:"country",label:" Country & Stance",icon:QO},{id:"countdown",label:" Countdown",icon:xo},{id:"matrix",label:" Committee Matrix",icon:xb},{id:"prep",label:" Prep Template",icon:ku},{id:"sources",label:" Trusted & Nation Sources",icon:pf},{id:"resources",label:" Chair Report & Resources",icon:Mo},{id:"checklist",label:" Checklist",icon:Lo},{id:"links",label:" Official links",icon:pf}];function SM(){const[t,e]=C.useState("country"),[n,r]=C.useState(wM),{saveToAccount:s,isLoaded:i}=An();C.useEffect(()=>{localStorage.setItem(Mb,String(n))},[n]),C.useEffect(()=>{i&&s()},[t,i,s]);const a=()=>r(l=>!l);return c.jsxs("div",{className:"flex flex-col lg:flex-row min-h-[calc(100vh-3rem)] sm:min-h-[calc(100vh-3.5rem)] lg:min-h-[calc(100vh-4rem)]",children:[c.jsx("aside",{className:`border-b lg:border-b-0 lg:border-r border-[var(--border)] bg-[var(--bg-elevated)] flex-shrink-0 overflow-x-auto overflow-y-hidden transition-[width] duration-200 ${n?"lg:w-max lg:min-w-[11rem] lg:max-w-[14rem]":"lg:w-10"}`,children:c.jsxs("div",{className:"flex lg:flex-col gap-0.5 p-1 sm:p-1.5 items-stretch lg:items-stretch",children:[bM.map(({id:l,label:u,icon:d})=>c.jsxs("button",{onClick:()=>e(l),title:u,className:`flex items-center gap-1.5 px-2 py-1.5 rounded-md text-xs font-medium transition-colors text-left whitespace-nowrap min-w-0 shrink-0 ${n?"w-full lg:w-max lg:min-w-0":"w-full lg:justify-center lg:px-1.5 lg:w-full"} ${t===l?"bg-[var(--accent)] text-white shadow-sm":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)]"}`,children:[c.jsx(d,{className:"w-3.5 h-3.5 flex-shrink-0"}),c.jsx("span",{className:n?"lg:whitespace-nowrap":"truncate lg:sr-only lg:overflow-hidden lg:w-0",children:u})]},l)),c.jsxs("button",{type:"button",onClick:a,title:n?"Collapse sidebar":"Expand sidebar",className:"hidden lg:flex items-center justify-center gap-1.5 px-1.5 py-1.5 rounded-md text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--bg-card)] transition-colors w-max",children:[n?c.jsx(mb,{className:"w-4 h-4 flex-shrink-0"}):c.jsx(pb,{className:"w-4 h-4 flex-shrink-0"}),n&&c.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"Hide labels"})]})]})}),c.jsxs("main",{className:"flex-1 p-2 sm:p-3 md:p-5 overflow-auto min-w-0",children:[t==="country"&&c.jsx(lM,{}),t==="matrix"&&c.jsx(uM,{}),t==="prep"&&c.jsx(dM,{}),t==="sources"&&c.jsx(pM,{}),t==="links"&&c.jsx("div",{className:"card-block p-4 sm:p-6",children:c.jsx(vp,{showHeading:!0})}),t==="resources"&&c.jsx(gM,{}),t==="checklist"&&c.jsx(yM,{}),t==="countdown"&&c.jsx(oM,{}),c.jsx(_M,{})]})]})}function CM(){const{user:t}=Oo(),e=(t==null?void 0:t.uid)??null;return c.jsxs(rM,{userId:e,children:[c.jsx(EM,{}),c.jsx(SM,{})]})}function TM(){return c.jsxs("div",{className:"max-w-[1000px] mx-auto px-3 sm:px-6 py-8 sm:py-12 md:py-16 text-center",children:[c.jsx(wb,{className:"h-10 sm:h-12 md:h-14 w-auto mx-auto mb-4 sm:mb-5"}),c.jsxs("h1",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl text-[var(--text)] mb-2 sm:mb-3",children:["SEAMUNs Dashboard ",c.jsx("span",{className:"text-[var(--brand)]",children:""})]}),c.jsxs("p",{className:"text-[var(--text-muted)] text-sm sm:text-base md:text-lg mb-6 sm:mb-10 max-w-xl mx-auto",children:["Part of ",c.jsx("a",{href:"https://seamuns.site",target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand)] hover:underline",children:"SEAMUNs"}),"  run committee sessions and prepare for conferences. Choose your role below."]}),c.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-6",children:[c.jsxs(Uh,{to:"/chair",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--brand)] hover:bg-[var(--brand-soft)] transition-all text-left",children:[c.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--brand-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:c.jsx(db,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--brand)]"})}),c.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Chair Room"}),c.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Digital Room   Delegates   Motions   Voting   Speakers   Crisis   Archive"})]}),c.jsxs(Uh,{to:"/delegate",className:"group block p-4 sm:p-6 md:p-8 rounded-[var(--radius-card)] border border-[var(--border)] bg-[var(--bg-card)] shadow-[var(--shadow-card)] hover:border-[var(--accent)] hover:bg-[var(--accent-soft)] transition-all text-left",children:[c.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 rounded-lg sm:rounded-xl bg-[var(--accent-soft)] flex items-center justify-center mb-3 sm:mb-4 group-hover:scale-105 transition-transform",children:c.jsx(Ru,{className:"w-4 sm:w-5 h-4 sm:h-5 text-[var(--accent)]"})}),c.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-[var(--text)] mb-1.5 sm:mb-2",children:" Delegate Dashboard"}),c.jsx("p",{className:"text-[var(--text-muted)] text-xs sm:text-sm",children:" Country   Matrix   Prep   Checklist   Countdown"})]})]}),c.jsxs("p",{className:"mt-6 sm:mt-10 text-[var(--text-muted)] text-xs sm:text-sm flex items-center justify-center gap-2",children:[c.jsx(GO,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),c.jsx("span",{children:" Per-conference setup for chairs and delegates"})]}),c.jsx("section",{className:"mt-10 sm:mt-14 pt-8 sm:pt-12 border-t border-[var(--border)] text-left",children:c.jsx(vp,{showHeading:!0})})]})}function IM(){return c.jsx(FO,{children:c.jsx(jI,{children:c.jsxs(Fs,{path:"/",element:c.jsx(u4,{}),children:[c.jsx(Fs,{index:!0,element:c.jsx(TM,{})}),c.jsx(Fs,{path:"chair",element:c.jsx(eM,{})}),c.jsx(Fs,{path:"delegate",element:c.jsx(CM,{})}),c.jsx(Fs,{path:"*",element:c.jsx(AI,{to:"/",replace:!0})})]})})})}window.addEventListener("unhandledrejection",t=>{var n;const e=((n=t.reason)==null?void 0:n.message)??String(t.reason);typeof e=="string"&&e.includes("message channel closed before a response was received")&&(t.preventDefault(),t.stopPropagation())});const kM=!0,NM=kM?OO:MO,AM=c.jsx(C.StrictMode,{children:c.jsx(BI,{children:c.jsx(NM,{children:c.jsx(IM,{})})})});Xw(document.getElementById("root")).render(AM);
